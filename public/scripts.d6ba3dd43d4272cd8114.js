!function(t,e){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){"use strict";var n=[],i=t.document,r=Object.getPrototypeOf,s=n.slice,a=n.concat,o=n.push,l=n.indexOf,h={},u=h.toString,c=h.hasOwnProperty,f=c.toString,d=f.call(Object),g={},p=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},_=function(t){return null!=t&&t===t.window},v={type:!0,src:!0,noModule:!0};function m(t,e,n){var r,s=(e=e||i).createElement("script");if(s.text=t,n)for(r in v)n[r]&&(s[r]=n[r]);e.head.appendChild(s).parentNode.removeChild(s)}function y(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?h[u.call(t)]||"object":typeof t}var x=function(t,e){return new x.fn.init(t,e)},b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function w(t){var e=!!t&&"length"in t&&t.length,n=y(t);return!p(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}x.fn=x.prototype={jquery:"3.3.1",constructor:x,length:0,toArray:function(){return s.call(this)},get:function(t){return null==t?s.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=x.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return x.each(this,t)},map:function(t){return this.pushStack(x.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:n.sort,splice:n.splice},x.extend=x.fn.extend=function(){var t,e,n,i,r,s,a=arguments[0]||{},o=1,l=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[o]||{},o++),"object"==typeof a||p(a)||(a={}),o===l&&(a=this,o--);o<l;o++)if(null!=(t=arguments[o]))for(e in t)n=a[e],a!==(i=t[e])&&(h&&i&&(x.isPlainObject(i)||(r=Array.isArray(i)))?(r?(r=!1,s=n&&Array.isArray(n)?n:[]):s=n&&x.isPlainObject(n)?n:{},a[e]=x.extend(h,s,i)):void 0!==i&&(a[e]=i));return a},x.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==u.call(t)||(e=r(t))&&("function"!=typeof(n=c.call(e,"constructor")&&e.constructor)||f.call(n)!==d))},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){m(t)},each:function(t,e){var n,i=0;if(w(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},trim:function(t){return null==t?"":(t+"").replace(b,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(w(Object(t))?x.merge(n,"string"==typeof t?[t]:t):o.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:l.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,a=!n;r<s;r++)!e(t[r],r)!==a&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(w(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return a.apply([],o)},guid:1,support:g}),"function"==typeof Symbol&&(x.fn[Symbol.iterator]=n[Symbol.iterator]),x.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){h["[object "+e+"]"]=e.toLowerCase()});var C=function(t){var e,n,i,r,s,a,o,l,h,u,c,f,d,g,p,_,v,m,y,x="sizzle"+1*new Date,b=t.document,w=0,C=0,S=at(),k=at(),A=at(),T=function(t,e){return t===e&&(c=!0),0},E={}.hasOwnProperty,M=[],P=M.pop,O=M.push,R=M.push,I=M.slice,L=function(t,e){for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},F="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",z="\\["+N+"*("+j+")(?:"+N+"*([*^$|!~]?=)"+N+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+j+"))|)"+N+"*\\]",D=":("+j+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+z+")*)|.*)\\)|)",B=new RegExp(N+"+","g"),q=new RegExp("^"+N+"+|((?:^|[^\\\\])(?:\\\\.)*)"+N+"+$","g"),U=new RegExp("^"+N+"*,"+N+"*"),V=new RegExp("^"+N+"*([>+~]|"+N+")"+N+"*"),H=new RegExp("="+N+"*([^\\]'\"]*?)"+N+"*\\]","g"),G=new RegExp(D),W=new RegExp("^"+j+"$"),$={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j+"|[*])"),ATTR:new RegExp("^"+z),PSEUDO:new RegExp("^"+D),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+N+"*(even|odd|(([+-]|)(\\d*)n|)"+N+"*(?:([+-]|)"+N+"*(\\d+)|))"+N+"*\\)|)","i"),bool:new RegExp("^(?:"+F+")$","i"),needsContext:new RegExp("^"+N+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+N+"*((?:-\\d)?\\d*)"+N+"*\\)|)(?=[^-]|$)","i")},Z=/^(?:input|select|textarea|button)$/i,X=/^h\d$/i,J=/^[^{]+\{\s*\[native \w/,Y=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,K=/[+~]/,Q=new RegExp("\\\\([\\da-f]{1,6}"+N+"?|("+N+")|.)","ig"),tt=function(t,e,n){var i="0x"+e-65536;return i!=i||n?e:i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,nt=function(t,e){return e?"\0"===t?"\ufffd":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},it=function(){f()},rt=mt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{R.apply(M=I.call(b.childNodes),b.childNodes)}catch(t){R={apply:M.length?function(t,e){O.apply(t,I.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}function st(t,e,i,r){var s,o,h,u,c,g,v,m=e&&e.ownerDocument,w=e?e.nodeType:9;if(i=i||[],"string"!=typeof t||!t||1!==w&&9!==w&&11!==w)return i;if(!r&&((e?e.ownerDocument||e:b)!==d&&f(e),e=e||d,p)){if(11!==w&&(c=Y.exec(t)))if(s=c[1]){if(9===w){if(!(h=e.getElementById(s)))return i;if(h.id===s)return i.push(h),i}else if(m&&(h=m.getElementById(s))&&y(e,h)&&h.id===s)return i.push(h),i}else{if(c[2])return R.apply(i,e.getElementsByTagName(t)),i;if((s=c[3])&&n.getElementsByClassName&&e.getElementsByClassName)return R.apply(i,e.getElementsByClassName(s)),i}if(n.qsa&&!A[t+" "]&&(!_||!_.test(t))){if(1!==w)m=e,v=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(et,nt):e.setAttribute("id",u=x),o=(g=a(t)).length;o--;)g[o]="#"+u+" "+vt(g[o]);v=g.join(","),m=K.test(t)&&pt(e.parentNode)||e}if(v)try{return R.apply(i,m.querySelectorAll(v)),i}catch(t){}finally{u===x&&e.removeAttribute("id")}}}return l(t.replace(q,"$1"),e,i,r)}function at(){var t=[];return function e(n,r){return t.push(n+" ")>i.cacheLength&&delete e[t.shift()],e[n+" "]=r}}function ot(t){return t[x]=!0,t}function lt(t){var e=d.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ht(t,e){for(var n=t.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=e}function ut(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function ct(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function ft(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function dt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&rt(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function gt(t){return ot(function(e){return e=+e,ot(function(n,i){for(var r,s=t([],n.length,e),a=s.length;a--;)n[r=s[a]]&&(n[r]=!(i[r]=n[r]))})})}function pt(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in n=st.support={},s=st.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},f=st.setDocument=function(t){var e,r,a=t?t.ownerDocument||t:b;return a!==d&&9===a.nodeType&&a.documentElement?(g=(d=a).documentElement,p=!s(d),b!==d&&(r=d.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",it,!1):r.attachEvent&&r.attachEvent("onunload",it)),n.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),n.getElementsByTagName=lt(function(t){return t.appendChild(d.createComment("")),!t.getElementsByTagName("*").length}),n.getElementsByClassName=J.test(d.getElementsByClassName),n.getById=lt(function(t){return g.appendChild(t).id=x,!d.getElementsByName||!d.getElementsByName(x).length}),n.getById?(i.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){return t.getAttribute("id")===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var n=e.getElementById(t);return n?[n]:[]}}):(i.filter.ID=function(t){var e=t.replace(Q,tt);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},i.find.ID=function(t,e){if(void 0!==e.getElementById&&p){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),i.find.TAG=n.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):n.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,s=e.getElementsByTagName(t);if("*"===t){for(;n=s[r++];)1===n.nodeType&&i.push(n);return i}return s},i.find.CLASS=n.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&p)return e.getElementsByClassName(t)},v=[],_=[],(n.qsa=J.test(d.querySelectorAll))&&(lt(function(t){g.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+N+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||_.push("\\["+N+"*(?:value|"+F+")"),t.querySelectorAll("[id~="+x+"-]").length||_.push("~="),t.querySelectorAll(":checked").length||_.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||_.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=d.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&_.push("name"+N+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&_.push(":enabled",":disabled"),g.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),_.push(",.*:")})),(n.matchesSelector=J.test(m=g.matches||g.webkitMatchesSelector||g.mozMatchesSelector||g.oMatchesSelector||g.msMatchesSelector))&&lt(function(t){n.disconnectedMatch=m.call(t,"*"),m.call(t,"[s!='']:x"),v.push("!=",D)}),_=_.length&&new RegExp(_.join("|")),v=v.length&&new RegExp(v.join("|")),e=J.test(g.compareDocumentPosition),y=e||J.test(g.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},T=e?function(t,e){if(t===e)return c=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i||(1&(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!n.sortDetached&&e.compareDocumentPosition(t)===i?t===d||t.ownerDocument===b&&y(b,t)?-1:e===d||e.ownerDocument===b&&y(b,e)?1:u?L(u,t)-L(u,e):0:4&i?-1:1)}:function(t,e){if(t===e)return c=!0,0;var n,i=0,r=t.parentNode,s=e.parentNode,a=[t],o=[e];if(!r||!s)return t===d?-1:e===d?1:r?-1:s?1:u?L(u,t)-L(u,e):0;if(r===s)return ut(t,e);for(n=t;n=n.parentNode;)a.unshift(n);for(n=e;n=n.parentNode;)o.unshift(n);for(;a[i]===o[i];)i++;return i?ut(a[i],o[i]):a[i]===b?-1:o[i]===b?1:0},d):d},st.matches=function(t,e){return st(t,null,null,e)},st.matchesSelector=function(t,e){if((t.ownerDocument||t)!==d&&f(t),e=e.replace(H,"='$1']"),n.matchesSelector&&p&&!A[e+" "]&&(!v||!v.test(e))&&(!_||!_.test(e)))try{var i=m.call(t,e);if(i||n.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(t){}return st(e,d,null,[t]).length>0},st.contains=function(t,e){return(t.ownerDocument||t)!==d&&f(t),y(t,e)},st.attr=function(t,e){(t.ownerDocument||t)!==d&&f(t);var r=i.attrHandle[e.toLowerCase()],s=r&&E.call(i.attrHandle,e.toLowerCase())?r(t,e,!p):void 0;return void 0!==s?s:n.attributes||!p?t.getAttribute(e):(s=t.getAttributeNode(e))&&s.specified?s.value:null},st.escape=function(t){return(t+"").replace(et,nt)},st.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},st.uniqueSort=function(t){var e,i=[],r=0,s=0;if(c=!n.detectDuplicates,u=!n.sortStable&&t.slice(0),t.sort(T),c){for(;e=t[s++];)e===t[s]&&(r=i.push(s));for(;r--;)t.splice(i[r],1)}return u=null,t},r=st.getText=function(t){var e,n="",i=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=r(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[i++];)n+=r(e);return n},(i=st.selectors={cacheLength:50,createPseudo:ot,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Q,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(Q,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||st.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&st.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return $.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&G.test(n)&&(e=a(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Q,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+N+")"+t+"("+N+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(i){var r=st.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(B," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),a="last"!==t.slice(-4),o="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,f,d,g,p=s!==a?"nextSibling":"previousSibling",_=e.parentNode,v=o&&e.nodeName.toLowerCase(),m=!l&&!o,y=!1;if(_){if(s){for(;p;){for(f=e;f=f[p];)if(o?f.nodeName.toLowerCase()===v:1===f.nodeType)return!1;g=p="only"===t&&!g&&"nextSibling"}return!0}if(g=[a?_.firstChild:_.lastChild],a&&m){for(y=(d=(h=(u=(c=(f=_)[x]||(f[x]={}))[f.uniqueID]||(c[f.uniqueID]={}))[t]||[])[0]===w&&h[1])&&h[2],f=d&&_.childNodes[d];f=++d&&f&&f[p]||(y=d=0)||g.pop();)if(1===f.nodeType&&++y&&f===e){u[t]=[w,d,y];break}}else if(m&&(y=d=(h=(u=(c=(f=e)[x]||(f[x]={}))[f.uniqueID]||(c[f.uniqueID]={}))[t]||[])[0]===w&&h[1]),!1===y)for(;(f=++d&&f&&f[p]||(y=d=0)||g.pop())&&((o?f.nodeName.toLowerCase()!==v:1!==f.nodeType)||!++y||(m&&((u=(c=f[x]||(f[x]={}))[f.uniqueID]||(c[f.uniqueID]={}))[t]=[w,y]),f!==e)););return(y-=r)===i||y%i==0&&y/i>=0}}},PSEUDO:function(t,e){var n,r=i.pseudos[t]||i.setFilters[t.toLowerCase()]||st.error("unsupported pseudo: "+t);return r[x]?r(e):r.length>1?(n=[t,t,"",e],i.setFilters.hasOwnProperty(t.toLowerCase())?ot(function(t,n){for(var i,s=r(t,e),a=s.length;a--;)t[i=L(t,s[a])]=!(n[i]=s[a])}):function(t){return r(t,0,n)}):r}},pseudos:{not:ot(function(t){var e=[],n=[],i=o(t.replace(q,"$1"));return i[x]?ot(function(t,e,n,r){for(var s,a=i(t,null,r,[]),o=t.length;o--;)(s=a[o])&&(t[o]=!(e[o]=s))}):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}}),has:ot(function(t){return function(e){return st(t,e).length>0}}),contains:ot(function(t){return t=t.replace(Q,tt),function(e){return(e.textContent||e.innerText||r(e)).indexOf(t)>-1}}),lang:ot(function(t){return W.test(t||"")||st.error("unsupported lang: "+t),t=t.replace(Q,tt).toLowerCase(),function(e){var n;do{if(n=p?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===g},focus:function(t){return t===d.activeElement&&(!d.hasFocus||d.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:dt(!1),disabled:dt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!i.pseudos.empty(t)},header:function(t){return X.test(t.nodeName)},input:function(t){return Z.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:gt(function(){return[0]}),last:gt(function(t,e){return[e-1]}),eq:gt(function(t,e,n){return[n<0?n+e:n]}),even:gt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:gt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:gt(function(t,e,n){for(var i=n<0?n+e:n;--i>=0;)t.push(i);return t}),gt:gt(function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t})}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[e]=ct(e);for(e in{submit:!0,reset:!0})i.pseudos[e]=ft(e);function _t(){}function vt(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function mt(t,e,n){var i=e.dir,r=e.next,s=r||i,a=n&&"parentNode"===s,o=C++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||a)return t(e,n,r);return!1}:function(e,n,l){var h,u,c,f=[w,o];if(l){for(;e=e[i];)if((1===e.nodeType||a)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||a)if(u=(c=e[x]||(e[x]={}))[e.uniqueID]||(c[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[i]||e;else{if((h=u[s])&&h[0]===w&&h[1]===o)return f[2]=h[2];if(u[s]=f,f[2]=t(e,n,l))return!0}return!1}}function yt(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function xt(t,e,n,i,r){for(var s,a=[],o=0,l=t.length,h=null!=e;o<l;o++)(s=t[o])&&(n&&!n(s,i,r)||(a.push(s),h&&e.push(o)));return a}function bt(t,e,n,i,r,s){return i&&!i[x]&&(i=bt(i)),r&&!r[x]&&(r=bt(r,s)),ot(function(s,a,o,l){var h,u,c,f=[],d=[],g=a.length,p=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)st(t,e[i],n);return n}(e||"*",o.nodeType?[o]:o,[]),_=!t||!s&&e?p:xt(p,f,t,o,l),v=n?r||(s?t:g||i)?[]:a:_;if(n&&n(_,v,o,l),i)for(h=xt(v,d),i(h,[],o,l),u=h.length;u--;)(c=h[u])&&(v[d[u]]=!(_[d[u]]=c));if(s){if(r||t){if(r){for(h=[],u=v.length;u--;)(c=v[u])&&h.push(_[u]=c);r(null,v=[],h,l)}for(u=v.length;u--;)(c=v[u])&&(h=r?L(s,c):f[u])>-1&&(s[h]=!(a[h]=c))}}else v=xt(v===a?v.splice(g,v.length):v),r?r(null,a,v,l):R.apply(a,v)})}function wt(t){for(var e,n,r,s=t.length,a=i.relative[t[0].type],o=a||i.relative[" "],l=a?1:0,u=mt(function(t){return t===e},o,!0),c=mt(function(t){return L(e,t)>-1},o,!0),f=[function(t,n,i){var r=!a&&(i||n!==h)||((e=n).nodeType?u(t,n,i):c(t,n,i));return e=null,r}];l<s;l++)if(n=i.relative[t[l].type])f=[mt(yt(f),n)];else{if((n=i.filter[t[l].type].apply(null,t[l].matches))[x]){for(r=++l;r<s&&!i.relative[t[r].type];r++);return bt(l>1&&yt(f),l>1&&vt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(q,"$1"),n,l<r&&wt(t.slice(l,r)),r<s&&wt(t=t.slice(r)),r<s&&vt(t))}f.push(n)}return yt(f)}function Ct(t,e){var n=e.length>0,r=t.length>0,s=function(s,a,o,l,u){var c,g,_,v=0,m="0",y=s&&[],x=[],b=h,C=s||r&&i.find.TAG("*",u),S=w+=null==b?1:Math.random()||.1,k=C.length;for(u&&(h=a===d||a||u);m!==k&&null!=(c=C[m]);m++){if(r&&c){for(g=0,a||c.ownerDocument===d||(f(c),o=!p);_=t[g++];)if(_(c,a||d,o)){l.push(c);break}u&&(w=S)}n&&((c=!_&&c)&&v--,s&&y.push(c))}if(v+=m,n&&m!==v){for(g=0;_=e[g++];)_(y,x,a,o);if(s){if(v>0)for(;m--;)y[m]||x[m]||(x[m]=P.call(l));x=xt(x)}R.apply(l,x),u&&!s&&x.length>0&&v+e.length>1&&st.uniqueSort(l)}return u&&(w=S,h=b),y};return n?ot(s):s}return _t.prototype=i.filters=i.pseudos,i.setFilters=new _t,a=st.tokenize=function(t,e){var n,r,s,a,o,l,h,u=k[t+" "];if(u)return e?0:u.slice(0);for(o=t,l=[],h=i.preFilter;o;){for(a in n&&!(r=U.exec(o))||(r&&(o=o.slice(r[0].length)||o),l.push(s=[])),n=!1,(r=V.exec(o))&&(n=r.shift(),s.push({value:n,type:r[0].replace(q," ")}),o=o.slice(n.length)),i.filter)!(r=$[a].exec(o))||h[a]&&!(r=h[a](r))||(n=r.shift(),s.push({value:n,type:a,matches:r}),o=o.slice(n.length));if(!n)break}return e?o.length:o?st.error(t):k(t,l).slice(0)},o=st.compile=function(t,e){var n,i=[],r=[],s=A[t+" "];if(!s){for(e||(e=a(t)),n=e.length;n--;)(s=wt(e[n]))[x]?i.push(s):r.push(s);(s=A(t,Ct(r,i))).selector=t}return s},l=st.select=function(t,e,n,r){var s,l,h,u,c,f="function"==typeof t&&t,d=!r&&a(t=f.selector||t);if(n=n||[],1===d.length){if((l=d[0]=d[0].slice(0)).length>2&&"ID"===(h=l[0]).type&&9===e.nodeType&&p&&i.relative[l[1].type]){if(!(e=(i.find.ID(h.matches[0].replace(Q,tt),e)||[])[0]))return n;f&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(s=$.needsContext.test(t)?0:l.length;s--&&!i.relative[u=(h=l[s]).type];)if((c=i.find[u])&&(r=c(h.matches[0].replace(Q,tt),K.test(l[0].type)&&pt(e.parentNode)||e))){if(l.splice(s,1),!(t=r.length&&vt(l)))return R.apply(n,r),n;break}}return(f||o(t,d))(r,e,!p,n,!e||K.test(t)&&pt(e.parentNode)||e),n},n.sortStable=x.split("").sort(T).join("")===x,n.detectDuplicates=!!c,f(),n.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(d.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ht("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),n.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ht("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ht(F,function(t,e,n){var i;if(!n)return!0===t[e]?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),st}(t);x.find=C,x.expr=C.selectors,x.expr[":"]=x.expr.pseudos,x.uniqueSort=x.unique=C.uniqueSort,x.text=C.getText,x.isXMLDoc=C.isXML,x.contains=C.contains,x.escapeSelector=C.escape;var S=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&x(t).is(n))break;i.push(t)}return i},k=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},A=x.expr.match.needsContext;function T(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var E=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function M(t,e,n){return p(e)?x.grep(t,function(t,i){return!!e.call(t,i,t)!==n}):e.nodeType?x.grep(t,function(t){return t===e!==n}):"string"!=typeof e?x.grep(t,function(t){return l.call(e,t)>-1!==n}):x.filter(e,t,n)}x.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?x.find.matchesSelector(i,t)?[i]:[]:x.find.matches(t,x.grep(e,function(t){return 1===t.nodeType}))},x.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(x(t).filter(function(){for(e=0;e<i;e++)if(x.contains(r[e],this))return!0}));for(n=this.pushStack([]),e=0;e<i;e++)x.find(t,r[e],n);return i>1?x.uniqueSort(n):n},filter:function(t){return this.pushStack(M(this,t||[],!1))},not:function(t){return this.pushStack(M(this,t||[],!0))},is:function(t){return!!M(this,"string"==typeof t&&A.test(t)?x(t):t||[],!1).length}});var P,O=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(x.fn.init=function(t,e,n){var r,s;if(!t)return this;if(n=n||P,"string"==typeof t){if(!(r="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:O.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(x.merge(this,x.parseHTML(r[1],(e=e instanceof x?e[0]:e)&&e.nodeType?e.ownerDocument||e:i,!0)),E.test(r[1])&&x.isPlainObject(e))for(r in e)p(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(s=i.getElementById(r[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):p(t)?void 0!==n.ready?n.ready(t):t(x):x.makeArray(t,this)}).prototype=x.fn,P=x(i);var R=/^(?:parents|prev(?:Until|All))/,I={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}x.fn.extend({has:function(t){var e=x(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(x.contains(this,e[t]))return!0})},closest:function(t,e){var n,i=0,r=this.length,s=[],a="string"!=typeof t&&x(t);if(!A.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&x.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?x.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?l.call(x(t),this[0]):l.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(x.uniqueSort(x.merge(this.get(),x(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),x.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return S(t,"parentNode")},parentsUntil:function(t,e,n){return S(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return S(t,"nextSibling")},prevAll:function(t){return S(t,"previousSibling")},nextUntil:function(t,e,n){return S(t,"nextSibling",n)},prevUntil:function(t,e,n){return S(t,"previousSibling",n)},siblings:function(t){return k((t.parentNode||{}).firstChild,t)},children:function(t){return k(t.firstChild)},contents:function(t){return T(t,"iframe")?t.contentDocument:(T(t,"template")&&(t=t.content||t),x.merge([],t.childNodes))}},function(t,e){x.fn[t]=function(n,i){var r=x.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=x.filter(i,r)),this.length>1&&(I[t]||x.uniqueSort(r),R.test(t)&&r.reverse()),this.pushStack(r)}});var F=/[^\x20\t\r\n\f]+/g;function N(t){return t}function j(t){throw t}function z(t,e,n,i){var r;try{t&&p(r=t.promise)?r.call(t).done(e).fail(n):t&&p(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}x.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return x.each(t.match(F)||[],function(t,n){e[n]=!0}),e}(t):x.extend({},t);var e,n,i,r,s=[],a=[],o=-1,l=function(){for(r=r||t.once,i=e=!0;a.length;o=-1)for(n=a.shift();++o<s.length;)!1===s[o].apply(n[0],n[1])&&t.stopOnFalse&&(o=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},h={add:function(){return s&&(n&&!e&&(o=s.length-1,a.push(n)),function e(n){x.each(n,function(n,i){p(i)?t.unique&&h.has(i)||s.push(i):i&&i.length&&"string"!==y(i)&&e(i)})}(arguments),n&&!e&&l()),this},remove:function(){return x.each(arguments,function(t,e){for(var n;(n=x.inArray(e,s,n))>-1;)s.splice(n,1),n<=o&&o--}),this},has:function(t){return t?x.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=a=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=a=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],a.push(n),e||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},x.extend({Deferred:function(e){var n=[["notify","progress",x.Callbacks("memory"),x.Callbacks("memory"),2],["resolve","done",x.Callbacks("once memory"),x.Callbacks("once memory"),0,"resolved"],["reject","fail",x.Callbacks("once memory"),x.Callbacks("once memory"),1,"rejected"]],i="pending",r={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return x.Deferred(function(e){x.each(n,function(n,i){var r=p(t[i[4]])&&t[i[4]];s[i[1]](function(){var t=r&&r.apply(this,arguments);t&&p(t.promise)?t.promise().progress(e.notify).done(e.resolve).fail(e.reject):e[i[0]+"With"](this,r?[t]:arguments)})}),t=null}).promise()},then:function(e,i,r){var s=0;function a(e,n,i,r){return function(){var o=this,l=arguments,h=function(){var t,h;if(!(e<s)){if((t=i.apply(o,l))===n.promise())throw new TypeError("Thenable self-resolution");p(h=t&&("object"==typeof t||"function"==typeof t)&&t.then)?r?h.call(t,a(s,n,N,r),a(s,n,j,r)):h.call(t,a(++s,n,N,r),a(s,n,j,r),a(s,n,N,n.notifyWith)):(i!==N&&(o=void 0,l=[t]),(r||n.resolveWith)(o,l))}},u=r?h:function(){try{h()}catch(t){x.Deferred.exceptionHook&&x.Deferred.exceptionHook(t,u.stackTrace),e+1>=s&&(i!==j&&(o=void 0,l=[t]),n.rejectWith(o,l))}};e?u():(x.Deferred.getStackHook&&(u.stackTrace=x.Deferred.getStackHook()),t.setTimeout(u))}}return x.Deferred(function(t){n[0][3].add(a(0,t,p(r)?r:N,t.notifyWith)),n[1][3].add(a(0,t,p(e)?e:N)),n[2][3].add(a(0,t,p(i)?i:j))}).promise()},promise:function(t){return null!=t?x.extend(t,r):r}},s={};return x.each(n,function(t,e){var a=e[2],o=e[5];r[e[1]]=a.add,o&&a.add(function(){i=o},n[3-t][2].disable,n[3-t][3].disable,n[0][2].lock,n[0][3].lock),a.add(e[3].fire),s[e[0]]=function(){return s[e[0]+"With"](this===s?void 0:this,arguments),this},s[e[0]+"With"]=a.fireWith}),r.promise(s),e&&e.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=s.call(arguments),a=x.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?s.call(arguments):n,--e||a.resolveWith(i,r)}};if(e<=1&&(z(t,a.done(o(n)).resolve,a.reject,!e),"pending"===a.state()||p(r[n]&&r[n].then)))return a.then();for(;n--;)z(r[n],o(n),a.reject);return a.promise()}});var D=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;x.Deferred.exceptionHook=function(e,n){t.console&&t.console.warn&&e&&D.test(e.name)&&t.console.warn("jQuery.Deferred exception: "+e.message,e.stack,n)},x.readyException=function(e){t.setTimeout(function(){throw e})};var B=x.Deferred();function q(){i.removeEventListener("DOMContentLoaded",q),t.removeEventListener("load",q),x.ready()}x.fn.ready=function(t){return B.then(t).catch(function(t){x.readyException(t)}),this},x.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--x.readyWait:x.isReady)||(x.isReady=!0,!0!==t&&--x.readyWait>0||B.resolveWith(i,[x]))}}),x.ready.then=B.then,"complete"===i.readyState||"loading"!==i.readyState&&!i.documentElement.doScroll?t.setTimeout(x.ready):(i.addEventListener("DOMContentLoaded",q),t.addEventListener("load",q));var U=function(t,e,n,i,r,s,a){var o=0,l=t.length,h=null==n;if("object"===y(n))for(o in r=!0,n)U(t,e,o,n[o],!0,s,a);else if(void 0!==i&&(r=!0,p(i)||(a=!0),h&&(a?(e.call(t,i),e=null):(h=e,e=function(t,e,n){return h.call(x(t),n)})),e))for(;o<l;o++)e(t[o],n,a?i:i.call(t[o],o,e(t[o],n)));return r?t:h?e.call(t):l?e(t[0],n):s},V=/^-ms-/,H=/-([a-z])/g;function G(t,e){return e.toUpperCase()}function W(t){return t.replace(V,"ms-").replace(H,G)}var $=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Z(){this.expando=x.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(t){var e=t[this.expando];return e||(e={},$(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[W(e)]=n;else for(i in e)r[W(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][W(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(W):(e=W(e))in i?[e]:e.match(F)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||x.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!x.isEmptyObject(e)}};var X=new Z,J=new Z,Y=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Q(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(K,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:Y.test(t)?JSON.parse(t):t)}(n)}catch(t){}J.set(t,e,n)}else n=void 0;return n}x.extend({hasData:function(t){return J.hasData(t)||X.hasData(t)},data:function(t,e,n){return J.access(t,e,n)},removeData:function(t,e){J.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),x.fn.extend({data:function(t,e){var n,i,r,s=this[0],a=s&&s.attributes;if(void 0===t){if(this.length&&(r=J.get(s),1===s.nodeType&&!X.get(s,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=W(i.slice(5)),Q(s,i,r[i]));X.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){J.set(this,t)}):U(this,function(e){var n;if(s&&void 0===e){if(void 0!==(n=J.get(s,t)))return n;if(void 0!==(n=Q(s,t)))return n}else this.each(function(){J.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){J.remove(this,t)})}}),x.extend({queue:function(t,e,n){var i;if(t)return i=X.get(t,e=(e||"fx")+"queue"),n&&(!i||Array.isArray(n)?i=X.access(t,e,x.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){var n=x.queue(t,e=e||"fx"),i=n.length,r=n.shift(),s=x._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,function(){x.dequeue(t,e)},s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:x.Callbacks("once memory").add(function(){X.remove(t,[e+"queue",n])})})}}),x.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?x.queue(this[0],t):void 0===e?this:this.each(function(){var n=x.queue(this,t,e);x._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&x.dequeue(this,t)})},dequeue:function(t){return this.each(function(){x.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=x.Deferred(),s=this,a=this.length,o=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(n=X.get(s[a],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(o));return o(),r.promise(e)}});var tt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,et=new RegExp("^(?:([+-])=|)("+tt+")([a-z%]*)$","i"),nt=["Top","Right","Bottom","Left"],it=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&x.contains(t.ownerDocument,t)&&"none"===x.css(t,"display")},rt=function(t,e,n,i){var r,s,a={};for(s in e)a[s]=t.style[s],t.style[s]=e[s];for(s in r=n.apply(t,i||[]),e)t.style[s]=a[s];return r};function st(t,e,n,i){var r,s,a=20,o=i?function(){return i.cur()}:function(){return x.css(t,e,"")},l=o(),h=n&&n[3]||(x.cssNumber[e]?"":"px"),u=(x.cssNumber[e]||"px"!==h&&+l)&&et.exec(x.css(t,e));if(u&&u[3]!==h){for(h=h||u[3],u=+(l/=2)||1;a--;)x.style(t,e,u+h),(1-s)*(1-(s=o()/l||.5))<=0&&(a=0),u/=s;x.style(t,e,(u*=2)+h),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=h,i.start=u,i.end=r)),r}var at={};function ot(t){var e,n=t.ownerDocument,i=t.nodeName,r=at[i];return r||(e=n.body.appendChild(n.createElement(i)),r=x.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),at[i]=r,r)}function lt(t,e){for(var n,i,r=[],s=0,a=t.length;s<a;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=X.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&it(i)&&(r[s]=ot(i))):"none"!==n&&(r[s]="none",X.set(i,"display",n)));for(s=0;s<a;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}x.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){it(this)?x(this).show():x(this).hide()})}});var ht=/^(?:checkbox|radio)$/i,ut=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ct=/^$|^module$|\/(?:java|ecma)script/i,ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function dt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&T(t,e)?x.merge([t],n):n}function gt(t,e){for(var n=0,i=t.length;n<i;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td;var pt=/<|&#?\w+;/;function _t(t,e,n,i,r){for(var s,a,o,l,h,u,c=e.createDocumentFragment(),f=[],d=0,g=t.length;d<g;d++)if((s=t[d])||0===s)if("object"===y(s))x.merge(f,s.nodeType?[s]:s);else if(pt.test(s)){for(a=a||c.appendChild(e.createElement("div")),o=(ut.exec(s)||["",""])[1].toLowerCase(),a.innerHTML=(l=ft[o]||ft._default)[1]+x.htmlPrefilter(s)+l[2],u=l[0];u--;)a=a.lastChild;x.merge(f,a.childNodes),(a=c.firstChild).textContent=""}else f.push(e.createTextNode(s));for(c.textContent="",d=0;s=f[d++];)if(i&&x.inArray(s,i)>-1)r&&r.push(s);else if(h=x.contains(s.ownerDocument,s),a=dt(c.appendChild(s),"script"),h&&gt(a),n)for(u=0;s=a[u++];)ct.test(s.type||"")&&n.push(s);return c}!function(){var t=i.createDocumentFragment().appendChild(i.createElement("div")),e=i.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),g.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var vt=i.documentElement,mt=/^key/,yt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,xt=/^([^.]*)(?:\.(.+)|)/;function bt(){return!0}function wt(){return!1}function Ct(){try{return i.activeElement}catch(t){}}function St(t,e,n,i,r,s){var a,o;if("object"==typeof e){for(o in"string"!=typeof n&&(i=i||n,n=void 0),e)St(t,o,n,i,e[o],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=wt;else if(!r)return t;return 1===s&&(a=r,(r=function(t){return x().off(t),a.apply(this,arguments)}).guid=a.guid||(a.guid=x.guid++)),t.each(function(){x.event.add(this,e,r,i,n)})}x.event={global:{},add:function(t,e,n,i,r){var s,a,o,l,h,u,c,f,d,g,p,_=X.get(t);if(_)for(n.handler&&(n=(s=n).handler,r=s.selector),r&&x.find.matchesSelector(vt,r),n.guid||(n.guid=x.guid++),(l=_.events)||(l=_.events={}),(a=_.handle)||(a=_.handle=function(e){return void 0!==x&&x.event.triggered!==e.type?x.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(F)||[""]).length;h--;)d=p=(o=xt.exec(e[h])||[])[1],g=(o[2]||"").split(".").sort(),d&&(c=x.event.special[d]||{},c=x.event.special[d=(r?c.delegateType:c.bindType)||d]||{},u=x.extend({type:d,origType:p,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&x.expr.match.needsContext.test(r),namespace:g.join(".")},s),(f=l[d])||((f=l[d]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,g,a)||t.addEventListener&&t.addEventListener(d,a)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?f.splice(f.delegateCount++,0,u):f.push(u),x.event.global[d]=!0)},remove:function(t,e,n,i,r){var s,a,o,l,h,u,c,f,d,g,p,_=X.hasData(t)&&X.get(t);if(_&&(l=_.events)){for(h=(e=(e||"").match(F)||[""]).length;h--;)if(d=p=(o=xt.exec(e[h])||[])[1],g=(o[2]||"").split(".").sort(),d){for(c=x.event.special[d]||{},f=l[d=(i?c.delegateType:c.bindType)||d]||[],o=o[2]&&new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=f.length;s--;)u=f[s],!r&&p!==u.origType||n&&n.guid!==u.guid||o&&!o.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(f.splice(s,1),u.selector&&f.delegateCount--,c.remove&&c.remove.call(t,u));a&&!f.length&&(c.teardown&&!1!==c.teardown.call(t,g,_.handle)||x.removeEvent(t,d,_.handle),delete l[d])}else for(d in l)x.event.remove(t,d+e[h],n,i,!0);x.isEmptyObject(l)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,a,o=x.event.fix(t),l=new Array(arguments.length),h=(X.get(this,"events")||{})[o.type]||[],u=x.event.special[o.type]||{};for(l[0]=o,e=1;e<arguments.length;e++)l[e]=arguments[e];if(o.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,o)){for(a=x.event.handlers.call(this,o,h),e=0;(r=a[e++])&&!o.isPropagationStopped();)for(o.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!o.isImmediatePropagationStopped();)o.rnamespace&&!o.rnamespace.test(s.namespace)||(o.handleObj=s,o.data=s.data,void 0!==(i=((x.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,l))&&!1===(o.result=i)&&(o.preventDefault(),o.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,o),o.result}},handlers:function(t,e){var n,i,r,s,a,o=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(s=[],a={},n=0;n<l;n++)void 0===a[r=(i=e[n]).selector+" "]&&(a[r]=i.needsContext?x(r,this).index(h)>-1:x.find(r,this,null,[h]).length),a[r]&&s.push(i);s.length&&o.push({elem:h,handlers:s})}return h=this,l<e.length&&o.push({elem:h,handlers:e.slice(l)}),o},addProp:function(t,e){Object.defineProperty(x.Event.prototype,t,{enumerable:!0,configurable:!0,get:p(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[x.expando]?t:new x.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Ct()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Ct()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&T(this,"input"))return this.click(),!1},_default:function(t){return T(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},x.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},x.Event=function(t,e){if(!(this instanceof x.Event))return new x.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?bt:wt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&x.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[x.expando]=!0},x.Event.prototype={constructor:x.Event,isDefaultPrevented:wt,isPropagationStopped:wt,isImmediatePropagationStopped:wt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=bt,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=bt,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=bt,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},x.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&mt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&yt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},x.event.addProp),x.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){x.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||x.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}}),x.fn.extend({on:function(t,e,n,i){return St(this,t,e,n,i)},one:function(t,e,n,i){return St(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,x(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=wt),this.each(function(){x.event.remove(this,t,n,e)})}});var kt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,At=/<script|<style|<link/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Et=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Mt(t,e){return T(t,"table")&&T(11!==e.nodeType?e:e.firstChild,"tr")&&x(t).children("tbody")[0]||t}function Pt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ot(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Rt(t,e){var n,i,r,s,a,o,l,h;if(1===e.nodeType){if(X.hasData(t)&&(s=X.access(t),a=X.set(e,s),h=s.events))for(r in delete a.handle,a.events={},h)for(n=0,i=h[r].length;n<i;n++)x.event.add(e,r,h[r][n]);J.hasData(t)&&(o=J.access(t),l=x.extend({},o),J.set(e,l))}}function It(t,e){var n=e.nodeName.toLowerCase();"input"===n&&ht.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Lt(t,e,n,i){e=a.apply([],e);var r,s,o,l,h,u,c=0,f=t.length,d=f-1,_=e[0],v=p(_);if(v||f>1&&"string"==typeof _&&!g.checkClone&&Tt.test(_))return t.each(function(r){var s=t.eq(r);v&&(e[0]=_.call(this,r,s.html())),Lt(s,e,n,i)});if(f&&(s=(r=_t(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(l=(o=x.map(dt(r,"script"),Pt)).length;c<f;c++)h=r,c!==d&&(h=x.clone(h,!0,!0),l&&x.merge(o,dt(h,"script"))),n.call(t[c],h,c);if(l)for(u=o[o.length-1].ownerDocument,x.map(o,Ot),c=0;c<l;c++)ct.test((h=o[c]).type||"")&&!X.access(h,"globalEval")&&x.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?x._evalUrl&&x._evalUrl(h.src):m(h.textContent.replace(Et,""),u,h))}return t}function Ft(t,e,n){for(var i,r=e?x.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||x.cleanData(dt(i)),i.parentNode&&(n&&x.contains(i.ownerDocument,i)&&gt(dt(i,"script")),i.parentNode.removeChild(i));return t}x.extend({htmlPrefilter:function(t){return t.replace(kt,"<$1></$2>")},clone:function(t,e,n){var i,r,s,a,o=t.cloneNode(!0),l=x.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||x.isXMLDoc(t)))for(a=dt(o),i=0,r=(s=dt(t)).length;i<r;i++)It(s[i],a[i]);if(e)if(n)for(s=s||dt(t),a=a||dt(o),i=0,r=s.length;i<r;i++)Rt(s[i],a[i]);else Rt(t,o);return(a=dt(o,"script")).length>0&&gt(a,!l&&dt(t,"script")),o},cleanData:function(t){for(var e,n,i,r=x.event.special,s=0;void 0!==(n=t[s]);s++)if($(n)){if(e=n[X.expando]){if(e.events)for(i in e.events)r[i]?x.event.remove(n,i):x.removeEvent(n,i,e.handle);n[X.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),x.fn.extend({detach:function(t){return Ft(this,t,!0)},remove:function(t){return Ft(this,t)},text:function(t){return U(this,function(t){return void 0===t?x.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Lt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Mt(this,t).appendChild(t)})},prepend:function(){return Lt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Mt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Lt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(x.cleanData(dt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return x.clone(this,t,e)})},html:function(t){return U(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!At.test(t)&&!ft[(ut.exec(t)||["",""])[1].toLowerCase()]){t=x.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(x.cleanData(dt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Lt(this,arguments,function(e){var n=this.parentNode;x.inArray(this,t)<0&&(x.cleanData(dt(this)),n&&n.replaceChild(e,this))},t)}}),x.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){x.fn[t]=function(t){for(var n,i=[],r=x(t),s=r.length-1,a=0;a<=s;a++)n=a===s?this:this.clone(!0),x(r[a])[e](n),o.apply(i,n.get());return this.pushStack(i)}});var Nt=new RegExp("^("+tt+")(?!px)[a-z%]+$","i"),jt=function(e){var n=e.ownerDocument.defaultView;return n&&n.opener||(n=t),n.getComputedStyle(e)},zt=new RegExp(nt.join("|"),"i");function Dt(t,e,n){var i,r,s,a,o=t.style;return(n=n||jt(t))&&(""!==(a=n.getPropertyValue(e)||n[e])||x.contains(t.ownerDocument,t)||(a=x.style(t,e)),!g.pixelBoxStyles()&&Nt.test(a)&&zt.test(e)&&(i=o.width,r=o.minWidth,s=o.maxWidth,o.minWidth=o.maxWidth=o.width=a,a=n.width,o.width=i,o.minWidth=r,o.maxWidth=s)),void 0!==a?a+"":a}function Bt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function e(){if(u){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",vt.appendChild(h).appendChild(u);var e=t.getComputedStyle(u);r="1%"!==e.top,l=12===n(e.marginLeft),u.style.right="60%",o=36===n(e.right),s=36===n(e.width),u.style.position="absolute",a=36===u.offsetWidth||"absolute",vt.removeChild(h),u=null}}function n(t){return Math.round(parseFloat(t))}var r,s,a,o,l,h=i.createElement("div"),u=i.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,x.extend(g,{boxSizingReliable:function(){return e(),s},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),r},reliableMarginLeft:function(){return e(),l},scrollboxSize:function(){return e(),a}}))}();var qt=/^(none|table(?!-c[ea]).+)/,Ut=/^--/,Vt={position:"absolute",visibility:"hidden",display:"block"},Ht={letterSpacing:"0",fontWeight:"400"},Gt=["Webkit","Moz","ms"],Wt=i.createElement("div").style;function $t(t){var e=x.cssProps[t];return e||(e=x.cssProps[t]=function(t){if(t in Wt)return t;for(var e=t[0].toUpperCase()+t.slice(1),n=Gt.length;n--;)if((t=Gt[n]+e)in Wt)return t}(t)||t),e}function Zt(t,e,n){var i=et.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function Xt(t,e,n,i,r,s){var a="width"===e?1:0,o=0,l=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(l+=x.css(t,n+nt[a],!0,r)),i?("content"===n&&(l-=x.css(t,"padding"+nt[a],!0,r)),"margin"!==n&&(l-=x.css(t,"border"+nt[a]+"Width",!0,r))):(l+=x.css(t,"padding"+nt[a],!0,r),"padding"!==n?l+=x.css(t,"border"+nt[a]+"Width",!0,r):o+=x.css(t,"border"+nt[a]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-o-.5))),l}function Jt(t,e,n){var i=jt(t),r=Dt(t,e,i),s="border-box"===x.css(t,"boxSizing",!1,i),a=s;if(Nt.test(r)){if(!n)return r;r="auto"}return a=a&&(g.boxSizingReliable()||r===t.style[e]),("auto"===r||!parseFloat(r)&&"inline"===x.css(t,"display",!1,i))&&(r=t["offset"+e[0].toUpperCase()+e.slice(1)],a=!0),(r=parseFloat(r)||0)+Xt(t,e,n||(s?"border":"content"),a,i,r)+"px"}function Yt(t,e,n,i,r){return new Yt.prototype.init(t,e,n,i,r)}x.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Dt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,a,o=W(e),l=Ut.test(e),h=t.style;if(l||(e=$t(o)),a=x.cssHooks[e]||x.cssHooks[o],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:h[e];"string"==(s=typeof n)&&(r=et.exec(n))&&r[1]&&(n=st(t,e,r),s="number"),null!=n&&n==n&&("number"===s&&(n+=r&&r[3]||(x.cssNumber[o]?"":"px")),g.clearCloneStyle||""!==n||0!==e.indexOf("background")||(h[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l?h.setProperty(e,n):h[e]=n))}},css:function(t,e,n,i){var r,s,a,o=W(e);return Ut.test(e)||(e=$t(o)),(a=x.cssHooks[e]||x.cssHooks[o])&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=Dt(t,e,i)),"normal"===r&&e in Ht&&(r=Ht[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),x.each(["height","width"],function(t,e){x.cssHooks[e]={get:function(t,n,i){if(n)return!qt.test(x.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Jt(t,e,i):rt(t,Vt,function(){return Jt(t,e,i)})},set:function(t,n,i){var r,s=jt(t),a="border-box"===x.css(t,"boxSizing",!1,s),o=i&&Xt(t,e,i,a,s);return a&&g.scrollboxSize()===s.position&&(o-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-Xt(t,e,"border",!1,s)-.5)),o&&(r=et.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=x.css(t,e)),Zt(0,n,o)}}}),x.cssHooks.marginLeft=Bt(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Dt(t,"marginLeft"))||t.getBoundingClientRect().left-rt(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),x.each({margin:"",padding:"",border:"Width"},function(t,e){x.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+nt[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(x.cssHooks[t+e].set=Zt)}),x.fn.extend({css:function(t,e){return U(this,function(t,e,n){var i,r,s={},a=0;if(Array.isArray(e)){for(i=jt(t),r=e.length;a<r;a++)s[e[a]]=x.css(t,e[a],!1,i);return s}return void 0!==n?x.style(t,e,n):x.css(t,e)},t,e,arguments.length>1)}}),x.Tween=Yt,(Yt.prototype={constructor:Yt,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||x.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(x.cssNumber[n]?"":"px")},cur:function(){var t=Yt.propHooks[this.prop];return t&&t.get?t.get(this):Yt.propHooks._default.get(this)},run:function(t){var e,n=Yt.propHooks[this.prop];return this.pos=e=this.options.duration?x.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yt.propHooks._default.set(this),this}}).init.prototype=Yt.prototype,(Yt.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=x.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){x.fx.step[t.prop]?x.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[x.cssProps[t.prop]]&&!x.cssHooks[t.prop]?t.elem[t.prop]=t.now:x.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=Yt.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},x.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},x.fx=Yt.prototype.init,x.fx.step={};var Kt,Qt,te=/^(?:toggle|show|hide)$/,ee=/queueHooks$/;function ne(){Qt&&(!1===i.hidden&&t.requestAnimationFrame?t.requestAnimationFrame(ne):t.setTimeout(ne,x.fx.interval),x.fx.tick())}function ie(){return t.setTimeout(function(){Kt=void 0}),Kt=Date.now()}function re(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=nt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function se(t,e,n){for(var i,r=(ae.tweeners[e]||[]).concat(ae.tweeners["*"]),s=0,a=r.length;s<a;s++)if(i=r[s].call(n,e,t))return i}function ae(t,e,n){var i,r,s=0,a=ae.prefilters.length,o=x.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Kt||ie(),n=Math.max(0,h.startTime+h.duration-e),i=1-(n/h.duration||0),s=0,a=h.tweens.length;s<a;s++)h.tweens[s].run(i);return o.notifyWith(t,[h,i,n]),i<1&&a?n:(a||o.notifyWith(t,[h,1,0]),o.resolveWith(t,[h]),!1)},h=o.promise({elem:t,props:x.extend({},e),opts:x.extend(!0,{specialEasing:{},easing:x.easing._default},n),originalProperties:e,originalOptions:n,startTime:Kt||ie(),duration:n.duration,tweens:[],createTween:function(e,n){var i=x.Tween(t,h.opts,e,n,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(i),i},stop:function(e){var n=0,i=e?h.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)h.tweens[n].run(1);return e?(o.notifyWith(t,[h,1,0]),o.resolveWith(t,[h,e])):o.rejectWith(t,[h,e]),this}}),u=h.props;for(function(t,e){var n,i,r,s,a;for(n in t)if(r=e[i=W(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(a=x.cssHooks[i])&&"expand"in a)for(n in s=a.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,h.opts.specialEasing);s<a;s++)if(i=ae.prefilters[s].call(h,t,u,h.opts))return p(i.stop)&&(x._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return x.map(u,se,h),p(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),x.fx.timer(x.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}x.Animation=x.extend(ae,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return st(n.elem,t,et.exec(e),n),n}]},tweener:function(t,e){p(t)?(e=t,t=["*"]):t=t.match(F);for(var n,i=0,r=t.length;i<r;i++)(ae.tweeners[n=t[i]]=ae.tweeners[n]||[]).unshift(e)},prefilters:[function(t,e,n){var i,r,s,a,o,l,h,u,c="width"in e||"height"in e,f=this,d={},g=t.style,p=t.nodeType&&it(t),_=X.get(t,"fxshow");for(i in n.queue||(null==(a=x._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,o=a.empty.fire,a.empty.fire=function(){a.unqueued||o()}),a.unqueued++,f.always(function(){f.always(function(){a.unqueued--,x.queue(t,"fx").length||a.empty.fire()})})),e)if(te.test(r=e[i])){if(delete e[i],s=s||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!_||void 0===_[i])continue;p=!0}d[i]=_&&_[i]||x.style(t,i)}if((l=!x.isEmptyObject(e))||!x.isEmptyObject(d))for(i in c&&1===t.nodeType&&(n.overflow=[g.overflow,g.overflowX,g.overflowY],null==(h=_&&_.display)&&(h=X.get(t,"display")),"none"===(u=x.css(t,"display"))&&(h?u=h:(lt([t],!0),h=t.style.display||h,u=x.css(t,"display"),lt([t]))),("inline"===u||"inline-block"===u&&null!=h)&&"none"===x.css(t,"float")&&(l||(f.done(function(){g.display=h}),null==h&&(h="none"===(u=g.display)?"":u)),g.display="inline-block")),n.overflow&&(g.overflow="hidden",f.always(function(){g.overflow=n.overflow[0],g.overflowX=n.overflow[1],g.overflowY=n.overflow[2]})),l=!1,d)l||(_?"hidden"in _&&(p=_.hidden):_=X.access(t,"fxshow",{display:h}),s&&(_.hidden=!p),p&&lt([t],!0),f.done(function(){for(i in p||lt([t]),X.remove(t,"fxshow"),d)x.style(t,i,d[i])})),l=se(p?_[i]:0,i,f),i in _||(_[i]=l.start,p&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ae.prefilters.unshift(t):ae.prefilters.push(t)}}),x.speed=function(t,e,n){var i=t&&"object"==typeof t?x.extend({},t):{complete:n||!n&&e||p(t)&&t,duration:t,easing:n&&e||e&&!p(e)&&e};return x.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration=i.duration in x.fx.speeds?x.fx.speeds[i.duration]:x.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){p(i.old)&&i.old.call(this),i.queue&&x.dequeue(this,i.queue)},i},x.fn.extend({fadeTo:function(t,e,n,i){return this.filter(it).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=x.isEmptyObject(t),s=x.speed(e,n,i),a=function(){var e=ae(this,x.extend({},t),s);(r||X.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||!1===s.queue?this.each(a):this.queue(s.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",s=x.timers,a=X.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ee.test(r)&&i(a[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||x.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,n=X.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=x.timers,a=i?i.length:0;for(n.finish=!0,x.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<a;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),x.each(["toggle","show","hide"],function(t,e){var n=x.fn[e];x.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(re(e,!0),t,i,r)}}),x.each({slideDown:re("show"),slideUp:re("hide"),slideToggle:re("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){x.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),x.timers=[],x.fx.tick=function(){var t,e=0,n=x.timers;for(Kt=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||x.fx.stop(),Kt=void 0},x.fx.timer=function(t){x.timers.push(t),x.fx.start()},x.fx.interval=13,x.fx.start=function(){Qt||(Qt=!0,ne())},x.fx.stop=function(){Qt=null},x.fx.speeds={slow:600,fast:200,_default:400},x.fn.delay=function(e,n){return e=x.fx&&x.fx.speeds[e]||e,this.queue(n=n||"fx",function(n,i){var r=t.setTimeout(n,e);i.stop=function(){t.clearTimeout(r)}})},function(){var t=i.createElement("input"),e=i.createElement("select").appendChild(i.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=i.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var oe,le=x.expr.attrHandle;x.fn.extend({attr:function(t,e){return U(this,x.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){x.removeAttr(this,t)})}}),x.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?x.prop(t,e,n):(1===s&&x.isXMLDoc(t)||(r=x.attrHooks[e.toLowerCase()]||(x.expr.match.bool.test(e)?oe:void 0)),void 0!==n?null===n?void x.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=x.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&T(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(F);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),oe={set:function(t,e,n){return!1===e?x.removeAttr(t,n):t.setAttribute(n,n),n}},x.each(x.expr.match.bool.source.match(/\w+/g),function(t,e){var n=le[e]||x.find.attr;le[e]=function(t,e,i){var r,s,a=e.toLowerCase();return i||(s=le[a],le[a]=r,r=null!=n(t,e,i)?a:null,le[a]=s),r}});var he=/^(?:input|select|textarea|button)$/i,ue=/^(?:a|area)$/i;function ce(t){return(t.match(F)||[]).join(" ")}function fe(t){return t.getAttribute&&t.getAttribute("class")||""}function de(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}x.fn.extend({prop:function(t,e){return U(this,x.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[x.propFix[t]||t]})}}),x.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&x.isXMLDoc(t)||(r=x.propHooks[e=x.propFix[e]||e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=x.find.attr(t,"tabindex");return e?parseInt(e,10):he.test(t.nodeName)||ue.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(x.propHooks.selected={get:function(t){return null},set:function(t){}}),x.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){x.propFix[this.toLowerCase()]=this}),x.fn.extend({addClass:function(t){var e,n,i,r,s,a,o,l=0;if(p(t))return this.each(function(e){x(this).addClass(t.call(this,e,fe(this)))});if((e=de(t)).length)for(;n=this[l++];)if(r=fe(n),i=1===n.nodeType&&" "+ce(r)+" "){for(a=0;s=e[a++];)i.indexOf(" "+s+" ")<0&&(i+=s+" ");r!==(o=ce(i))&&n.setAttribute("class",o)}return this},removeClass:function(t){var e,n,i,r,s,a,o,l=0;if(p(t))return this.each(function(e){x(this).removeClass(t.call(this,e,fe(this)))});if(!arguments.length)return this.attr("class","");if((e=de(t)).length)for(;n=this[l++];)if(r=fe(n),i=1===n.nodeType&&" "+ce(r)+" "){for(a=0;s=e[a++];)for(;i.indexOf(" "+s+" ")>-1;)i=i.replace(" "+s+" "," ");r!==(o=ce(i))&&n.setAttribute("class",o)}return this},toggleClass:function(t,e){var n=typeof t,i="string"===n||Array.isArray(t);return"boolean"==typeof e&&i?e?this.addClass(t):this.removeClass(t):p(t)?this.each(function(n){x(this).toggleClass(t.call(this,n,fe(this),e),e)}):this.each(function(){var e,r,s,a;if(i)for(r=0,s=x(this),a=de(t);e=a[r++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else void 0!==t&&"boolean"!==n||((e=fe(this))&&X.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":X.get(this,"__className__")||""))})},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+ce(fe(n))+" ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g;x.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=p(t),this.each(function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,x(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=x.map(r,function(t){return null==t?"":t+""})),(e=x.valHooks[this.type]||x.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=x.valHooks[r.type]||x.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(ge,""):null==n?"":n:void 0}}),x.extend({valHooks:{option:{get:function(t){var e=x.find.attr(t,"value");return null!=e?e:ce(x.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,a="select-one"===t.type,o=a?null:[],l=a?s+1:r.length;for(i=s<0?l:a?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!T(n.parentNode,"optgroup"))){if(e=x(n).val(),a)return e;o.push(e)}return o},set:function(t,e){for(var n,i,r=t.options,s=x.makeArray(e),a=r.length;a--;)((i=r[a]).selected=x.inArray(x.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),x.each(["radio","checkbox"],function(){x.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=x.inArray(x(t).val(),e)>-1}},g.checkOn||(x.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in t;var pe=/^(?:focusinfocus|focusoutblur)$/,_e=function(t){t.stopPropagation()};x.extend(x.event,{trigger:function(e,n,r,s){var a,o,l,h,u,f,d,g,v=[r||i],m=c.call(e,"type")?e.type:e,y=c.call(e,"namespace")?e.namespace.split("."):[];if(o=g=l=r=r||i,3!==r.nodeType&&8!==r.nodeType&&!pe.test(m+x.event.triggered)&&(m.indexOf(".")>-1&&(m=(y=m.split(".")).shift(),y.sort()),u=m.indexOf(":")<0&&"on"+m,(e=e[x.expando]?e:new x.Event(m,"object"==typeof e&&e)).isTrigger=s?2:3,e.namespace=y.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=r),n=null==n?[e]:x.makeArray(n,[e]),d=x.event.special[m]||{},s||!d.trigger||!1!==d.trigger.apply(r,n))){if(!s&&!d.noBubble&&!_(r)){for(pe.test((h=d.delegateType||m)+m)||(o=o.parentNode);o;o=o.parentNode)v.push(o),l=o;l===(r.ownerDocument||i)&&v.push(l.defaultView||l.parentWindow||t)}for(a=0;(o=v[a++])&&!e.isPropagationStopped();)g=o,e.type=a>1?h:d.bindType||m,(f=(X.get(o,"events")||{})[e.type]&&X.get(o,"handle"))&&f.apply(o,n),(f=u&&o[u])&&f.apply&&$(o)&&(e.result=f.apply(o,n),!1===e.result&&e.preventDefault());return e.type=m,s||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(v.pop(),n)||!$(r)||u&&p(r[m])&&!_(r)&&((l=r[u])&&(r[u]=null),x.event.triggered=m,e.isPropagationStopped()&&g.addEventListener(m,_e),r[m](),e.isPropagationStopped()&&g.removeEventListener(m,_e),x.event.triggered=void 0,l&&(r[u]=l)),e.result}},simulate:function(t,e,n){var i=x.extend(new x.Event,n,{type:t,isSimulated:!0});x.event.trigger(i,null,e)}}),x.fn.extend({trigger:function(t,e){return this.each(function(){x.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return x.event.trigger(t,e,n,!0)}}),g.focusin||x.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){x.event.simulate(e,t.target,x.event.fix(t))};x.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=X.access(i,e);r||i.addEventListener(t,n,!0),X.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=X.access(i,e)-1;r?X.access(i,e,r):(i.removeEventListener(t,n,!0),X.remove(i,e))}}});var ve=t.location,me=Date.now(),ye=/\?/;x.parseXML=function(e){var n;if(!e||"string"!=typeof e)return null;try{n=(new t.DOMParser).parseFromString(e,"text/xml")}catch(t){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||x.error("Invalid XML: "+e),n};var xe=/\[\]$/,be=/\r?\n/g,we=/^(?:submit|button|image|reset|file)$/i,Ce=/^(?:input|select|textarea|keygen)/i;function Se(t,e,n,i){var r;if(Array.isArray(e))x.each(e,function(e,r){n||xe.test(t)?i(t,r):Se(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)});else if(n||"object"!==y(e))i(t,e);else for(r in e)Se(t+"["+r+"]",e[r],n,i)}x.param=function(t,e){var n,i=[],r=function(t,e){var n=p(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(Array.isArray(t)||t.jquery&&!x.isPlainObject(t))x.each(t,function(){r(this.name,this.value)});else for(n in t)Se(n,t[n],e,r);return i.join("&")},x.fn.extend({serialize:function(){return x.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=x.prop(this,"elements");return t?x.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!x(this).is(":disabled")&&Ce.test(this.nodeName)&&!we.test(t)&&(this.checked||!ht.test(t))}).map(function(t,e){var n=x(this).val();return null==n?null:Array.isArray(n)?x.map(n,function(t){return{name:e.name,value:t.replace(be,"\r\n")}}):{name:e.name,value:n.replace(be,"\r\n")}}).get()}});var ke=/%20/g,Ae=/#.*$/,Te=/([?&])_=[^&]*/,Ee=/^(.*?):[ \t]*([^\r\n]*)$/gm,Me=/^(?:GET|HEAD)$/,Pe=/^\/\//,Oe={},Re={},Ie="*/".concat("*"),Le=i.createElement("a");function Fe(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(F)||[];if(p(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ne(t,e,n,i){var r={},s=t===Re;function a(o){var l;return r[o]=!0,x.each(t[o]||[],function(t,o){var h=o(e,n,i);return"string"!=typeof h||s||r[h]?s?!(l=h):void 0:(e.dataTypes.unshift(h),a(h),!1)}),l}return a(e.dataTypes[0])||!r["*"]&&a("*")}function je(t,e){var n,i,r=x.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&x.extend(!0,t,i),t}Le.href=ve.href,x.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ve.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(ve.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ie,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":x.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,x.ajaxSettings),e):je(x.ajaxSettings,t)},ajaxPrefilter:Fe(Oe),ajaxTransport:Fe(Re),ajax:function(e,n){"object"==typeof e&&(n=e,e=void 0);var r,s,a,o,l,h,u,c,f,d,g=x.ajaxSetup({},n=n||{}),p=g.context||g,_=g.context&&(p.nodeType||p.jquery)?x(p):x.event,v=x.Deferred(),m=x.Callbacks("once memory"),y=g.statusCode||{},b={},w={},C="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(u){if(!o)for(o={};e=Ee.exec(a);)o[e[1].toLowerCase()]=e[2];e=o[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?a:null},setRequestHeader:function(t,e){return null==u&&(t=w[t.toLowerCase()]=w[t.toLowerCase()]||t,b[t]=e),this},overrideMimeType:function(t){return null==u&&(g.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)S.always(t[S.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||C;return r&&r.abort(e),k(0,e),this}};if(v.promise(S),g.url=((e||g.url||ve.href)+"").replace(Pe,ve.protocol+"//"),g.type=n.method||n.type||g.method||g.type,g.dataTypes=(g.dataType||"*").toLowerCase().match(F)||[""],null==g.crossDomain){h=i.createElement("a");try{h.href=g.url,h.href=h.href,g.crossDomain=Le.protocol+"//"+Le.host!=h.protocol+"//"+h.host}catch(t){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=x.param(g.data,g.traditional)),Ne(Oe,g,n,S),u)return S;for(f in(c=x.event&&g.global)&&0==x.active++&&x.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Me.test(g.type),s=g.url.replace(Ae,""),g.hasContent?g.data&&g.processData&&0===(g.contentType||"").indexOf("application/x-www-form-urlencoded")&&(g.data=g.data.replace(ke,"+")):(d=g.url.slice(s.length),g.data&&(g.processData||"string"==typeof g.data)&&(s+=(ye.test(s)?"&":"?")+g.data,delete g.data),!1===g.cache&&(s=s.replace(Te,"$1"),d=(ye.test(s)?"&":"?")+"_="+me+++d),g.url=s+d),g.ifModified&&(x.lastModified[s]&&S.setRequestHeader("If-Modified-Since",x.lastModified[s]),x.etag[s]&&S.setRequestHeader("If-None-Match",x.etag[s])),(g.data&&g.hasContent&&!1!==g.contentType||n.contentType)&&S.setRequestHeader("Content-Type",g.contentType),S.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Ie+"; q=0.01":""):g.accepts["*"]),g.headers)S.setRequestHeader(f,g.headers[f]);if(g.beforeSend&&(!1===g.beforeSend.call(p,S,g)||u))return S.abort();if(C="abort",m.add(g.complete),S.done(g.success),S.fail(g.error),r=Ne(Re,g,n,S)){if(S.readyState=1,c&&_.trigger("ajaxSend",[S,g]),u)return S;g.async&&g.timeout>0&&(l=t.setTimeout(function(){S.abort("timeout")},g.timeout));try{u=!1,r.send(b,k)}catch(t){if(u)throw t;k(-1,t)}}else k(-1,"No Transport");function k(e,n,i,o){var h,f,d,b,w,C=n;u||(u=!0,l&&t.clearTimeout(l),r=void 0,a=o||"",S.readyState=e>0?4:0,h=e>=200&&e<300||304===e,i&&(b=function(t,e,n){for(var i,r,s,a,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in o)if(o[r]&&o[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}a||(a=r)}s=s||a}if(s)return s!==l[0]&&l.unshift(s),n[s]}(g,S,i)),b=function(t,e,n,i){var r,s,a,o,l,h={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)h[a.toLowerCase()]=t.converters[a];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(a=h[l+" "+s]||h["* "+s]))for(r in h)if((o=r.split(" "))[1]===s&&(a=h[l+" "+o[0]]||h["* "+o[0]])){!0===a?a=h[r]:!0!==h[r]&&(s=o[0],u.unshift(o[1]));break}if(!0!==a)if(a&&t.throws)e=a(e);else try{e=a(e)}catch(t){return{state:"parsererror",error:a?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(g,b,S,h),h?(g.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(x.lastModified[s]=w),(w=S.getResponseHeader("etag"))&&(x.etag[s]=w)),204===e||"HEAD"===g.type?C="nocontent":304===e?C="notmodified":(C=b.state,f=b.data,h=!(d=b.error))):(d=C,!e&&C||(C="error",e<0&&(e=0))),S.status=e,S.statusText=(n||C)+"",h?v.resolveWith(p,[f,C,S]):v.rejectWith(p,[S,C,d]),S.statusCode(y),y=void 0,c&&_.trigger(h?"ajaxSuccess":"ajaxError",[S,g,h?f:d]),m.fireWith(p,[S,C]),c&&(_.trigger("ajaxComplete",[S,g]),--x.active||x.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,n){return x.get(t,e,n,"json")},getScript:function(t,e){return x.get(t,void 0,e,"script")}}),x.each(["get","post"],function(t,e){x[e]=function(t,n,i,r){return p(n)&&(r=r||i,i=n,n=void 0),x.ajax(x.extend({url:t,type:e,dataType:r,data:n,success:i},x.isPlainObject(t)&&t))}}),x._evalUrl=function(t){return x.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},x.fn.extend({wrapAll:function(t){var e;return this[0]&&(p(t)&&(t=t.call(this[0])),e=x(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return p(t)?this.each(function(e){x(this).wrapInner(t.call(this,e))}):this.each(function(){var e=x(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=p(t);return this.each(function(n){x(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){x(this).replaceWith(this.childNodes)}),this}}),x.expr.pseudos.hidden=function(t){return!x.expr.pseudos.visible(t)},x.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},x.ajaxSettings.xhr=function(){try{return new t.XMLHttpRequest}catch(t){}};var ze={0:200,1223:204},De=x.ajaxSettings.xhr();g.cors=!!De&&"withCredentials"in De,g.ajax=De=!!De,x.ajaxTransport(function(e){var n,i;if(g.cors||De&&!e.crossDomain)return{send:function(r,s){var a,o=e.xhr();if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)o[a]=e.xhrFields[a];for(a in e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)o.setRequestHeader(a,r[a]);n=function(t){return function(){n&&(n=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===t?o.abort():"error"===t?"number"!=typeof o.status?s(0,"error"):s(o.status,o.statusText):s(ze[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}},o.onload=n(),i=o.onerror=o.ontimeout=n("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&t.setTimeout(function(){n&&i()})},n=n("abort");try{o.send(e.hasContent&&e.data||null)}catch(t){if(n)throw t}},abort:function(){n&&n()}}}),x.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),x.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return x.globalEval(t),t}}}),x.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),x.ajaxTransport("script",function(t){var e,n;if(t.crossDomain)return{send:function(r,s){e=x("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&s("error"===t.type?404:200,t.type)}),i.head.appendChild(e[0])},abort:function(){n&&n()}}});var Be=[],qe=/(=)\?(?=&|$)|\?\?/;x.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Be.pop()||x.expando+"_"+me++;return this[t]=!0,t}}),x.ajaxPrefilter("json jsonp",function(e,n,i){var r,s,a,o=!1!==e.jsonp&&(qe.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&qe.test(e.data)&&"data");if(o||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=p(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace(qe,"$1"+r):!1!==e.jsonp&&(e.url+=(ye.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||x.error(r+" was not called"),a[0]},e.dataTypes[0]="json",s=t[r],t[r]=function(){a=arguments},i.always(function(){void 0===s?x(t).removeProp(r):t[r]=s,e[r]&&(e.jsonpCallback=n.jsonpCallback,Be.push(r)),a&&p(s)&&s(a[0]),a=s=void 0}),"script"}),g.createHTMLDocument=function(){var t=i.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),x.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(g.createHTMLDocument?((r=(e=i.implementation.createHTMLDocument("")).createElement("base")).href=i.location.href,e.head.appendChild(r)):e=i),a=!n&&[],(s=E.exec(t))?[e.createElement(s[1])]:(s=_t([t],e,a),a&&a.length&&x(a).remove(),x.merge([],s.childNodes)));var r,s,a},x.fn.load=function(t,e,n){var i,r,s,a=this,o=t.indexOf(" ");return o>-1&&(i=ce(t.slice(o)),t=t.slice(0,o)),p(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&x.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done(function(t){s=arguments,a.html(i?x("<div>").append(x.parseHTML(t)).find(i):t)}).always(n&&function(t,e){a.each(function(){n.apply(this,s||[t.responseText,e,t])})}),this},x.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){x.fn[e]=function(t){return this.on(e,t)}}),x.expr.pseudos.animated=function(t){return x.grep(x.timers,function(e){return t===e.elem}).length},x.offset={setOffset:function(t,e,n){var i,r,s,a,o,l,h=x.css(t,"position"),u=x(t),c={};"static"===h&&(t.style.position="relative"),o=u.offset(),s=x.css(t,"top"),l=x.css(t,"left"),("absolute"===h||"fixed"===h)&&(s+l).indexOf("auto")>-1?(a=(i=u.position()).top,r=i.left):(a=parseFloat(s)||0,r=parseFloat(l)||0),p(e)&&(e=e.call(t,n,x.extend({},o))),null!=e.top&&(c.top=e.top-o.top+a),null!=e.left&&(c.left=e.left-o.left+r),"using"in e?e.using.call(t,c):u.css(c)}},x.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){x.offset.setOffset(this,t,e)});var e,n,i=this[0];return i?i.getClientRects().length?{top:(e=i.getBoundingClientRect()).top+(n=i.ownerDocument.defaultView).pageYOffset,left:e.left+n.pageXOffset}:{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===x.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===x.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=x(t).offset()).top+=x.css(t,"borderTopWidth",!0),r.left+=x.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-x.css(i,"marginTop",!0),left:e.left-r.left-x.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===x.css(t,"position");)t=t.offsetParent;return t||vt})}}),x.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n="pageYOffset"===e;x.fn[t]=function(i){return U(this,function(t,i,r){var s;if(_(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r},t,i,arguments.length)}}),x.each(["top","left"],function(t,e){x.cssHooks[e]=Bt(g.pixelPosition,function(t,n){if(n)return n=Dt(t,e),Nt.test(n)?x(t).position()[e]+"px":n})}),x.each({Height:"height",Width:"width"},function(t,e){x.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){x.fn[i]=function(r,s){var a=arguments.length&&(n||"boolean"!=typeof r),o=n||(!0===r||!0===s?"margin":"border");return U(this,function(e,n,r){var s;return _(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?x.css(e,n,o):x.style(e,n,r,o)},e,a?r:void 0,a)}})}),x.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){x.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),x.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),x.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),x.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),p(t))return i=s.call(arguments,2),(r=function(){return t.apply(e||this,i.concat(s.call(arguments)))}).guid=t.guid=t.guid||x.guid++,r},x.holdReady=function(t){t?x.readyWait++:x.ready(!0)},x.isArray=Array.isArray,x.parseJSON=JSON.parse,x.nodeName=T,x.isFunction=p,x.isWindow=_,x.camelCase=W,x.type=y,x.now=Date.now,x.isNumeric=function(t){var e=x.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},"function"==typeof define&&define.amd&&define("jquery",[],function(){return x});var Ue=t.jQuery,Ve=t.$;return x.noConflict=function(e){return t.$===x&&(t.$=Ve),e&&t.jQuery===x&&(t.jQuery=Ue),x},e||(t.jQuery=t.$=x),x});var paper=(function(t,e){var n=(t=t||require("./node/self.js")).window,i=t.document,r=new function(){function t(t,e,r,s,a){function h(i,h){"string"==typeof(h=h||(h=o(e,i))&&(h.get?h:h.value))&&"#"===h[0]&&(h=t[h.substring(1)]||h);var c,f="function"==typeof h,d=h,g=a||f&&!h.base?h&&h.get?i in t:t[i]:null;a&&g||(f&&g&&(h.base=g),f&&!1!==s&&(c=i.match(/^([gs]et|is)(([A-Z])(.*))$/))&&(u[c[3].toLowerCase()+c[4]]=c[2]),d&&!f&&d.get&&"function"==typeof d.get&&n.isPlainObject(d)||(d={value:d,writable:!0}),(o(t,i)||{configurable:!0}).configurable&&(d.configurable=!0,d.enumerable=null!=r?r:!c),l(t,i,d))}var u={};if(e){for(var c in e)e.hasOwnProperty(c)&&!i.test(c)&&h(c);for(var c in u){var f=u[c],d=t["set"+f],g=t["get"+f]||d&&t["is"+f];!g||!0!==s&&0!==g.length||h(c,{get:g,set:d})}}return t}function n(){for(var t=0,e=arguments.length;t<e;t++){var n=arguments[t];n&&u(this,n)}return this}var i=/^(statics|enumerable|beans|preserve)$/,r=[],s=r.slice,a=Object.create,o=Object.getOwnPropertyDescriptor,l=Object.defineProperty,h=r.forEach||function(t,e){for(var n=0,i=this.length;n<i;n++)t.call(e,this[n],n,this)},u=Object.assign||function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e];for(var r in i)i.hasOwnProperty(r)&&(t[r]=i[r])}return t},c=function(t,e,n){if(t){var i=o(t,"length");(i&&"number"==typeof i.value?h:function(t,e){for(var n in this)this.hasOwnProperty(n)&&t.call(e,this[n],n,this)}).call(t,e,n=n||t)}return n};return t(n,{inject:function(e){if(e){var n=!0===e.statics?e:e.statics,i=e.beans,r=e.preserve;n!==e&&t(this.prototype,e,e.enumerable,i,r),t(this,n,null,i,r)}for(var s=1,a=arguments.length;s<a;s++)this.inject(arguments[s]);return this},extend:function(){for(var e,n,i,r=this,s=0,o=arguments.length;s<o&&(!e||!n);s++)i=arguments[s],e=e||i.initialize,n=n||i.prototype;return n=(e=e||function(){r.apply(this,arguments)}).prototype=n||a(this.prototype),l(n,"constructor",{value:e,writable:!0,configurable:!0}),t(e,this),arguments.length&&this.inject.apply(e,arguments),e.base=r,e}}).inject({enumerable:!1,initialize:n,set:n,inject:function(){for(var e=0,n=arguments.length;e<n;e++){var i=arguments[e];i&&t(this,i,i.enumerable,i.beans,i.preserve)}return this},extend:function(){var t=a(this);return t.inject.apply(t,arguments)},each:function(t,e){return c(this,t,e)},clone:function(){return new this.constructor(this)},statics:{set:u,each:c,create:a,define:l,describe:o,clone:function(t){return u(new t.constructor,t)},isPlainObject:function(t){var e=null!=t&&t.constructor;return e&&(e===Object||e===n||"Object"===e.name)},pick:function(t,n){return t!==e?t:n},slice:function(t,e,n){return s.call(t,e,n)}}})};"undefined"!=typeof module&&(module.exports=r),r.inject({enumerable:!1,toString:function(){return null!=this._id?(this._class||"Object")+(this._name?" '"+this._name+"'":" @"+this._id):"{ "+r.each(this,function(t,e){if(!/^_/.test(e)){var n=typeof t;this.push(e+": "+("number"===n?l.instance.number(t):"string"===n?"'"+t+"'":t))}},[]).join(", ")+" }"},getClassName:function(){return this._class||""},importJSON:function(t){return r.importJSON(t,this)},exportJSON:function(t){return r.exportJSON(this,t)},toJSON:function(){return r.serialize(this)},set:function(t,e){return t&&r.filter(this,t,e,this._prioritize),this}},{beans:!1,statics:{exports:{},extend:function t(){var e=t.base.apply(this,arguments),n=e.prototype._class;return n&&!r.exports[n]&&(r.exports[n]=e),e},equals:function(t,e){if(t===e)return!0;if(t&&t.equals)return t.equals(e);if(e&&e.equals)return e.equals(t);if(t&&e&&"object"==typeof t&&"object"==typeof e){if(Array.isArray(t)&&Array.isArray(e)){if((n=t.length)!==e.length)return!1;for(;n--;)if(!r.equals(t[n],e[n]))return!1}else{var n,i=Object.keys(t);if((n=i.length)!==Object.keys(e).length)return!1;for(;n--;){var s=i[n];if(!e.hasOwnProperty(s)||!r.equals(t[s],e[s]))return!1}}return!0}return!1},read:function(t,n,i,s){if(this===r){var a=this.peek(t,n);return t.__index++,a}var o=this.prototype,l=o._readIndex,h=n||l&&t.__index||0,u=t.length,c=t[h];if(s=s||u-h,c instanceof this||i&&i.readNull&&null==c&&s<=1)return l&&(t.__index=h+1),c&&i&&i.clone?c.clone():c;if(c=r.create(o),l&&(c.__read=!0),c=c.initialize.apply(c,h>0||h+s<u?r.slice(t,h,h+s):t)||c,l){t.__index=h+c.__read;var f=c.__filtered;f&&(t.__filtered=f,c.__filtered=e),c.__read=e}return c},peek:function(t,e){return t[t.__index=e||t.__index||0]},remain:function(t){return t.length-(t.__index||0)},readList:function(t,e,n,i){for(var r,s=[],a=e||0,o=i?a+i:t.length,l=a;l<o;l++)s.push(Array.isArray(r=t[l])?this.read(r,0,n):this.read(t,l,n,1));return s},readNamed:function(t,n,i,s,a){var o=this.getNamed(t,n),l=o!==e;if(l){var h=t.__filtered;h||((h=t.__filtered=r.create(t[0])).__unfiltered=t[0]),h[n]=e}return this.read(l?[o]:t,i,s,a)},getNamed:function(t,n){var i=t[0];if(t._hasObject===e&&(t._hasObject=1===t.length&&r.isPlainObject(i)),t._hasObject)return n?i[n]:t.__filtered||i},hasNamed:function(t,e){return!!this.getNamed(t,e)},filter:function(t,n,i,r){function s(r){if(!(i&&r in i||a&&r in a)){var s=n[r];s!==e&&(t[r]=s)}}var a;if(r){for(var o,l={},h=0,u=r.length;h<u;h++)(o=r[h])in n&&(s(o),l[o]=!0);a=l}return Object.keys(n.__unfiltered||n).forEach(s),t},isPlainValue:function(t,e){return r.isPlainObject(t)||Array.isArray(t)||e&&"string"==typeof t},serialize:function(t,e,n,i){e=e||{};var s,a=!i;if(a&&(e.formatter=new l(e.precision),i={length:0,definitions:{},references:{},add:function(t,e){var n="#"+t._id,i=this.references[n];if(!i){this.length++;var r=e.call(t),s=t._class;s&&r[0]!==s&&r.unshift(s),this.definitions[n]=r,i=this.references[n]=[n]}return i}}),t&&t._serialize){s=t._serialize(e,i);var o=t._class;!o||t._compactSerialize||!a&&n||s[0]===o||s.unshift(o)}else if(Array.isArray(t)){s=[];for(var h=0,u=t.length;h<u;h++)s[h]=r.serialize(t[h],e,n,i)}else if(r.isPlainObject(t)){s={};var c=Object.keys(t);for(h=0,u=c.length;h<u;h++){var f=c[h];s[f]=r.serialize(t[f],e,n,i)}}else s="number"==typeof t?e.formatter.number(t,e.precision):t;return a&&i.length>0?[["dictionary",i.definitions],s]:s},deserialize:function(t,e,n,i,s){var a=t,o=!n,l=o&&t&&t.length&&"dictionary"===t[0][0];if(n=n||{},Array.isArray(t)){var h=t[0],u="dictionary"===h;if(1==t.length&&/^#/.test(h))return n.dictionary[h];a=[];for(var c=(h=r.exports[h])?1:0,f=t.length;c<f;c++)a.push(r.deserialize(t[c],e,n,u,l));if(h){var d=a;a=e?e(h,d,o||s):new h(d)}}else if(r.isPlainObject(t))for(var g in a={},i&&(n.dictionary=a),t)a[g]=r.deserialize(t[g],e,n);return l?a[1]:a},exportJSON:function(t,e){var n=r.serialize(t,e);return e&&0==e.asString?n:JSON.stringify(n)},importJSON:function(t,e){return r.deserialize("string"==typeof t?JSON.parse(t):t,function(t,n,i){var s=i&&e&&e.constructor===t,a=s?e:r.create(t.prototype);if(1===n.length&&a instanceof x&&(s||!(a instanceof w))){var o=n[0];r.isPlainObject(o)&&(o.insert=!1)}return(s?a.set:t).apply(a,n),s&&(e=null),a})},push:function(t,e){var n=e.length;if(n<4096)t.push.apply(t,e);else{var i=t.length;t.length+=n;for(var r=0;r<n;r++)t[i+r]=e[r]}return t},splice:function(t,n,i,s){var a=n&&n.length,o=i===e;(i=o?t.length:i)>t.length&&(i=t.length);for(var l=0;l<a;l++)n[l]._index=i+l;if(o)return r.push(t,n),[];var h=[i,s];n&&r.push(h,n);for(var u=t.splice.apply(t,h),c=(l=0,u.length);l<c;l++)u[l]._index=e;for(l=i+a,c=t.length;l<c;l++)t[l]._index=l;return u},capitalize:function(t){return t.replace(/\b[a-z]/g,function(t){return t.toUpperCase()})},camelize:function(t){return t.replace(/-(.)/g,function(t,e){return e.toUpperCase()})},hyphenate:function(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}}});var s={on:function(t,e){if("string"!=typeof t)r.each(t,function(t,e){this.on(e,t)},this);else{var n=this._eventTypes,i=n&&n[t],s=this._callbacks=this._callbacks||{};-1===(s=s[t]=s[t]||[]).indexOf(e)&&(s.push(e),i&&i.install&&1===s.length&&i.install.call(this,t))}return this},off:function(t,e){if("string"==typeof t){var n,i=this._eventTypes,s=i&&i[t],a=this._callbacks&&this._callbacks[t];return a&&(!e||-1!==(n=a.indexOf(e))&&1===a.length?(s&&s.uninstall&&s.uninstall.call(this,t),delete this._callbacks[t]):-1!==n&&a.splice(n,1)),this}r.each(t,function(t,e){this.off(e,t)},this)},once:function(t,e){return this.on(t,function n(){e.apply(this,arguments),this.off(t,n)})},emit:function(t,e){var n=this._callbacks&&this._callbacks[t];if(!n)return!1;var i=r.slice(arguments,1),s=e&&e.target&&!e.currentTarget;n=n.slice(),s&&(e.currentTarget=this);for(var a=0,o=n.length;a<o;a++)if(0==n[a].apply(this,i)){e&&e.stop&&e.stop();break}return s&&delete e.currentTarget,!0},responds:function(t){return!(!this._callbacks||!this._callbacks[t])},attach:"#on",detach:"#off",fire:"#emit",_installEvents:function(t){var e=this._eventTypes,n=this._callbacks,i=t?"install":"uninstall";if(e)for(var r in n)if(n[r].length>0){var s=e[r],a=s&&s[i];a&&a.call(this,r)}},statics:{inject:function t(e){var n=e._events;if(n){var i={};r.each(n,function(t,n){var s="string"==typeof t,a=s?t:n,o=r.capitalize(a),l=a.substring(2).toLowerCase();i[l]=s?{}:t,a="_"+a,e["get"+o]=function(){return this[a]},e["set"+o]=function(t){var e=this[a];e&&this.off(l,e),t&&this.on(l,t),this[a]=t}}),e._eventTypes=i}return t.base.apply(this,arguments)}}},a=r.extend({_class:"PaperScope",initialize:function e(){st=this,this.settings=new r({applyMatrix:!0,insertItems:!0,handleSize:4,hitTolerance:0}),this.project=null,this.projects=[],this.tools=[],this._id=e._id++,e._scopes[this._id]=this;var n=e.prototype;if(!this.support){var i=et.getContext(1,1)||{};n.support={nativeDash:"setLineDash"in i||"mozDash"in i,nativeBlendModes:nt.nativeModes},et.release(i)}if(!this.agent){var s=t.navigator.userAgent.toLowerCase(),a=(/(darwin|win|mac|linux|freebsd|sunos)/.exec(s)||[])[0],o="darwin"===a?"mac":a,l=n.agent=n.browser={platform:o};o&&(l[o]=!0),s.replace(/(opera|chrome|safari|webkit|firefox|msie|trident|atom|node)\/?\s*([.\d]+)(?:.*version\/([.\d]+))?(?:.*rv\:v?([.\d]+))?/g,function(t,e,n,i,r){if(!l.chrome){var s="opera"===e?i:/^(node|trident)$/.test(e)?r:n;l.version=s,l.versionNumber=parseFloat(s),l.name=e="trident"===e?"msie":e,l[e]=!0}}),l.chrome&&delete l.webkit,l.atom&&delete l.chrome}},version:"0.12.0",getView:function(){var t=this.project;return t&&t._view},getPaper:function(){return this},execute:function(t,e){var n=st.PaperScript.execute(t,this,e);return G.updateFocus(),n},install:function(t){var e=this;for(var n in r.each(["project","view","tool"],function(n){r.define(t,n,{configurable:!0,get:function(){return e[n]}})}),this)!/^_/.test(n)&&this[n]&&(t[n]=this[n])},setup:function(t){return st=this,this.project=new y(t),this},createCanvas:function(t,e){return et.getCanvas(t,e)},activate:function(){st=this},clear:function(){for(var t=this.projects,e=this.tools,n=t.length-1;n>=0;n--)t[n].remove();for(n=e.length-1;n>=0;n--)e[n].remove()},remove:function(){this.clear(),delete a._scopes[this._id]},statics:new function(){function t(t){return t+="Attribute",function(e,n){return e[t](n)||e[t]("data-paper-"+n)}}return{_scopes:{},_id:0,get:function(t){return this._scopes[t]||null},getAttribute:t("get"),hasAttribute:t("has")}}}),o=r.extend(s,{initialize:function(t){this._scope=st,this._index=this._scope[this._list].push(this)-1,!t&&this._scope[this._reference]||this.activate()},activate:function(){if(!this._scope)return!1;var t=this._scope[this._reference];return t&&t!==this&&t.emit("deactivate"),this._scope[this._reference]=this,this.emit("activate",t),!0},isActive:function(){return this._scope[this._reference]===this},remove:function(){return null!=this._index&&(r.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)},getView:function(){return this._scope.getView()}}),l=r.extend({initialize:function(t){this.precision=r.pick(t,5),this.multiplier=Math.pow(10,this.precision)},number:function(t){return this.precision<16?Math.round(t*this.multiplier)/this.multiplier:t},pair:function(t,e,n){return this.number(t)+(n||",")+this.number(e)},point:function(t,e){return this.number(t.x)+(e||",")+this.number(t.y)},size:function(t,e){return this.number(t.width)+(e||",")+this.number(t.height)},rectangle:function(t,e){return this.point(t,e)+(e||",")+this.size(t,e)}});l.instance=new l;var h=new function(){function t(t,e,n){return t<e?e:t>n?n:t}function e(t,e,n){function i(t){var e=134217729*t,n=t-e+e;return[n,t-n]}var r=e*e-t*n,a=e*e+t*n;if(3*s(r)<a){var o=i(t),l=i(e),h=i(n),u=e*e,c=t*n;r=u-c+(l[0]*l[0]-u+2*l[0]*l[1]+l[1]*l[1]-(o[0]*h[0]-c+o[0]*h[1]+o[1]*h[0]+o[1]*h[1]))}return r}function n(){var t=Math.max.apply(Math,arguments);return t&&(t<1e-8||t>1e8)?o(2,-Math.round(l(t))):0}var i=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],r=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],s=Math.abs,a=Math.sqrt,o=Math.pow,l=Math.log2||function(t){return Math.log(t)*Math.LOG2E},u=1e-12,c=1.12e-16;return{EPSILON:u,MACHINE_EPSILON:c,CURVETIME_EPSILON:1e-8,GEOMETRIC_EPSILON:1e-7,TRIGONOMETRIC_EPSILON:1e-8,KAPPA:4*(a(2)-1)/3,isZero:function(t){return t>=-u&&t<=u},clamp:t,integrate:function(t,e,n,s){for(var a=i[s-2],o=r[s-2],l=.5*(n-e),h=l+e,u=0,c=s+1>>1,f=1&s?o[u++]*t(h):0;u<c;){var d=l*a[u];f+=o[u++]*(t(h+d)+t(h-d))}return l*f},findRoot:function(e,n,i,r,a,o,l){for(var h=0;h<o;h++){var u=e(i),c=u/n(i),f=i-c;if(s(c)<l){i=f;break}u>0?(a=i,i=f<=r?.5*(r+a):f):(r=i,i=f>=a?.5*(r+a):f)}return t(i,r,a)},solveQuadratic:function(i,r,o,l,h,f){var d,g=1/0;if(s(i)<u){if(s(r)<u)return s(o)<u?-1:0;d=-o/r}else{var p=e(i,r*=-.5,o);if(p&&s(p)<c){var _=n(s(i),s(r),s(o));_&&(p=e(i*=_,r*=_,o*=_))}if(p>=-c){var v=p<0?0:a(p),m=r+(r<0?-v:v);0===m?g=-(d=o/i):(d=m/i,g=o/m)}}var y=0,x=null==h,b=h-u,w=f+u;return isFinite(d)&&(x||d>b&&d<w)&&(l[y++]=x?d:t(d,h,f)),g!==d&&isFinite(g)&&(x||g>b&&g<w)&&(l[y++]=x?g:t(g,h,f)),y},solveCubic:function(e,i,r,l,f,d,g){function p(t){var n=e*(_=t);y=(n+(v=n+i))*_+(m=v*_+r),x=m*_+l}var _,v,m,y,x,b=n(s(e),s(i),s(r),s(l));if(b&&(e*=b,i*=b,r*=b,l*=b),s(e)<u)e=i,v=r,m=l,_=1/0;else if(s(l)<u)v=i,m=r,_=0;else{p(-i/e/3);var w=x/e,C=o(s(w),1/3),S=w<0?-1:1,k=-y/e,A=k>0?1.324717957244746*Math.max(C,a(k)):C,T=_-S*A;if(T!==_){do{p(T),T=0===y?_:_-x/y/(1+c)}while(S*T>S*_);s(e)*_*_>s(l/_)&&(v=((m=-l/_)-r)/_)}}var E=h.solveQuadratic(e,v,m,f,d,g),M=null==d;return isFinite(_)&&(0===E||E>0&&_!==f[0]&&_!==f[1])&&(M||_>d-u&&_<g+u)&&(f[E++]=M?_:t(_,d,g)),E}}},u={_id:1,_pools:{},get:function(t){if(t){var e=this._pools[t];return e||(e=this._pools[t]={_id:1}),e._id++}return this._id++}},c=r.extend({_class:"Point",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var a="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"x"in a?this._set(a.x||0,a.y||0):"width"in a?this._set(a.width||0,a.height||0):"angle"in a?(this._set(a.length||0,0),this.setAngle(a.angle||0)):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.x=t,this.y=e,this},equals:function(t){return this===t||t&&(this.x===t.x&&this.y===t.y||Array.isArray(t)&&this.x===t[0]&&this.y===t[1])||!1},clone:function(){return new c(this.x,this.y)},toString:function(){var t=l.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y)]},getLength:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},setLength:function(t){if(this.isZero()){var e=this._angle||0;this._set(Math.cos(e)*t,Math.sin(e)*t)}else{var n=t/this.getLength();h.isZero(n)&&this.getAngle(),this._set(this.x*n,this.y*n)}},getAngle:function(){return 180*this.getAngleInRadians.apply(this,arguments)/Math.PI},setAngle:function(t){this.setAngleInRadians.call(this,t*Math.PI/180)},getAngleInDegrees:"#getAngle",setAngleInDegrees:"#setAngle",getAngleInRadians:function(){if(arguments.length){var t=c.read(arguments),e=this.getLength()*t.getLength();if(h.isZero(e))return NaN;var n=this.dot(t)/e;return Math.acos(n<-1?-1:n>1?1:n)}return this.isZero()?this._angle||0:this._angle=Math.atan2(this.y,this.x)},setAngleInRadians:function(t){if(this._angle=t,!this.isZero()){var e=this.getLength();this._set(Math.cos(t)*e,Math.sin(t)*e)}},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3}},{beans:!1,getDirectedAngle:function(){var t=c.read(arguments);return 180*Math.atan2(this.cross(t),this.dot(t))/Math.PI},getDistance:function(){var t=c.read(arguments),e=t.x-this.x,n=t.y-this.y,i=e*e+n*n;return r.read(arguments)?i:Math.sqrt(i)},normalize:function(t){t===e&&(t=1);var n=this.getLength(),i=0!==n?t/n:0,r=new c(this.x*i,this.y*i);return i>=0&&(r._angle=this._angle),r},rotate:function(t,e){if(0===t)return this.clone();t=t*Math.PI/180;var n=e?this.subtract(e):this,i=Math.sin(t),r=Math.cos(t);return n=new c(n.x*r-n.y*i,n.x*i+n.y*r),e?n.add(e):n},transform:function(t){return t?t._transformPoint(this):this},add:function(){var t=c.read(arguments);return new c(this.x+t.x,this.y+t.y)},subtract:function(){var t=c.read(arguments);return new c(this.x-t.x,this.y-t.y)},multiply:function(){var t=c.read(arguments);return new c(this.x*t.x,this.y*t.y)},divide:function(){var t=c.read(arguments);return new c(this.x/t.x,this.y/t.y)},modulo:function(){var t=c.read(arguments);return new c(this.x%t.x,this.y%t.y)},negate:function(){return new c(-this.x,-this.y)},isInside:function(){return p.read(arguments).contains(this)},isClose:function(){var t=c.read(arguments),e=r.read(arguments);return this.getDistance(t)<=e},isCollinear:function(){var t=c.read(arguments);return c.isCollinear(this.x,this.y,t.x,t.y)},isColinear:"#isCollinear",isOrthogonal:function(){var t=c.read(arguments);return c.isOrthogonal(this.x,this.y,t.x,t.y)},isZero:function(){var t=h.isZero;return t(this.x)&&t(this.y)},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},isInQuadrant:function(t){return this.x*(t>1&&t<4?-1:1)>=0&&this.y*(t>2?-1:1)>=0},dot:function(){var t=c.read(arguments);return this.x*t.x+this.y*t.y},cross:function(){var t=c.read(arguments);return this.x*t.y-this.y*t.x},project:function(){var t=c.read(arguments),e=t.isZero()?0:this.dot(t)/t.dot(t);return new c(t.x*e,t.y*e)},statics:{min:function(){var t=c.read(arguments),e=c.read(arguments);return new c(Math.min(t.x,e.x),Math.min(t.y,e.y))},max:function(){var t=c.read(arguments),e=c.read(arguments);return new c(Math.max(t.x,e.x),Math.max(t.y,e.y))},random:function(){return new c(Math.random(),Math.random())},isCollinear:function(t,e,n,i){return Math.abs(t*i-e*n)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))},isOrthogonal:function(t,e,n,i){return Math.abs(t*n+e*i)<=1e-8*Math.sqrt((t*t+e*e)*(n*n+i*i))}}},r.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new c(e(this.x),e(this.y))}},{})),f=c.extend({initialize:function(t,e,n,i){this._x=t,this._y=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._x=t,this._y=e,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner[this._setter](this)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){return"setPosition"===this._setter?4:0}}),d=r.extend({_class:"Size",_readIndex:!0,initialize:function(t,e){var n=typeof t,i=this.__read,r=0;if("number"===n){var s="number"==typeof e;this._set(t,s?e:t),i&&(r=s?2:1)}else if("undefined"===n||null===t)this._set(0,0),i&&(r=null===t?1:0);else{var a="string"===n?t.split(/[\s,]+/)||[]:t;r=1,Array.isArray(a)?this._set(+a[0],+(a.length>1?a[1]:a[0])):"width"in a?this._set(a.width||0,a.height||0):"x"in a?this._set(a.x||0,a.y||0):(this._set(0,0),r=0)}return i&&(this.__read=r),this},set:"#initialize",_set:function(t,e){return this.width=t,this.height=e,this},equals:function(t){return t===this||t&&(this.width===t.width&&this.height===t.height||Array.isArray(t)&&this.width===t[0]&&this.height===t[1])||!1},clone:function(){return new d(this.width,this.height)},toString:function(){var t=l.instance;return"{ width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.width),e.number(this.height)]},add:function(){var t=d.read(arguments);return new d(this.width+t.width,this.height+t.height)},subtract:function(){var t=d.read(arguments);return new d(this.width-t.width,this.height-t.height)},multiply:function(){var t=d.read(arguments);return new d(this.width*t.width,this.height*t.height)},divide:function(){var t=d.read(arguments);return new d(this.width/t.width,this.height/t.height)},modulo:function(){var t=d.read(arguments);return new d(this.width%t.width,this.height%t.height)},negate:function(){return new d(-this.width,-this.height)},isZero:function(){var t=h.isZero;return t(this.width)&&t(this.height)},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{min:function(t,e){return new d(Math.min(t.width,e.width),Math.min(t.height,e.height))},max:function(t,e){return new d(Math.max(t.width,e.width),Math.max(t.height,e.height))},random:function(){return new d(Math.random(),Math.random())}}},r.each(["round","ceil","floor","abs"],function(t){var e=Math[t];this[t]=function(){return new d(e(this.width),e(this.height))}},{})),g=d.extend({initialize:function(t,e,n,i){this._width=t,this._height=e,this._owner=n,this._setter=i},_set:function(t,e,n){return this._width=t,this._height=e,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(t){this._width=t,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(t){this._height=t,this._owner[this._setter](this)}}),p=r.extend({_class:"Rectangle",_readIndex:!0,beans:!0,initialize:function(t,n,i,s){var a,o=typeof t;if("number"===o?(this._set(t,n,i,s),a=4):"undefined"===o||null===t?(this._set(0,0,0,0),a=null===t?1:0):1===arguments.length&&(Array.isArray(t)?(this._set.apply(this,t),a=1):t.x!==e||t.width!==e?(this._set(t.x||0,t.y||0,t.width||0,t.height||0),a=1):t.from===e&&t.to===e&&(this._set(0,0,0,0),r.filter(this,t),a=1)),a===e){var l,h,u=c.readNamed(arguments,"from"),f=r.peek(arguments),g=u.x,p=u.y;if(f&&f.x!==e||r.hasNamed(arguments,"to")){var _=c.readNamed(arguments,"to");(l=_.x-g)<0&&(g=_.x,l=-l),(h=_.y-p)<0&&(p=_.y,h=-h)}else{var v=d.read(arguments);l=v.width,h=v.height}this._set(g,p,l,h),a=arguments.__index;var m=arguments.__filtered;m&&(this.__filtered=m)}return this.__read&&(this.__read=a),this},set:"#initialize",_set:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},clone:function(){return new p(this.x,this.y,this.width,this.height)},equals:function(t){var e=r.isPlainValue(t)?p.read(arguments):t;return e===this||e&&this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height||!1},toString:function(){var t=l.instance;return"{ x: "+t.number(this.x)+", y: "+t.number(this.y)+", width: "+t.number(this.width)+", height: "+t.number(this.height)+" }"},_serialize:function(t){var e=t.formatter;return[e.number(this.x),e.number(this.y),e.number(this.width),e.number(this.height)]},getPoint:function(t){return new(t?c:f)(this.x,this.y,this,"setPoint")},setPoint:function(){var t=c.read(arguments);this.x=t.x,this.y=t.y},getSize:function(t){return new(t?d:g)(this.width,this.height,this,"setSize")},_fw:1,_fh:1,setSize:function(){var t=d.read(arguments),e=this._sx,n=this._sy,i=t.width,r=t.height;e&&(this.x+=(this.width-i)*e),n&&(this.y+=(this.height-r)*n),this.width=i,this.height=r,this._fw=this._fh=1},getLeft:function(){return this.x},setLeft:function(t){if(!this._fw){var e=t-this.x;this.width-=.5===this._sx?2*e:e}this.x=t,this._sx=this._fw=0},getTop:function(){return this.y},setTop:function(t){if(!this._fh){var e=t-this.y;this.height-=.5===this._sy?2*e:e}this.y=t,this._sy=this._fh=0},getRight:function(){return this.x+this.width},setRight:function(t){if(!this._fw){var e=t-this.x;this.width=.5===this._sx?2*e:e}this.x=t-this.width,this._sx=1,this._fw=0},getBottom:function(){return this.y+this.height},setBottom:function(t){if(!this._fh){var e=t-this.y;this.height=.5===this._sy?2*e:e}this.y=t-this.height,this._sy=1,this._fh=0},getCenterX:function(){return this.x+this.width/2},setCenterX:function(t){this._fw||.5===this._sx?this.x=t-this.width/2:(this._sx&&(this.x+=2*(t-this.x)*this._sx),this.width=2*(t-this.x)),this._sx=.5,this._fw=0},getCenterY:function(){return this.y+this.height/2},setCenterY:function(t){this._fh||.5===this._sy?this.y=t-this.height/2:(this._sy&&(this.y+=2*(t-this.y)*this._sy),this.height=2*(t-this.y)),this._sy=.5,this._fh=0},getCenter:function(t){return new(t?c:f)(this.getCenterX(),this.getCenterY(),this,"setCenter")},setCenter:function(){var t=c.read(arguments);return this.setCenterX(t.x),this.setCenterY(t.y),this},getArea:function(){return this.width*this.height},isEmpty:function(){return 0===this.width||0===this.height},contains:function(t){return t&&t.width!==e||4===(Array.isArray(t)?t:arguments).length?this._containsRectangle(p.read(arguments)):this._containsPoint(c.read(arguments))},_containsPoint:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(t){var e=t.x,n=t.y;return e>=this.x&&n>=this.y&&e+t.width<=this.x+this.width&&n+t.height<=this.y+this.height},intersects:function(){var t=p.read(arguments),e=r.read(arguments)||0;return t.x+t.width>this.x-e&&t.y+t.height>this.y-e&&t.x<this.x+this.width+e&&t.y<this.y+this.height+e},intersect:function(){var t=p.read(arguments),e=Math.max(this.x,t.x),n=Math.max(this.y,t.y),i=Math.min(this.x+this.width,t.x+t.width),r=Math.min(this.y+this.height,t.y+t.height);return new p(e,n,i-e,r-n)},unite:function(){var t=p.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),r=Math.max(this.y+this.height,t.y+t.height);return new p(e,n,i-e,r-n)},include:function(){var t=c.read(arguments),e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x),r=Math.max(this.y+this.height,t.y);return new p(e,n,i-e,r-n)},expand:function(){var t=d.read(arguments),e=t.width,n=t.height;return new p(this.x-e/2,this.y-n/2,this.width+e,this.height+n)},scale:function(t,n){return this.expand(this.width*t-this.width,this.height*(n===e?t:n)-this.height)}},r.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(t,e){var n=t.join(""),i=/^[RL]/.test(n);e>=4&&(t[1]+=i?"Y":"X");var r=t[i?0:1],s=t[i?1:0],a="get"+r,o="get"+s,l="set"+r,h="set"+s,u="set"+n;this["get"+n]=function(t){return new(t?c:f)(this[a](),this[o](),this,u)},this[u]=function(){var t=c.read(arguments);this[l](t.x),this[h](t.y)}},{beans:!0})),_=p.extend({initialize:function(t,e,n,i,r,s){this._set(t,e,n,i,!0),this._owner=r,this._setter=s},_set:function(t,e,n,i,r){return this._x=t,this._y=e,this._width=n,this._height=i,r||this._owner[this._setter](this),this}},new function(){var t=p.prototype;return r.each(["x","y","width","height"],function(t){var e=r.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._dontNotify||this._owner[this._setter](this)}},r.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(e){var n="set"+e;this[n]=function(){this._dontNotify=!0,t[n].apply(this,arguments),this._dontNotify=!1,this._owner[this._setter](this)}},{isSelected:function(){return!!(2&this._owner._selection)},setSelected:function(t){var e=this._owner;e._changeSelection&&e._changeSelection(2,t)}}))}),v=r.extend({_class:"Matrix",initialize:function t(e,n){var i=arguments.length,r=!0;if(i>=6?this._set.apply(this,arguments):1===i||2===i?e instanceof t?this._set(e._a,e._b,e._c,e._d,e._tx,e._ty,n):Array.isArray(e)?this._set.apply(this,n?e.concat([n]):e):r=!1:i?r=!1:this.reset(),!r)throw new Error("Unsupported matrix parameters");return this},set:"#initialize",_set:function(t,e,n,i,r,s,a){return this._a=t,this._b=e,this._c=n,this._d=i,this._tx=r,this._ty=s,a||this._changed(),this},_serialize:function(t,e){return r.serialize(this.getValues(),t,!0,e)},_changed:function(){var t=this._owner;t&&(t._applyMatrix?t.transform(null,!0):t._changed(25))},clone:function(){return new v(this._a,this._b,this._c,this._d,this._tx,this._ty)},equals:function(t){return t===this||t&&this._a===t._a&&this._b===t._b&&this._c===t._c&&this._d===t._d&&this._tx===t._tx&&this._ty===t._ty},toString:function(){var t=l.instance;return"[["+[t.number(this._a),t.number(this._c),t.number(this._tx)].join(", ")+"], ["+[t.number(this._b),t.number(this._d),t.number(this._ty)].join(", ")+"]]"},reset:function(t){return this._a=this._d=1,this._b=this._c=this._tx=this._ty=0,t||this._changed(),this},apply:function(t,e){var n=this._owner;return!!n&&(n.transform(null,!0,r.pick(t,!0),e),this.isIdentity())},translate:function(){var t=c.read(arguments),e=t.x,n=t.y;return this._tx+=e*this._a+n*this._c,this._ty+=e*this._b+n*this._d,this._changed(),this},scale:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0});return e&&this.translate(e),this._a*=t.x,this._b*=t.x,this._c*=t.y,this._d*=t.y,e&&this.translate(e.negate()),this._changed(),this},rotate:function(t){t*=Math.PI/180;var e=c.read(arguments,1),n=e.x,i=e.y,r=Math.cos(t),s=Math.sin(t),a=n-n*r+i*s,o=i-n*s-i*r,l=this._a,h=this._b,u=this._c,f=this._d;return this._a=r*l+s*u,this._b=r*h+s*f,this._c=-s*l+r*u,this._d=-s*h+r*f,this._tx+=a*l+o*u,this._ty+=a*h+o*f,this._changed(),this},shear:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0});e&&this.translate(e);var n=this._a,i=this._b;return this._a+=t.y*this._c,this._b+=t.y*this._d,this._c+=t.x*n,this._d+=t.x*i,e&&this.translate(e.negate()),this._changed(),this},skew:function(){var t=c.read(arguments),e=c.read(arguments,0,{readNull:!0}),n=Math.PI/180,i=new c(Math.tan(t.x*n),Math.tan(t.y*n));return this.shear(i,e)},append:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,a=t._a,o=t._c,l=t._b,h=t._d,u=t._tx,c=t._ty;this._a=a*n+l*r,this._c=o*n+h*r,this._b=a*i+l*s,this._d=o*i+h*s,this._tx+=u*n+c*r,this._ty+=u*i+c*s,e||this._changed()}return this},prepend:function(t,e){if(t){var n=this._a,i=this._b,r=this._c,s=this._d,a=this._tx,o=this._ty,l=t._a,h=t._c,u=t._b,c=t._d,f=t._tx,d=t._ty;this._a=l*n+h*i,this._c=l*r+h*s,this._b=u*n+c*i,this._d=u*r+c*s,this._tx=l*a+h*o+f,this._ty=u*a+c*o+d,e||this._changed()}return this},appended:function(t){return this.clone().append(t)},prepended:function(t){return this.clone().prepend(t)},invert:function(){var t=this._a,e=this._b,n=this._c,i=this._d,r=this._tx,s=this._ty,a=t*i-e*n,o=null;return a&&!isNaN(a)&&isFinite(r)&&isFinite(s)&&(this._a=i/a,this._b=-e/a,this._c=-n/a,this._d=t/a,this._tx=(n*s-i*r)/a,this._ty=(e*r-t*s)/a,o=this),o},inverted:function(){return this.clone().invert()},concatenate:"#append",preConcatenate:"#prepend",chain:"#appended",_shiftless:function(){return new v(this._a,this._b,this._c,this._d,0,0)},_orNullIfIdentity:function(){return this.isIdentity()?null:this},isIdentity:function(){return 1===this._a&&0===this._b&&0===this._c&&1===this._d&&0===this._tx&&0===this._ty},isInvertible:function(){var t=this._a*this._d-this._c*this._b;return t&&!isNaN(t)&&isFinite(this._tx)&&isFinite(this._ty)},isSingular:function(){return!this.isInvertible()},transform:function(t,e,n){return arguments.length<3?this._transformPoint(c.read(arguments)):this._transformCoordinates(t,e,n)},_transformPoint:function(t,e,n){var i=t.x,r=t.y;return e||(e=new c),e._set(i*this._a+r*this._c+this._tx,i*this._b+r*this._d+this._ty,n)},_transformCoordinates:function(t,e,n){for(var i=0,r=2*n;i<r;i+=2){var s=t[i],a=t[i+1];e[i]=s*this._a+a*this._c+this._tx,e[i+1]=s*this._b+a*this._d+this._ty}return e},_transformCorners:function(t){var e=t.x,n=t.y,i=e+t.width,r=n+t.height,s=[e,n,i,n,i,r,e,r];return this._transformCoordinates(s,s,4)},_transformBounds:function(t,e,n){for(var i=this._transformCorners(t),r=i.slice(0,2),s=r.slice(),a=2;a<8;a++){var o=i[a],l=1&a;o<r[l]?r[l]=o:o>s[l]&&(s[l]=o)}return e||(e=new p),e._set(r[0],r[1],s[0]-r[0],s[1]-r[1],n)},inverseTransform:function(){return this._inverseTransform(c.read(arguments))},_inverseTransform:function(t,e,n){var i=this._a,r=this._b,s=this._c,a=this._d,o=this._tx,l=this._ty,h=i*a-r*s,u=null;if(h&&!isNaN(h)&&isFinite(o)&&isFinite(l)){var f=t.x-this._tx,d=t.y-this._ty;e||(e=new c),u=e._set((f*a-d*s)/h,(d*i-f*r)/h,n)}return u},decompose:function(){var t,e,n,i=this._a,r=this._b,s=this._c,a=this._d,o=i*a-r*s,l=Math.sqrt,h=Math.atan2,u=180/Math.PI;if(0!==i||0!==r){var f=l(i*i+r*r);t=Math.acos(i/f)*(r>0?1:-1),e=[f,o/f],n=[h(i*s+r*a,f*f),0]}else if(0!==s||0!==a){var d=l(s*s+a*a);t=Math.asin(s/d)*(a>0?1:-1),e=[o/d,d],n=[0,h(i*s+r*a,d*d)]}else t=0,n=e=[0,0];return{translation:this.getTranslation(),rotation:t*u,scaling:new c(e),skewing:new c(n[0]*u,n[1]*u)}},getValues:function(){return[this._a,this._b,this._c,this._d,this._tx,this._ty]},getTranslation:function(){return new c(this._tx,this._ty)},getScaling:function(){return this.decompose().scaling},getRotation:function(){return this.decompose().rotation},applyToContext:function(t){this.isIdentity()||t.transform(this._a,this._b,this._c,this._d,this._tx,this._ty)}},r.each(["a","b","c","d","tx","ty"],function(t){var e=r.capitalize(t),n="_"+t;this["get"+e]=function(){return this[n]},this["set"+e]=function(t){this[n]=t,this._changed()}},{})),m=r.extend({_class:"Line",initialize:function(t,e,n,i,r){var s=!1;arguments.length>=4?(this._px=t,this._py=e,this._vx=n,this._vy=i,s=r):(this._px=t.x,this._py=t.y,this._vx=e.x,this._vy=e.y,s=n),s||(this._vx-=this._px,this._vy-=this._py)},getPoint:function(){return new c(this._px,this._py)},getVector:function(){return new c(this._vx,this._vy)},getLength:function(){return this.getVector().getLength()},intersect:function(t,e){return m.intersect(this._px,this._py,this._vx,this._vy,t._px,t._py,t._vx,t._vy,!0,e)},getSide:function(t,e){return m.getSide(this._px,this._py,this._vx,this._vy,t.x,t.y,!0,e)},getDistance:function(t){return Math.abs(this.getSignedDistance(t))},getSignedDistance:function(t){return m.getSignedDistance(this._px,this._py,this._vx,this._vy,t.x,t.y,!0)},isCollinear:function(t){return c.isCollinear(this._vx,this._vy,t._vx,t._vy)},isOrthogonal:function(t){return c.isOrthogonal(this._vx,this._vy,t._vx,t._vy)},statics:{intersect:function(t,e,n,i,r,s,a,o,l,u){l||(n-=t,i-=e,a-=r,o-=s);var f=n*o-i*a;if(!h.isZero(f)){var d=t-r,g=e-s,p=(a*g-o*d)/f,_=(n*g-i*d)/f,v=-1e-12,m=1+1e-12;if(u||v<p&&p<m&&v<_&&_<m)return u||(p=p<=0?0:p>=1?1:p),new c(t+p*n,e+p*i)}},getSide:function(t,e,n,i,r,s,a,o){a||(n-=t,i-=e);var l=r-t,u=l*i-(s-e)*n;return!o&&h.isZero(u)&&(u=(l*n+l*n)/(n*n+i*i))>=0&&u<=1&&(u=0),u<0?-1:u>0?1:0},getSignedDistance:function(t,e,n,i,r,s,a){return a||(n-=t,i-=e),0===n?i>0?r-t:t-r:0===i?n<0?s-e:e-s:((r-t)*i-(s-e)*n)/Math.sqrt(n*n+i*i)},getDistance:function(t,e,n,i,r,s,a){return Math.abs(m.getSignedDistance(t,e,n,i,r,s,a))}}}),y=o.extend({_class:"Project",_list:"projects",_reference:"project",_compactSerialize:!0,initialize:function(t){o.call(this,!0),this._children=[],this._namedChildren={},this._activeLayer=null,this._currentStyle=new U(null,null,this),this._view=G.create(this,t||et.getCanvas(1,1)),this._selectionItems={},this._selectionCount=0,this._updateVersion=0},_serialize:function(t,e){return r.serialize(this._children,t,!0,e)},_changed:function(t,e){if(1&t){var n=this._view;n&&(n._needsUpdate=!0,!n._requested&&n._autoUpdate&&n.requestUpdate())}var i=this._changes;if(i&&e){var r=this._changesById,s=e._id,a=r[s];a?a.flags|=t:i.push(r[s]={item:e,flags:t})}},clear:function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e].remove()},isEmpty:function(){return!this._children.length},remove:function t(){return!!t.base.call(this)&&(this._view&&this._view.remove(),!0)},getView:function(){return this._view},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(t){this._currentStyle.set(t)},getIndex:function(){return this._index},getOptions:function(){return this._scope.settings},getLayers:function(){return this._children},getActiveLayer:function(){return this._activeLayer||new w({project:this,insert:!0})},getSymbolDefinitions:function(){var t=[],e={};return this.getItems({class:k,match:function(n){var i=n._definition,r=i._id;return e[r]||(e[r]=!0,t.push(i)),!1}}),t},getSymbols:"getSymbolDefinitions",getSelectedItems:function(){var t=this._selectionItems,e=[];for(var n in t){var i=t[n],r=i._selection;1&r&&i.isInserted()?e.push(i):r||this._updateSelection(i)}return e},_updateSelection:function(t){var e=t._id,n=this._selectionItems;t._selection?n[e]!==t&&(this._selectionCount++,n[e]=t):n[e]===t&&(this._selectionCount--,delete n[e])},selectAll:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)t[e].setFullySelected(!0)},deselectAll:function(){var t=this._selectionItems;for(var e in t)t[e].setFullySelected(!1)},addLayer:function(t){return this.insertLayer(e,t)},insertLayer:function(t,e){if(e instanceof w){e._remove(!1,!0),r.splice(this._children,[e],t,0),e._setProject(this,!0);var n=e._name;n&&e.setName(n),this._changes&&e._changed(5),this._activeLayer||(this._activeLayer=e)}else e=null;return e},_insertItem:function(t,n,i){return n=this.insertLayer(t,n)||(this._activeLayer||this._insertItem(e,new w(x.NO_INSERT),!0)).insertChild(t,n),i&&n.activate&&n.activate(),n},getItems:function(t){return x._getItems(this,t)},getItem:function(t){return x._getItems(this,t,null,null,!0)[0]||null},importJSON:function(t){this.activate();var e=this._activeLayer;return r.importJSON(t,e&&e.isEmpty()&&e)},removeOn:function(t){var e=this._removeSets;if(e){"mouseup"===t&&(e.mousedrag=null);var n=e[t];if(n){for(var i in n){var r=n[i];for(var s in e){var a=e[s];a&&a!=n&&delete a[r._id]}r.remove()}e[t]=null}}},draw:function(t,e,n){this._updateVersion++,t.save(),e.applyToContext(t);for(var i=this._children,s=new r({offset:new c(0,0),pixelRatio:n,viewMatrix:e.isIdentity()?null:e,matrices:[new v],updateMatrix:!0}),a=0,o=i.length;a<o;a++)i[a].draw(t,s);if(t.restore(),this._selectionCount>0){t.save(),t.strokeWidth=1;var l=this._selectionItems,h=this._scope.settings.handleSize,u=this._updateVersion;for(var f in l)l[f]._drawSelection(t,e,h,l,u);t.restore()}}}),x=r.extend(s,{statics:{extend:function t(e){return e._serializeFields&&(e._serializeFields=r.set({},this.prototype._serializeFields,e._serializeFields)),t.base.apply(this,arguments)},NO_INSERT:{insert:!1}},_class:"Item",_name:null,_applyMatrix:!0,_canApplyMatrix:!0,_canScaleStroke:!1,_pivot:null,_visible:!0,_blendMode:"normal",_opacity:1,_locked:!1,_guide:!1,_clipMask:!1,_selection:0,_selectBounds:!0,_selectChildren:!1,_serializeFields:{name:null,applyMatrix:null,matrix:new v,pivot:null,visible:!0,blendMode:"normal",opacity:1,locked:!1,guide:!1,clipMask:!1,selected:!1,data:{}},_prioritize:["applyMatrix"]},new function(){var t=["onMouseDown","onMouseUp","onMouseDrag","onClick","onDoubleClick","onMouseMove","onMouseEnter","onMouseLeave"];return r.each(t,function(t){this._events[t]={install:function(t){this.getView()._countItemEvent(t,1)},uninstall:function(t){this.getView()._countItemEvent(t,-1)}}},{_events:{onFrame:{install:function(){this.getView()._animateItem(this,!0)},uninstall:function(){this.getView()._animateItem(this,!1)}},onLoad:{},onError:{}},statics:{_itemHandlers:t}})},{initialize:function(){},_initialize:function(t,n){var i=t&&r.isPlainObject(t),s=i&&!0===t.internal,a=this._matrix=new v,o=i&&t.project||st.project,l=st.settings;return this._id=s?null:u.get(),this._parent=this._index=null,this._applyMatrix=this._canApplyMatrix&&l.applyMatrix,n&&a.translate(n),a._owner=this,this._style=new U(o._currentStyle,this,o),s||i&&0==t.insert||!l.insertItems&&(!i||!0!==t.insert)?this._setProject(o):(i&&t.parent||o)._insertItem(e,this,!0),i&&t!==x.NO_INSERT&&this.set(t,{internal:!0,insert:!0,project:!0,parent:!0}),i},_serialize:function(t,e){function n(n){for(var a in n){var o=s[a];r.equals(o,"leading"===a?1.2*n.fontSize:n[a])||(i[a]=r.serialize(o,t,"data"!==a,e))}}var i={},s=this;return n(this._serializeFields),this instanceof b||n(this._style._defaults),[this._class,i]},_changed:function(t){var n=this._symbol,i=this._parent||n,r=this._project;8&t&&(this._bounds=this._position=this._decomposed=e),16&t&&(this._globalMatrix=e),i&&72&t&&x._clearBoundsCache(i),2&t&&x._clearBoundsCache(this),r&&r._changed(t,this),n&&n._changed(t)},getId:function(){return this._id},getName:function(){return this._name},setName:function(t){if(this._name&&this._removeNamed(),t===+t+"")throw new Error("Names consisting only of numbers are not supported.");var n=this._getOwner();if(t&&n){var i=n._children,r=n._namedChildren;(r[t]=r[t]||[]).push(this),t in i||(i[t]=this)}this._name=t||e,this._changed(256)},getStyle:function(){return this._style},setStyle:function(t){this.getStyle().set(t)}},r.each(["locked","visible","blendMode","opacity","guide"],function(t){var e=r.capitalize(t),n="_"+t,i={locked:256,visible:265};this["get"+e]=function(){return this[n]},this["set"+e]=function(e){e!=this[n]&&(this[n]=e,this._changed(i[t]||257))}},{}),{beans:!0,getSelection:function(){return this._selection},setSelection:function(t){if(t!==this._selection){this._selection=t;var e=this._project;e&&(e._updateSelection(this),this._changed(257))}},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){if(this._selectChildren)for(var t=this._children,e=0,n=t.length;e<n;e++)if(t[e].isSelected())return!0;return!!(1&this._selection)},setSelected:function(t){if(this._selectChildren)for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setSelected(t);this._changeSelection(1,t)},isFullySelected:function(){var t=this._children,e=!!(1&this._selection);if(t&&e){for(var n=0,i=t.length;n<i;n++)if(!t[n].isFullySelected())return!1;return!0}return e},setFullySelected:function(t){var e=this._children;if(e)for(var n=0,i=e.length;n<i;n++)e[n].setFullySelected(t);this._changeSelection(1,t)},isClipMask:function(){return this._clipMask},setClipMask:function(t){this._clipMask!=(t=!!t)&&(this._clipMask=t,t&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(257),this._parent&&this._parent._changed(2048))},getData:function(){return this._data||(this._data={}),this._data},setData:function(t){this._data=t},getPosition:function(t){var e=t?c:f,n=this._position||(this._position=this._getPositionFromBounds());return new e(n.x,n.y,this,"setPosition")},setPosition:function(){this.translate(c.read(arguments).subtract(this.getPosition(!0)))},_getPositionFromBounds:function(t){return this._pivot?this._matrix._transformPoint(this._pivot):(t||this.getBounds()).getCenter(!0)},getPivot:function(){var t=this._pivot;return t?new f(t.x,t.y,this,"setPivot"):null},setPivot:function(){this._pivot=c.read(arguments,0,{clone:!0,readNull:!0}),this._position=e}},r.each({getStrokeBounds:{stroke:!0},getHandleBounds:{handle:!0},getInternalBounds:{internal:!0}},function(t,e){this[e]=function(e){return this.getBounds(e,t)}},{beans:!0,getBounds:function(t,e){var n=e||t instanceof v,i=r.set({},n?e:t,this._boundsOptions);i.stroke&&!this.getStrokeScaling()||(i.cacheItem=this);var s=this._getCachedBounds(n&&t,i).rect;return arguments.length?s:new _(s.x,s.y,s.width,s.height,this,"setBounds")},setBounds:function(){var t=p.read(arguments),e=this.getBounds(),n=this._matrix,i=new v,r=t.getCenter();i.translate(r),t.width==e.width&&t.height==e.height||(n.isInvertible()||(n.set(n._backup||(new v).translate(n.getTranslation())),e=this.getBounds()),i.scale(0!==e.width?t.width/e.width:0,0!==e.height?t.height/e.height:0)),r=e.getCenter(),i.translate(-r.x,-r.y),this.transform(i)},_getBounds:function(t,e){var n=this._children;return n&&n.length?(x._updateBoundsCache(this,e.cacheItem),x._getBounds(n,t,e)):new p},_getBoundsCacheKey:function(t,e){return[t.stroke?1:0,t.handle?1:0,e?1:0].join("")},_getCachedBounds:function(t,e,n){t=t&&t._orNullIfIdentity();var i=e.internal&&!n,r=e.cacheItem,s=i?null:this._matrix._orNullIfIdentity(),a=r&&(!t||t.equals(s))&&this._getBoundsCacheKey(e,i),o=this._bounds;if(x._updateBoundsCache(this._parent||this._symbol,r),a&&o&&a in o)return{rect:(f=o[a]).rect.clone(),nonscaling:f.nonscaling};var l=this._getBounds(t||s,e),h=l.rect||l,u=this._style,c=l.nonscaling||u.hasStroke()&&!u.getStrokeScaling();if(a){o||(this._bounds=o={});var f=o[a]={rect:h.clone(),nonscaling:c,internal:i}}return{rect:h,nonscaling:c}},_getStrokeMatrix:function(t,e){var n=this.getStrokeScaling()?null:e&&e.internal?this:this._parent||this._symbol&&this._symbol._item,i=n?n.getViewMatrix().invert():t;return i&&i._shiftless()},statics:{_updateBoundsCache:function(t,e){if(t&&e){var n=e._id,i=t._boundsCache=t._boundsCache||{ids:{},list:[]};i.ids[n]||(i.list.push(e),i.ids[n]=e)}},_clearBoundsCache:function(t){var n=t._boundsCache;if(n){t._bounds=t._position=t._boundsCache=e;for(var i=0,r=n.list,s=r.length;i<s;i++){var a=r[i];a!==t&&(a._bounds=a._position=e,a._boundsCache&&x._clearBoundsCache(a))}}},_getBounds:function(t,e,n){var i=1/0,r=-i,s=i,a=r,o=!1;n=n||{};for(var l=0,h=t.length;l<h;l++){var u=t[l];if(u._visible&&!u.isEmpty()){var c=u._getCachedBounds(e&&e.appended(u._matrix),n,!0),f=c.rect;i=Math.min(f.x,i),s=Math.min(f.y,s),r=Math.max(f.x+f.width,r),a=Math.max(f.y+f.height,a),c.nonscaling&&(o=!0)}}return{rect:isFinite(i)?new p(i,s,r-i,a-s):new p,nonscaling:o}}}}),{beans:!0,_decompose:function(){return this._applyMatrix?null:this._decomposed||(this._decomposed=this._matrix.decompose())},getRotation:function(){var t=this._decompose();return t?t.rotation:0},setRotation:function(t){var e=this.getRotation();if(null!=e&&null!=t){var n=this._decomposed;this.rotate(t-e),n&&(n.rotation=t,this._decomposed=n)}},getScaling:function(){var t=this._decompose(),e=t&&t.scaling;return new f(e?e.x:1,e?e.y:1,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=c.read(arguments,0,{clone:!0,readNull:!0});if(t&&e&&!t.equals(e)){var n=this.getRotation(),i=this._decomposed,r=new v,s=this.getPosition(!0);r.translate(s),n&&r.rotate(n),r.scale(e.x/t.x,e.y/t.y),n&&r.rotate(-n),r.translate(s.negate()),this.transform(r),i&&(i.scaling=e,this._decomposed=i)}},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},getGlobalMatrix:function(t){var e=this._globalMatrix;if(e)for(var n=this._parent,i=[];n;){if(!n._globalMatrix){e=null;for(var r=0,s=i.length;r<s;r++)i[r]._globalMatrix=null;break}i.push(n),n=n._parent}return e||(e=this._globalMatrix=this._matrix.clone(),(n=this._parent)&&e.prepend(n.getGlobalMatrix(!0))),t?e:e.clone()},getViewMatrix:function(){return this.getGlobalMatrix().prepend(this.getView()._matrix)},getApplyMatrix:function(){return this._applyMatrix},setApplyMatrix:function(t){(this._applyMatrix=this._canApplyMatrix&&!!t)&&this.transform(null,!0)},getTransformContent:"#getApplyMatrix",setTransformContent:"#setApplyMatrix"},{getProject:function(){return this._project},_setProject:function(t,e){if(this._project!==t){this._project&&this._installEvents(!1),this._project=t;for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._setProject(t);e=!0}e&&this._installEvents(!0)},getView:function(){return this._project._view},_installEvents:function t(e){t.base.call(this,e);for(var n=this._children,i=0,r=n&&n.length;i<r;i++)n[i]._installEvents(e)},getLayer:function(){for(var t=this;t=t._parent;)if(t instanceof w)return t;return null},getParent:function(){return this._parent},setParent:function(t){return t.addChild(this)},_getOwner:"#getParent",getChildren:function(){return this._children},setChildren:function(t){this.removeChildren(),this.addChildren(t)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){var t=this._getOwner();return t&&t._children[this._index+1]||null},getPreviousSibling:function(){var t=this._getOwner();return t&&t._children[this._index-1]||null},getIndex:function(){return this._index},equals:function(t){return t===this||t&&this._class===t._class&&this._style.equals(t._style)&&this._matrix.equals(t._matrix)&&this._locked===t._locked&&this._visible===t._visible&&this._blendMode===t._blendMode&&this._opacity===t._opacity&&this._clipMask===t._clipMask&&this._guide===t._guide&&this._equals(t)||!1},_equals:function(t){return r.equals(this._children,t._children)},clone:function(t){var n=new this.constructor(x.NO_INSERT),i=this._children,s=r.pick(t?t.insert:e,t===e||!0===t),a=r.pick(t?t.deep:e,!0);i&&n.copyAttributes(this),i&&!a||n.copyContent(this),i||n.copyAttributes(this),s&&n.insertAbove(this);var o=this._name,l=this._parent;if(o&&l){i=l._children;for(var h=o,u=1;i[o];)o=h+" "+u++;o!==h&&n.setName(o)}return n},copyContent:function(t){for(var e=t._children,n=0,i=e&&e.length;n<i;n++)this.addChild(e[n].clone(!1),!0)},copyAttributes:function(t,e){this.setStyle(t._style);for(var n=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"],i=0,s=n.length;i<s;i++){var a=n[i];t.hasOwnProperty(a)&&(this[a]=t[a])}e||this._matrix.set(t._matrix,!0),this.setApplyMatrix(t._applyMatrix),this.setPivot(t._pivot),this.setSelection(t._selection);var o=t._data,l=t._name;this._data=o?r.clone(o):null,l&&this.setName(l)},rasterize:function(t,n){var i=this.getStrokeBounds(),s=(t||this.getView().getResolution())/72,a=i.getTopLeft().floor(),o=i.getBottomRight().ceil(),l=new d(o.subtract(a)),h=new S(x.NO_INSERT);if(!l.isZero()){var u=et.getCanvas(l.multiply(s)),c=u.getContext("2d"),f=(new v).scale(s).translate(a.negate());c.save(),f.applyToContext(c),this.draw(c,new r({matrices:[f]})),c.restore(),h.setCanvas(u)}return h.transform((new v).translate(a.add(l.divide(2))).scale(1/s)),(n===e||n)&&h.insertAbove(this),h},contains:function(){return!!this._contains(this._matrix._inverseTransform(c.read(arguments)))},_contains:function(t){var e=this._children;if(e){for(var n=e.length-1;n>=0;n--)if(e[n].contains(t))return!0;return!1}return t.isInside(this.getInternalBounds())},isInside:function(){return p.read(arguments).contains(this.getBounds())},_asPathItem:function(){return new I.Rectangle({rectangle:this.getInternalBounds(),matrix:this._matrix,insert:!1})},intersects:function(t,e){return t instanceof x&&this._asPathItem().getIntersections(t._asPathItem(),null,e,!0).length>0}},new function(){function t(){return this._hitTest(c.read(arguments),T.getOptions(arguments))}function e(){var t=c.read(arguments),e=T.getOptions(arguments),n=[];return this._hitTest(t,r.set({all:n},e)),n}function n(t,e,n,i){var r=this._children;if(r)for(var s=r.length-1;s>=0;s--){var a=r[s],o=a!==i&&a._hitTest(t,e,n);if(o&&!e.all)return o}return null}return y.inject({hitTest:t,hitTestAll:e,_hitTest:n}),{hitTest:t,hitTestAll:e,_hitTestChildren:n}},{_hitTest:function(t,e,n){function i(t){return t&&g&&!g(t)&&(t=null),t&&e.all&&e.all.push(t),t}function s(e,n){var i=n?u["get"+n]():p.getPosition();if(t.subtract(i).divide(h).length<=1)return new T(e,p,{name:n?r.hyphenate(n):e,point:i})}if(this._locked||!this._visible||this._guide&&!e.guides||this.isEmpty())return null;var a=this._matrix,o=n?n.appended(a):this.getGlobalMatrix().prepend(this.getView()._matrix),l=Math.max(e.tolerance,1e-12),h=e._tolerancePadding=new d(I._getStrokePadding(l,a._shiftless().invert()));if(!(t=a._inverseTransform(t))||!this._children&&!this.getBounds({internal:!0,stroke:!0,handle:!0}).expand(h.multiply(2))._containsPoint(t))return null;var u,c,f=!(e.guides&&!this._guide||e.selected&&!this.isSelected()||e.type&&e.type!==r.hyphenate(this._class)||e.class&&!(this instanceof e.class)),g=e.match,p=this,_=e.position,v=e.center,m=e.bounds;if(f&&this._parent&&(_||v||m)){if((v||m)&&(u=this.getInternalBounds()),!(c=_&&s("position")||v&&s("center","Center"))&&m)for(var y=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],x=0;x<8&&!c;x++)c=s("bounds",y[x]);c=i(c)}return c||(c=this._hitTestChildren(t,e,o)||f&&i(this._hitTestSelf(t,e,o,this.getStrokeScaling()?null:o._shiftless().invert()))||null),c&&c.point&&(c.point=a.transform(c.point)),c},_hitTestSelf:function(t,e){if(e.fill&&this.hasFill()&&this._contains(t))return new T("fill",this)},matches:function(t,e){var n=typeof t;if("object"===n){for(var i in t)if(t.hasOwnProperty(i)&&!this.matches(i,t[i]))return!1;return!0}if("function"===n)return t(this);if("match"===t)return e(this);var s=/^(empty|editable)$/.test(t)?this["is"+r.capitalize(t)]():"type"===t?r.hyphenate(this._class):this[t];if("class"===t){if("function"==typeof e)return this instanceof e;s=this._class}if("function"==typeof e)return!!e(s);if(e){if(e.test)return e.test(s);if(r.isPlainObject(e))return function t(e,n){for(var i in e)if(e.hasOwnProperty(i)){var s=e[i],a=n[i];if(r.isPlainObject(s)&&r.isPlainObject(a)){if(!t(s,a))return!1}else if(!r.equals(s,a))return!1}return!0}(e,s)}return r.equals(s,e)},getItems:function(t){return x._getItems(this,t,this._matrix)},getItem:function(t){return x._getItems(this,t,this._matrix,null,!0)[0]||null},statics:{_getItems:function t(e,n,i,s,a){if(!s){var o="object"==typeof n&&n,l=o&&o.overlapping,h=o&&o.inside,u=(x=l||h)&&p.read([x]);s={items:[],recursive:o&&!1!==o.recursive,inside:!!h,overlapping:!!l,rect:u,path:l&&new I.Rectangle({rectangle:u,insert:!1})},o&&(n=r.filter({},n,{recursive:!0,inside:!0,overlapping:!0}))}var c=e._children,f=s.items;i=(u=s.rect)&&(i||new v);for(var d=0,g=c&&c.length;d<g;d++){var _=c[d],m=i&&i.appended(_._matrix),y=!0;if(u){var x=_.getBounds(m);if(!u.intersects(x))continue;u.contains(x)||s.overlapping&&(x.contains(u)||s.path.intersects(_,m))||(y=!1)}if(y&&_.matches(n)&&(f.push(_),a))break;if(!1!==s.recursive&&t(_,n,m,s,a),a&&f.length>0)break}return f}}},{importJSON:function(t){var e=r.importJSON(t,this);return e!==this?this.addChild(e):e},addChild:function(t){return this.insertChild(e,t)},insertChild:function(t,e){var n=e?this.insertChildren(t,[e]):null;return n&&n[0]},addChildren:function(t){return this.insertChildren(this._children.length,t)},insertChildren:function(t,e){var n=this._children;if(n&&e&&e.length>0){for(var i={},s=(e=r.slice(e)).length-1;s>=0;s--){var a=(u=e[s])&&u._id;!u||i[a]?e.splice(s,1):(u._remove(!1,!0),i[a]=!0)}r.splice(n,e,t,0);for(var o=this._project,l=o._changes,h=(s=0,e.length);s<h;s++){var u,c=(u=e[s])._name;u._parent=this,u._setProject(o,!0),c&&u.setName(c),l&&u._changed(5)}this._changed(11)}else e=null;return e},_insertItem:"#insertChild",_insertAt:function(t,e){var n=t&&t._getOwner(),i=t!==this&&n?this:null;return i&&(i._remove(!1,!0),n._insertItem(t._index+e,i)),i},insertAbove:function(t){return this._insertAt(t,1)},insertBelow:function(t){return this._insertAt(t,0)},sendToBack:function(){var t=this._getOwner();return t?t._insertItem(0,this):null},bringToFront:function(){var t=this._getOwner();return t?t._insertItem(e,this):null},appendTop:"#addChild",appendBottom:function(t){return this.insertChild(0,t)},moveAbove:"#insertAbove",moveBelow:"#insertBelow",addTo:function(t){return t._insertItem(e,this)},copyTo:function(t){return this.clone(!1).addTo(t)},reduce:function(t){var e=this._children;if(e&&1===e.length){var n=e[0].reduce(t);return this._parent?(n.insertAbove(this),this.remove()):n.remove(),n}return this},_removeNamed:function(){var t=this._getOwner();if(t){var e=t._children,n=t._namedChildren,i=this._name,r=n[i],s=r?r.indexOf(this):-1;-1!==s&&(e[i]==this&&delete e[i],r.splice(s,1),r.length?e[i]=r[0]:delete n[i])}},_remove:function(t,e){var n=this._getOwner(),i=this._project,s=this._index;return this._style&&this._style._dispose(),!!n&&(this._name&&this._removeNamed(),null!=s&&(i._activeLayer===this&&(i._activeLayer=this.getNextSibling()||this.getPreviousSibling()),r.splice(n._children,null,s,1)),this._installEvents(!1),t&&i._changes&&this._changed(5),e&&n._changed(11,this),this._parent=null,!0)},remove:function(){return this._remove(!0,!0)},replaceWith:function(t){var e=t&&t.insertBelow(this);return e&&this.remove(),e},removeChildren:function(t,e){if(!this._children)return null;t=t||0,e=r.pick(e,this._children.length);for(var n=r.splice(this._children,null,t,e-t),i=n.length-1;i>=0;i--)n[i]._remove(!0,!1);return n.length>0&&this._changed(11),n},clear:"#removeChildren",reverseChildren:function(){if(this._children){this._children.reverse();for(var t=0,e=this._children.length;t<e;t++)this._children[t]._index=t;this._changed(11)}},isEmpty:function(){var t=this._children;return!t||!t.length},isEditable:function(){for(var t=this;t;){if(!t._visible||t._locked)return!1;t=t._parent}return!0},hasFill:function(){return this.getStyle().hasFill()},hasStroke:function(){return this.getStyle().hasStroke()},hasShadow:function(){return this.getStyle().hasShadow()},_getOrder:function(t){function e(t){var e=[];do{e.unshift(t)}while(t=t._parent);return e}for(var n=e(this),i=e(t),r=0,s=Math.min(n.length,i.length);r<s;r++)if(n[r]!=i[r])return n[r]._index<i[r]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isInserted:function(){return!!this._parent&&this._parent.isInserted()},isAbove:function(t){return-1===this._getOrder(t)},isBelow:function(t){return 1===this._getOrder(t)},isParent:function(t){return this._parent===t},isChild:function(t){return t&&t._parent===this},isDescendant:function(t){for(var e=this;e=e._parent;)if(e===t)return!0;return!1},isAncestor:function(t){return!!t&&t.isDescendant(this)},isSibling:function(t){return this._parent===t._parent},isGroupedWith:function(t){for(var e=this._parent;e;){if(e._parent&&/^(Group|Layer|CompoundPath)$/.test(e._class)&&t.isDescendant(e))return!0;e=e._parent}return!1}},r.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?r:c).read(arguments),i=c.read(arguments,0,{readNull:!0});return this.transform((new v)[t](n,i||this.getPosition(!0)))}},{translate:function(){var t=new v;return this.transform(t.translate.apply(t,arguments))},transform:function(t,e,n,i){var r=this._matrix,s=t&&!t.isIdentity(),a=(e||this._applyMatrix)&&(!r.isIdentity()||s||e&&n&&this._children);if(!s&&!a)return this;if(s){!t.isInvertible()&&r.isInvertible()&&(r._backup=r.getValues()),r.prepend(t,!0);var o=this._style,l=o.getFillColor(!0),h=o.getStrokeColor(!0);l&&l.transform(t),h&&h.transform(t)}if(a&&(a=this._transformContent(r,n,i))){var u=this._pivot;u&&r._transformPoint(u,u,!0),r.reset(!0),i&&this._canApplyMatrix&&(this._applyMatrix=!0)}var c=this._bounds,f=this._position;(s||a)&&this._changed(25);var d=s&&c&&t.decompose();if(d&&d.skewing.isZero()&&d.rotation%90==0){for(var g in c){var p=c[g];if(p.nonscaling)delete c[g];else if(a||!p.internal){var _=p.rect;t._transformBounds(_,_)}}this._bounds=c;var v=c[this._getBoundsCacheKey(this._boundsOptions||{})];v&&(this._position=this._getPositionFromBounds(v.rect))}else s&&f&&this._pivot&&(this._position=t._transformPoint(f,f));return this},_transformContent:function(t,e,n){var i=this._children;if(i){for(var r=0,s=i.length;r<s;r++)i[r].transform(t,!0,e,n);return!0}},globalToLocal:function(){return this.getGlobalMatrix(!0)._inverseTransform(c.read(arguments))},localToGlobal:function(){return this.getGlobalMatrix(!0)._transformPoint(c.read(arguments))},parentToLocal:function(){return this._matrix._inverseTransform(c.read(arguments))},localToParent:function(){return this._matrix._transformPoint(c.read(arguments))},fitBounds:function(t,e){t=p.read(arguments);var n=this.getBounds(),i=n.height/n.width,r=t.height/t.width,s=(e?i>r:i<r)?t.width/n.width:t.height/n.height,a=new p(new c,new d(n.width*s,n.height*s));a.setCenter(t.getCenter()),this.setBounds(a)}}),{_setStyles:function(t,e,n){var i=this._style,r=this._matrix;if(i.hasFill()&&(t.fillStyle=i.getFillColor().toCanvasStyle(t,r)),i.hasStroke()){t.strokeStyle=i.getStrokeColor().toCanvasStyle(t,r),t.lineWidth=i.getStrokeWidth();var s=i.getStrokeJoin(),a=i.getStrokeCap(),o=i.getMiterLimit();if(s&&(t.lineJoin=s),a&&(t.lineCap=a),o&&(t.miterLimit=o),st.support.nativeDash){var l=i.getDashArray(),h=i.getDashOffset();l&&l.length&&("setLineDash"in t?(t.setLineDash(l),t.lineDashOffset=h):(t.mozDash=l,t.mozDashOffset=h))}}if(i.hasShadow()){var u=e.pixelRatio||1,f=n._shiftless().prepend((new v).scale(u,u)),d=f.transform(new c(i.getShadowBlur(),0)),g=f.transform(this.getShadowOffset());t.shadowColor=i.getShadowColor().toCanvasStyle(t),t.shadowBlur=d.getLength(),t.shadowOffsetX=g.x,t.shadowOffsetY=g.y}},draw:function(t,e,n){if(this._updateVersion=this._project._updateVersion,this._visible&&0!==this._opacity){var i=e.matrices,r=e.viewMatrix,s=this._matrix,a=i[i.length-1].appended(s);if(a.isInvertible()){r=r?r.appended(a):a,i.push(a),e.updateMatrix&&(this._globalMatrix=a);var o,l,h,u=this._blendMode,c=this._opacity,f="normal"===u,d=nt.nativeModes[u],g=f&&1===c||e.dontStart||e.clip||(d||f&&c<1)&&this._canComposite(),p=e.pixelRatio||1;if(!g){var _=this.getStrokeBounds(r);if(!_.width||!_.height)return void i.pop();h=e.offset,l=e.offset=_.getTopLeft().floor(),o=t,t=et.getContext(_.getSize().ceil().add(1).multiply(p)),1!==p&&t.scale(p,p)}t.save();var v=n?n.appended(s):this._canScaleStroke&&!this.getStrokeScaling(!0)&&r,m=!g&&e.clipItem,y=!v||m;if(g?(t.globalAlpha=c,d&&(t.globalCompositeOperation=u)):y&&t.translate(-l.x,-l.y),y&&(g?s:r).applyToContext(t),m&&e.clipItem.draw(t,e.extend({clip:!0})),v){t.setTransform(p,0,0,p,0,0);var x=e.offset;x&&t.translate(-x.x,-x.y)}this._draw(t,e,r,v),t.restore(),i.pop(),e.clip&&!e.dontFinish&&t.clip(),g||(nt.process(u,t,o,c,l.subtract(h).multiply(p)),et.release(t),e.offset=h)}}},_isUpdated:function(t){var e=this._parent;if(e instanceof L)return e._isUpdated(t);var n=this._updateVersion===t;return!n&&e&&e._visible&&e._isUpdated(t)&&(this._updateVersion=t,n=!0),n},_drawSelection:function(t,e,n,i,r){var s=this._selection,a=1&s,o=2&s||a&&this._selectBounds,l=4&s;if(this._drawSelected||(a=!1),(a||o||l)&&this._isUpdated(r)){var h,u=this.getSelectedColor(!0)||(h=this.getLayer())&&h.getSelectedColor(!0),c=e.appended(this.getGlobalMatrix(!0)),f=n/2;if(t.strokeStyle=t.fillStyle=u?u.toCanvasStyle(t):"#009dec",a&&this._drawSelected(t,c,i),l){var d=this.getPosition(!0),g=this._parent,p=g?g.localToGlobal(d):d,_=p.x,v=p.y;t.beginPath(),t.arc(_,v,f,0,2*Math.PI,!0),t.stroke();for(var m=[[0,-1],[1,0],[0,1],[-1,0]],y=f,x=n+1,b=0;b<4;b++){var w=m[b],C=w[0],S=w[1];t.moveTo(_+C*y,v+S*y),t.lineTo(_+C*x,v+S*x),t.stroke()}}if(o){var k=c._transformCorners(this.getInternalBounds());for(t.beginPath(),b=0;b<8;b++)t[b?"lineTo":"moveTo"](k[b],k[++b]);for(t.closePath(),t.stroke(),b=0;b<8;b++)t.fillRect(k[b]-f,k[++b]-f,n,n)}}},_canComposite:function(){return!1}},r.each(["down","drag","up","move"],function(t){this["removeOn"+r.capitalize(t)]=function(){var e={};return e[t]=!0,this.removeOn(e)}},{removeOn:function(t){for(var e in t)if(t[e]){var n="mouse"+e,i=this._project,r=i._removeSets=i._removeSets||{};r[n]=r[n]||{},r[n][this._id]=this}return this}}),{tween:function(t,e,n){n||(n=e,e=t,t=null,n||(n=e,e=null));var i=null!=n&&("number"==typeof n?n:n.duration),r=new Q(this,t,e,i,n&&n.easing,n&&n.start);return i&&this.on("frame",function t(e){r._handleFrame(1e3*e.time),r.running||this.off("frame",t)}),r},tweenTo:function(t,e){return this.tween(null,t,e)},tweenFrom:function(t,e){return this.tween(t,null,e)}}),b=x.extend({_class:"Group",_selectBounds:!1,_selectChildren:!0,_serializeFields:{children:[]},initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||this.addChildren(Array.isArray(t)?t:arguments)},_changed:function t(n){t.base.call(this,n),2050&n&&(this._clipItem=e)},_getClipItem:function(){var t=this._clipItem;if(t===e){t=null;for(var n=this._children,i=0,r=n.length;i<r;i++)if(n[i]._clipMask){t=n[i];break}this._clipItem=t}return t},isClipped:function(){return!!this._getClipItem()},setClipped:function(t){var e=this.getFirstChild();e&&e.setClipMask(t)},_getBounds:function t(e,n){var i=this._getClipItem();return i?i._getCachedBounds(e&&e.appended(i._matrix),r.set({},n,{stroke:!1})):t.base.call(this,e,n)},_hitTestChildren:function t(e,n,i){var r=this._getClipItem();return(!r||r.contains(e))&&t.base.call(this,e,n,i,r)},_draw:function(t,e){var n=e.clip,i=!n&&this._getClipItem();e=e.extend({clipItem:i,clip:!1}),n?(t.beginPath(),e.dontStart=e.dontFinish=!0):i&&i.draw(t,e.extend({clip:!0}));for(var r=this._children,s=0,a=r.length;s<a;s++){var o=r[s];o!==i&&o.draw(t,e)}}}),w=b.extend({_class:"Layer",initialize:function(){b.apply(this,arguments)},_getOwner:function(){return this._parent||null!=this._index&&this._project},isInserted:function t(){return this._parent?t.base.call(this):null!=this._index},activate:function(){this._project._activeLayer=this},_hitTestSelf:function(){}}),C=x.extend({_class:"Shape",_applyMatrix:!1,_canApplyMatrix:!1,_canScaleStroke:!0,_serializeFields:{type:null,size:null,radius:null},initialize:function(t,e){this._initialize(t,e)},_equals:function(t){return this._type===t._type&&this._size.equals(t._size)&&r.equals(this._radius,t._radius)},copyContent:function(t){this.setType(t._type),this.setSize(t._size),this.setRadius(t._radius)},getType:function(){return this._type},setType:function(t){this._type=t},getShape:"#getType",setShape:"#setType",getSize:function(){var t=this._size;return new g(t.width,t.height,this,"setSize")},setSize:function(){var t=d.read(arguments);if(this._size){if(!this._size.equals(t)){var e=this._type,n=t.width,i=t.height;"rectangle"===e?this._radius.set(d.min(this._radius,t.divide(2))):"circle"===e?(n=i=(n+i)/2,this._radius=n/2):"ellipse"===e&&this._radius._set(n/2,i/2),this._size._set(n,i),this._changed(9)}}else this._size=t.clone()},getRadius:function(){var t=this._radius;return"circle"===this._type?t:new g(t.width,t.height,this,"setRadius")},setRadius:function(t){var e=this._type;if("circle"===e){if(t===this._radius)return;var n=2*t;this._radius=t,this._size._set(n,n)}else if(t=d.read(arguments),this._radius){if(this._radius.equals(t))return;this._radius.set(t),"rectangle"===e?(n=d.max(this._size,t.multiply(2)),this._size.set(n)):"ellipse"===e&&this._size._set(2*t.width,2*t.height)}else this._radius=t.clone();this._changed(9)},isEmpty:function(){return!1},toPath:function(t){var n=new(I[r.capitalize(this._type)])({center:new c,size:this._size,radius:this._radius,insert:!1});return n.copyAttributes(this),st.settings.applyMatrix&&n.setApplyMatrix(!0),(t===e||t)&&n.insertAbove(this),n},toShape:"#clone",_asPathItem:function(){return this.toPath(!1)},_draw:function(t,e,n,i){var r=this._style,s=r.hasFill(),a=r.hasStroke(),o=e.dontFinish||e.clip,l=!i;if(s||a||o){var h=this._type,u=this._radius,c="circle"===h;if(e.dontStart||t.beginPath(),l&&c)t.arc(0,0,u,0,2*Math.PI,!0);else{var f=c?u:u.width,d=c?u:u.height,g=this._size,p=g.width,_=g.height;if(l&&"rectangle"===h&&0===f&&0===d)t.rect(-p/2,-_/2,p,_);else{var v=p/2,m=_/2,y=.44771525016920644,x=f*y,b=d*y,w=[-v,-m+d,-v,-m+b,-v+x,-m,-v+f,-m,v-f,-m,v-x,-m,v,-m+b,v,-m+d,v,m-d,v,m-b,v-x,m,v-f,m,-v+f,m,-v+x,m,-v,m-b,-v,m-d];i&&i.transform(w,w,32),t.moveTo(w[0],w[1]),t.bezierCurveTo(w[2],w[3],w[4],w[5],w[6],w[7]),v!==f&&t.lineTo(w[8],w[9]),t.bezierCurveTo(w[10],w[11],w[12],w[13],w[14],w[15]),m!==d&&t.lineTo(w[16],w[17]),t.bezierCurveTo(w[18],w[19],w[20],w[21],w[22],w[23]),v!==f&&t.lineTo(w[24],w[25]),t.bezierCurveTo(w[26],w[27],w[28],w[29],w[30],w[31])}}t.closePath()}o||!s&&!a||(this._setStyles(t,e,n),s&&(t.fill(r.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),a&&t.stroke())},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_getBounds:function(t,e){var n=new p(this._size).setCenter(0,0),i=this._style,r=e.stroke&&i.hasStroke()&&i.getStrokeWidth();return t&&(n=t._transformBounds(n)),r?n.expand(I._getStrokePadding(r,this._getStrokeMatrix(t,e))):n}},new function(){function t(t,e,n){var i=t._radius;if(!i.isZero())for(var r=t._size.divide(2),s=1;s<=4;s++){var a=new c(s>1&&s<4?-1:1,s>2?-1:1),o=a.multiply(r),l=o.subtract(a.multiply(i));if(new p(n?o.add(a.multiply(n)):o,l).contains(e))return{point:l,quadrant:s}}}function e(t,e,n,i){var r=t.divide(e);return(!i||r.isInQuadrant(i))&&r.subtract(r.normalize()).multiply(e).divide(n).length<=1}return{_contains:function e(n){if("rectangle"===this._type){var i=t(this,n);return i?n.subtract(i.point).divide(this._radius).getLength()<=1:e.base.call(this,n)}return n.divide(this.size).getLength()<=.5},_hitTestSelf:function n(i,r,s,a){var o=!1,l=this._style,h=r.stroke&&l.hasStroke(),u=r.fill&&l.hasFill();if(h||u){var c=this._type,f=this._radius,d=h?l.getStrokeWidth()/2:0,g=r._tolerancePadding.add(I._getStrokePadding(d,!l.getStrokeScaling()&&a));if("rectangle"===c){var _=g.multiply(2),v=t(this,i,_);if(v)o=e(i.subtract(v.point),f,g,v.quadrant);else{var m=new p(this._size).setCenter(0,0),y=m.expand(_),x=m.expand(_.negate());o=y._containsPoint(i)&&!x._containsPoint(i)}}else o=e(i,f,g)}return o?new T(h?"stroke":"fill",this):n.base.apply(this,arguments)}}},{statics:new function(){function t(t,e,n,i,s){var a=new C(r.getNamed(s),e);return a._type=t,a._size=n,a._radius=i,a}return{Circle:function(){var e=c.readNamed(arguments,"center"),n=r.readNamed(arguments,"radius");return t("circle",e,new d(2*n),n,arguments)},Rectangle:function(){var e=p.readNamed(arguments,"rectangle"),n=d.min(d.readNamed(arguments,"radius"),e.getSize(!0).divide(2));return t("rectangle",e.getCenter(!0),e.getSize(!0),n,arguments)},Ellipse:function(){var e=C._readEllipse(arguments),n=e.radius;return t("ellipse",e.center,n.multiply(2),n,arguments)},_readEllipse:function(t){var e,n;if(r.hasNamed(t,"radius"))e=c.readNamed(t,"center"),n=d.readNamed(t,"radius");else{var i=p.readNamed(t,"rectangle");e=i.getCenter(!0),n=i.getSize(!0).divide(2)}return{center:e,radius:n}}}}}),S=x.extend({_class:"Raster",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!1,handle:!1},_serializeFields:{crossOrigin:null,source:null},_prioritize:["crossOrigin"],_smoothing:!0,initialize:function(t,n){if(!this._initialize(t,n!==e&&c.read(arguments,1))){var r="string"==typeof t?i.getElementById(t):t;r?this.setImage(r):this.setSource(t)}this._size||(this._size=new d,this._loaded=!1)},_equals:function(t){return this.getSource()===t.getSource()},copyContent:function(t){var e=t._image,n=t._canvas;if(e)this._setImage(e);else if(n){var i=et.getCanvas(t._size);i.getContext("2d").drawImage(n,0,0),this._setImage(i)}this._crossOrigin=t._crossOrigin},getSize:function(){var t=this._size;return new g(t?t.width:0,t?t.height:0,this,"setSize")},setSize:function(){var t=d.read(arguments);if(!t.equals(this._size))if(t.width>0&&t.height>0){var e=this.getElement();this._setImage(et.getCanvas(t)),e&&this.getContext(!0).drawImage(e,0,0,t.width,t.height)}else this._canvas&&et.release(this._canvas),this._size=t.clone()},getWidth:function(){return this._size?this._size.width:0},setWidth:function(t){this.setSize(t,this.getHeight())},getHeight:function(){return this._size?this._size.height:0},setHeight:function(t){this.setSize(this.getWidth(),t)},getLoaded:function(){return this._loaded},isEmpty:function(){var t=this._size;return!t||0===t.width&&0===t.height},getResolution:function(){var t=this._matrix,e=new c(0,0).transform(t),n=new c(1,0).transform(t).subtract(e),i=new c(0,1).transform(t).subtract(e);return new d(72/n.getLength(),72/i.getLength())},getPpi:"#getResolution",getImage:function(){return this._image},setImage:function(t){function e(t){var e=n.getView(),i=t&&t.type||"load";e&&n.responds(i)&&(st=e._scope,n.emit(i,new $(t)))}var n=this;this._setImage(t),this._loaded?setTimeout(e,0):t&&H.add(t,{load:function(i){n._setImage(t),e(i)},error:e})},_setImage:function(t){this._canvas&&et.release(this._canvas),t&&t.getContext?(this._image=null,this._canvas=t,this._loaded=!0):(this._image=t,this._canvas=null,this._loaded=!!(t&&t.src&&t.complete)),this._size=new d(t?t.naturalWidth||t.width:0,t?t.naturalHeight||t.height:0),this._context=null,this._changed(1033)},getCanvas:function(){if(!this._canvas){var t=et.getContext(this._size);try{this._image&&t.drawImage(this._image,0,0),this._canvas=t.canvas}catch(e){et.release(t)}}return this._canvas},setCanvas:"#setImage",getContext:function(t){return this._context||(this._context=this.getCanvas().getContext("2d")),t&&(this._image=null,this._changed(1025)),this._context},setContext:function(t){this._context=t},getSource:function(){var t=this._image;return t&&t.src||this.toDataURL()},setSource:function(e){var n=new t.Image,i=this._crossOrigin;i&&(n.crossOrigin=i),n.src=e,this.setImage(n)},getCrossOrigin:function(){var t=this._image;return t&&t.crossOrigin||this._crossOrigin||""},setCrossOrigin:function(t){this._crossOrigin=t;var e=this._image;e&&(e.crossOrigin=t)},getSmoothing:function(){return this._smoothing},setSmoothing:function(t){this._smoothing=t,this._changed(257)},getElement:function(){return this._canvas||this._loaded&&this._image}},{beans:!1,getSubCanvas:function(){var t=p.read(arguments),e=et.getContext(t.getSize());return e.drawImage(this.getCanvas(),t.x,t.y,t.width,t.height,0,0,t.width,t.height),e.canvas},getSubRaster:function(){var t=p.read(arguments),e=new S(x.NO_INSERT);return e._setImage(this.getSubCanvas(t)),e.translate(t.getCenter().subtract(this.getSize().divide(2))),e._matrix.prepend(this._matrix),e.insertAbove(this),e},toDataURL:function(){var t=this._image,e=t&&t.src;if(/^data:/.test(e))return e;var n=this.getCanvas();return n?n.toDataURL.apply(n,arguments):null},drawImage:function(t){var e=c.read(arguments,1);this.getContext(!0).drawImage(t,e.x,e.y)},getAverageColor:function(t){var e,n;if(t?t instanceof R?(n=t,e=t.getBounds()):"object"==typeof t&&("width"in t?e=new p(t):"x"in t&&(e=new p(t.x-.5,t.y-.5,1,1))):e=this.getBounds(),!e)return null;var i=Math.min(e.width,32),s=Math.min(e.height,32),a=S._sampleContext;a?a.clearRect(0,0,33,33):a=S._sampleContext=et.getContext(new d(32)),a.save();var o=(new v).scale(i/e.width,s/e.height).translate(-e.x,-e.y);o.applyToContext(a),n&&n.draw(a,new r({clip:!0,matrices:[o]})),this._matrix.applyToContext(a);var l=this.getElement(),h=this._size;l&&a.drawImage(l,-h.width/2,-h.height/2),a.restore();for(var u=a.getImageData(.5,.5,Math.ceil(i),Math.ceil(s)).data,c=[0,0,0],f=0,g=0,_=u.length;g<_;g+=4){var m=u[g+3];f+=m,c[0]+=u[g]*(m/=255),c[1]+=u[g+1]*m,c[2]+=u[g+2]*m}for(g=0;g<3;g++)c[g]/=f;return f?D.read(c):null},getPixel:function(){var t=c.read(arguments),e=this.getContext().getImageData(t.x,t.y,1,1).data;return new D("rgb",[e[0]/255,e[1]/255,e[2]/255],e[3]/255)},setPixel:function(){var t=c.read(arguments),e=D.read(arguments),n=e._convert("rgb"),i=e._alpha,r=this.getContext(!0),s=r.createImageData(1,1),a=s.data;a[0]=255*n[0],a[1]=255*n[1],a[2]=255*n[2],a[3]=null!=i?255*i:255,r.putImageData(s,t.x,t.y)},createImageData:function(){var t=d.read(arguments);return this.getContext().createImageData(t.width,t.height)},getImageData:function(){var t=p.read(arguments);return t.isEmpty()&&(t=new p(this._size)),this.getContext().getImageData(t.x,t.y,t.width,t.height)},setImageData:function(t){var e=c.read(arguments,1);this.getContext(!0).putImageData(t,e.x,e.y)},_getBounds:function(t,e){var n=new p(this._size).setCenter(0,0);return t?t._transformBounds(n):n},_hitTestSelf:function(t){if(this._contains(t)){var e=this;return new T("pixel",e,{offset:t.add(e._size.divide(2)).round(),color:{get:function(){return e.getPixel(this.offset)}}})}},_draw:function(t,e,n){var i=this.getElement();i&&i.width>0&&i.height>0&&(t.globalAlpha=this._opacity,this._setStyles(t,e,n),V.setPrefixed(t,"imageSmoothingEnabled",this._smoothing),t.drawImage(i,-this._size.width/2,-this._size.height/2))},_canComposite:function(){return!0}}),k=x.extend({_class:"SymbolItem",_applyMatrix:!1,_canApplyMatrix:!1,_boundsOptions:{stroke:!0},_serializeFields:{symbol:null},initialize:function(t,n){this._initialize(t,n!==e&&c.read(arguments,1))||this.setDefinition(t instanceof A?t:new A(t))},_equals:function(t){return this._definition===t._definition},copyContent:function(t){this.setDefinition(t._definition)},getDefinition:function(){return this._definition},setDefinition:function(t){this._definition=t,this._changed(9)},getSymbol:"#getDefinition",setSymbol:"#setDefinition",isEmpty:function(){return this._definition._item.isEmpty()},_getBounds:function(t,e){var n=this._definition._item;return n._getCachedBounds(n._matrix.prepended(t),e)},_hitTestSelf:function(t,e,n){var i=this._definition._item._hitTest(t,e,n);return i&&(i.item=this),i},_draw:function(t,e){this._definition._item.draw(t,e)}}),A=r.extend({_class:"SymbolDefinition",initialize:function(t,e){this._id=u.get(),this.project=st.project,t&&this.setItem(t,e)},_serialize:function(t,e){return e.add(this,function(){return r.serialize([this._class,this._item],t,!1,e)})},_changed:function(t){8&t&&x._clearBoundsCache(this),1&t&&this.project._changed(t)},getItem:function(){return this._item},setItem:function(t,e){t._symbol&&(t=t.clone()),this._item&&(this._item._symbol=null),this._item=t,t.remove(),t.setSelected(!1),e||t.setPosition(new c),t._symbol=this,this._changed(9)},getDefinition:"#getItem",setDefinition:"#setItem",place:function(t){return new k(this,t)},clone:function(){return new A(this._item.clone(!1))},equals:function(t){return t===this||t&&this._item.equals(t._item)||!1}}),T=r.extend({_class:"HitResult",initialize:function(t,e,n){this.type=t,this.item=e,n&&this.inject(n)},statics:{getOptions:function(t){var e=t&&r.read(t);return r.set({type:null,tolerance:st.settings.hitTolerance,fill:!e,stroke:!e,segments:!e,handles:!1,ends:!1,position:!1,center:!1,bounds:!1,guides:!1,selected:!1},e)}}}),E=r.extend({_class:"Segment",beans:!0,_selection:0,initialize:function(t,n,i,r,s,a){var o,l,h,u,c=arguments.length;c>0&&(null==t||"object"==typeof t?1===c&&t&&"point"in t?(o=t.point,l=t.handleIn,h=t.handleOut,u=t.selection):(o=t,l=n,h=i,u=r):(o=[t,n],l=i!==e?[i,r]:null,h=s!==e?[s,a]:null)),new M(o,this,"_point"),new M(l,this,"_handleIn"),new M(h,this,"_handleOut"),u&&this.setSelection(u)},_serialize:function(t,e){var n=this._point,i=this._selection,s=i||this.hasHandles()?[n,this._handleIn,this._handleOut]:n;return i&&s.push(i),r.serialize(s,t,!0,e)},_changed:function(t){var e=this._path;if(e){var n,i=e._curves,r=this._index;i&&(t&&t!==this._point&&t!==this._handleIn||!(n=r>0?i[r-1]:e._closed?i[i.length-1]:null)||n._changed(),t&&t!==this._point&&t!==this._handleOut||!(n=i[r])||n._changed()),e._changed(41)}},getPoint:function(){return this._point},setPoint:function(){this._point.set(c.read(arguments))},getHandleIn:function(){return this._handleIn},setHandleIn:function(){this._handleIn.set(c.read(arguments))},getHandleOut:function(){return this._handleOut},setHandleOut:function(){this._handleOut.set(c.read(arguments))},hasHandles:function(){return!this._handleIn.isZero()||!this._handleOut.isZero()},isSmooth:function(){var t=this._handleIn,e=this._handleOut;return!t.isZero()&&!e.isZero()&&t.isCollinear(e)},clearHandles:function(){this._handleIn._set(0,0),this._handleOut._set(0,0)},getSelection:function(){return this._selection},setSelection:function(t){var e=this._selection,n=this._path;this._selection=t=t||0,n&&t!==e&&(n._updateSelection(this,e,t),n._changed(257))},_changeSelection:function(t,e){var n=this._selection;this.setSelection(e?n|t:n&~t)},isSelected:function(){return!!(7&this._selection)},setSelected:function(t){this._changeSelection(7,t)},getIndex:function(){return this._index!==e?this._index:null},getPath:function(){return this._path||null},getCurve:function(){var t=this._path,e=this._index;return t?(e>0&&!t._closed&&e===t._segments.length-1&&e--,t.getCurves()[e]||null):null},getLocation:function(){var t=this.getCurve();return t?new O(t,this===t._segment1?0:1):null},getNext:function(){var t=this._path&&this._path._segments;return t&&(t[this._index+1]||this._path._closed&&t[0])||null},smooth:function(t,n,i){var r=t||{},s=r.type,a=r.factor,o=this.getPrevious(),l=this.getNext(),h=(o||this)._point,u=this._point,f=(l||this)._point,d=h.getDistance(u),g=u.getDistance(f);if(s&&"catmull-rom"!==s){if("geometric"!==s)throw new Error("Smoothing method '"+s+"' not supported.");if(o&&l){var p=h.subtract(f),_=a===e?.4:a,v=_*d/(d+g);n||this.setHandleIn(p.multiply(v)),i||this.setHandleOut(p.multiply(v-_))}}else{var m,y=a===e?.5:a,x=Math.pow(d,y),b=x*x,w=Math.pow(g,y),C=w*w;if(!n&&o){var S=2*C+3*w*x+b;this.setHandleIn(0!=(m=3*w*(w+x))?new c((C*h._x+S*u._x-b*f._x)/m-u._x,(C*h._y+S*u._y-b*f._y)/m-u._y):new c)}!i&&l&&(S=2*b+3*x*w+C,this.setHandleOut(0!=(m=3*x*(x+w))?new c((b*f._x+S*u._x-C*h._x)/m-u._x,(b*f._y+S*u._y-C*h._y)/m-u._y):new c))}},getPrevious:function(){var t=this._path&&this._path._segments;return t&&(t[this._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._index},isLast:function(){var t=this._path;return t&&this._index===t._segments.length-1||!1},reverse:function(){var t=this._handleIn,e=this._handleOut,n=t.clone();t.set(e),e.set(n)},reversed:function(){return new E(this._point,this._handleOut,this._handleIn)},remove:function(){return!!this._path&&!!this._path.removeSegment(this._index)},clone:function(){return new E(this._point,this._handleIn,this._handleOut)},equals:function(t){return t===this||t&&this._class===t._class&&this._point.equals(t._point)&&this._handleIn.equals(t._handleIn)&&this._handleOut.equals(t._handleOut)||!1},toString:function(){var t=["point: "+this._point];return this._handleIn.isZero()||t.push("handleIn: "+this._handleIn),this._handleOut.isZero()||t.push("handleOut: "+this._handleOut),"{ "+t.join(", ")+" }"},transform:function(t){this._transformCoordinates(t,new Array(6),!0),this._changed()},interpolate:function(t,e,n){var i=1-n,r=n,s=t._point,a=e._point,o=t._handleIn,l=e._handleIn,h=e._handleOut,u=t._handleOut;this._point._set(i*s._x+r*a._x,i*s._y+r*a._y,!0),this._handleIn._set(i*o._x+r*l._x,i*o._y+r*l._y,!0),this._handleOut._set(i*u._x+r*h._x,i*u._y+r*h._y,!0),this._changed()},_transformCoordinates:function(t,e,n){var i=this._point,r=n&&this._handleIn.isZero()?null:this._handleIn,s=n&&this._handleOut.isZero()?null:this._handleOut,a=i._x,o=i._y,l=2;return e[0]=a,e[1]=o,r&&(e[l++]=r._x+a,e[l++]=r._y+o),s&&(e[l++]=s._x+a,e[l++]=s._y+o),t&&(t._transformCoordinates(e,e,l/2),a=e[0],o=e[1],n?(i._x=a,i._y=o,l=2,r&&(r._x=e[l++]-a,r._y=e[l++]-o),s&&(s._x=e[l++]-a,s._y=e[l++]-o)):(r||(e[l++]=a,e[l++]=o),s||(e[l++]=a,e[l++]=o))),e}}),M=c.extend({initialize:function(t,n,i){var r,s,a;if(t)if((r=t[0])!==e)s=t[1];else{var o=t;(r=o.x)===e&&(r=(o=c.read(arguments)).x),s=o.y,a=o.selected}else r=s=0;this._x=r,this._y=s,this._owner=n,n[i]=this,a&&this.setSelected(!0)},_set:function(t,e){return this._x=t,this._y=e,this._owner._changed(this),this},getX:function(){return this._x},setX:function(t){this._x=t,this._owner._changed(this)},getY:function(){return this._y},setY:function(t){this._y=t,this._owner._changed(this)},isZero:function(){var t=h.isZero;return t(this._x)&&t(this._y)},isSelected:function(){return!!(this._owner._selection&this._getSelection())},setSelected:function(t){this._owner._changeSelection(this._getSelection(),t)},_getSelection:function(){var t=this._owner;return this===t._point?1:this===t._handleIn?2:this===t._handleOut?4:0}}),P=r.extend({_class:"Curve",beans:!0,initialize:function(t,e,n,i,r,s,a,o){var l,h,u,c,f,d,g=arguments.length;3===g?(this._path=t,l=e,h=n):g?1===g?"segment1"in t?(l=new E(t.segment1),h=new E(t.segment2)):"point1"in t?(u=t.point1,f=t.handle1,d=t.handle2,c=t.point2):Array.isArray(t)&&(u=[t[0],t[1]],c=[t[6],t[7]],f=[t[2]-t[0],t[3]-t[1]],d=[t[4]-t[6],t[5]-t[7]]):2===g?(l=new E(t),h=new E(e)):4===g?(u=t,f=e,d=n,c=i):8===g&&(u=[t,e],c=[a,o],f=[n-t,i-e],d=[r-a,s-o]):(l=new E,h=new E),this._segment1=l||new E(u,null,f),this._segment2=h||new E(c,d,null)},_serialize:function(t,e){return r.serialize(this.hasHandles()?[this.getPoint1(),this.getHandle1(),this.getHandle2(),this.getPoint2()]:[this.getPoint1(),this.getPoint2()],t,!0,e)},_changed:function(){this._length=this._bounds=e},clone:function(){return new P(this._segment1,this._segment2)},toString:function(){var t=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||t.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||t.push("handle2: "+this._segment2._handleIn),t.push("point2: "+this._segment2._point),"{ "+t.join(", ")+" }"},classify:function(){return P.classify(this.getValues())},remove:function(){var t=!1;if(this._path){var e=this._segment2,n=e._handleOut;(t=e.remove())&&this._segment1._handleOut.set(n)}return t},getPoint1:function(){return this._segment1._point},setPoint1:function(){this._segment1._point.set(c.read(arguments))},getPoint2:function(){return this._segment2._point},setPoint2:function(){this._segment2._point.set(c.read(arguments))},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(){this._segment1._handleOut.set(c.read(arguments))},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(){this._segment2._handleIn.set(c.read(arguments))},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index+1]||this._path._closed&&t[0])||null},getPrevious:function(){var t=this._path&&this._path._curves;return t&&(t[this._segment1._index-1]||this._path._closed&&t[t.length-1])||null},isFirst:function(){return!this._segment1._index},isLast:function(){var t=this._path;return t&&this._segment1._index===t._curves.length-1||!1},isSelected:function(){return this.getPoint1().isSelected()&&this.getHandle1().isSelected()&&this.getHandle2().isSelected()&&this.getPoint2().isSelected()},setSelected:function(t){this.getPoint1().setSelected(t),this.getHandle1().setSelected(t),this.getHandle2().setSelected(t),this.getPoint2().setSelected(t)},getValues:function(t){return P.getValues(this._segment1,this._segment2,t)},getPoints:function(){for(var t=this.getValues(),e=[],n=0;n<8;n+=2)e.push(new c(t[n],t[n+1]));return e}},{getLength:function(){return null==this._length&&(this._length=P.getLength(this.getValues(),0,1)),this._length},getArea:function(){return P.getArea(this.getValues())},getLine:function(){return new m(this._segment1._point,this._segment2._point)},getPart:function(t,e){return new P(P.getPart(this.getValues(),t,e))},getPartLength:function(t,e){return P.getLength(this.getValues(),t,e)},divideAt:function(t){return this.divideAtTime(t&&t.curve===this?t.time:this.getTimeAt(t))},divideAtTime:function(t,e){var n=null;if(t>=1e-8&&t<=1-1e-8){var i=P.subdivide(this.getValues(),t),r=i[0],s=i[1],a=e||this.hasHandles(),o=this._segment1,l=this._segment2,h=this._path;a&&(o._handleOut._set(r[2]-r[0],r[3]-r[1]),l._handleIn._set(s[4]-s[6],s[5]-s[7]));var u=r[6],f=r[7],d=new E(new c(u,f),a&&new c(r[4]-u,r[5]-f),a&&new c(s[2]-u,s[3]-f));h?(h.insert(o._index+1,d),n=this.getNext()):(this._segment2=d,this._changed(),n=new P(d,l))}return n},splitAt:function(t){var e=this._path;return e?e.splitAt(t):null},splitAtTime:function(t){return this.splitAt(this.getLocationAtTime(t))},divide:function(t,n){return this.divideAtTime(t===e?.5:n?t:this.getTimeAt(t))},split:function(t,n){return this.splitAtTime(t===e?.5:n?t:this.getTimeAt(t))},reversed:function(){return new P(this._segment2.reversed(),this._segment1.reversed())},clearHandles:function(){this._segment1._handleOut._set(0,0),this._segment2._handleIn._set(0,0)},statics:{getValues:function(t,e,n,i){var r=t._point,s=t._handleOut,a=e._handleIn,o=e._point,l=r.x,h=r.y,u=o.x,c=o.y,f=i?[l,h,l,h,u,c,u,c]:[l,h,l+s._x,h+s._y,u+a._x,c+a._y,u,c];return n&&n._transformCoordinates(f,f,4),f},subdivide:function(t,n){var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],h=t[6],u=t[7];n===e&&(n=.5);var c=1-n,f=c*i+n*s,d=c*r+n*a,g=c*s+n*o,p=c*a+n*l,_=c*o+n*h,v=c*l+n*u,m=c*f+n*g,y=c*d+n*p,x=c*g+n*_,b=c*p+n*v,w=c*m+n*x,C=c*y+n*b;return[[i,r,f,d,m,y,w,C],[w,C,x,b,_,v,h,u]]},getMonoCurves:function(t,e){var n=[],i=e?0:1,r=t[i+0],s=t[i+2],a=t[i+4],o=t[i+6];if(r>=s==s>=a&&s>=a==a>=o||P.isStraight(t))n.push(t);else{var l=[],u=h.solveQuadratic(3*(s-a)-r+o,2*(r+a)-4*s,s-r,l,1e-8,1-1e-8);if(u){l.sort();var c=l[0],f=P.subdivide(t,c);n.push(f[0]),u>1&&(f=P.subdivide(f[1],c=(l[1]-c)/(1-c)),n.push(f[0])),n.push(f[1])}else n.push(t)}return n},solveCubic:function(t,e,n,i,r,s){var a=t[e],o=t[e+2],l=t[e+4],u=t[e+6],c=0;if(!(a<n&&u<n&&o<n&&l<n||a>n&&u>n&&o>n&&l>n)){var f=3*(o-a),d=3*(l-o)-f;c=h.solveCubic(u-a-f-d,d,f,a-n,i,r,s)}return c},getTimeOf:function(t,e){var n=new c(t[0],t[1]),i=new c(t[6],t[7]),r=1e-7;if(null===(e.isClose(n,1e-12)?0:e.isClose(i,1e-12)?1:null))for(var s=[e.x,e.y],a=[],o=0;o<2;o++)for(var l=P.solveCubic(t,o,s[o],a,0,1),h=0;h<l;h++){var u=a[h];if(e.isClose(P.getPoint(t,u),r))return u}return e.isClose(n,r)?0:e.isClose(i,r)?1:null},getNearestTime:function(t,e){function n(n){if(n>=0&&n<=1){var i=e.getDistance(P.getPoint(t,n),!0);if(i<h)return h=i,u=n,!0}}if(P.isStraight(t)){var i=t[0],r=t[1],s=t[6]-i,a=t[7]-r,o=s*s+a*a;if(0===o)return 0;var l=((e.x-i)*s+(e.y-r)*a)/o;return l<1e-12?0:l>.999999999999?1:P.getTimeOf(t,new c(i+l*s,r+l*a))}for(var h=1/0,u=0,f=0;f<=100;f++)n(f/100);for(var d=.005;d>1e-8;)n(u-d)||n(u+d)||(d/=2);return u},getPart:function(t,e,n){var i=e>n;if(i){var r=e;e=n,n=r}return e>0&&(t=P.subdivide(t,e)[1]),n<1&&(t=P.subdivide(t,(n-e)/(1-e))[0]),i?[t[6],t[7],t[4],t[5],t[2],t[3],t[0],t[1]]:t},isFlatEnough:function(t,e){var n=t[0],i=t[1],r=t[6],s=t[7],a=3*t[2]-2*n-r,o=3*t[3]-2*i-s,l=3*t[4]-2*r-n,h=3*t[5]-2*s-i;return Math.max(a*a,l*l)+Math.max(o*o,h*h)<=16*e*e},getArea:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=t[6],l=t[7];return 3*((l-n)*(i+s)-(o-e)*(r+a)+r*(e-s)-i*(n-a)+l*(s+e/3)-o*(a+n/3))/20},getBounds:function(t){for(var e=t.slice(0,2),n=e.slice(),i=[0,0],r=0;r<2;r++)P._addBounds(t[r],t[r+2],t[r+4],t[r+6],r,0,e,n,i);return new p(e[0],e[1],n[0]-e[0],n[1]-e[1])},_addBounds:function(t,e,n,i,r,s,a,o,l){function u(t,e){var n=t-e,i=t+e;n<a[r]&&(a[r]=n),i>o[r]&&(o[r]=i)}var c=a[r]-(s/=2),f=o[r]+s;if(t<c||e<c||n<c||i<c||t>f||e>f||n>f||i>f)if(e<t!=e<i&&n<t!=n<i)u(t,s),u(i,s);else{var d=h.solveQuadratic(3*(e-n)-t+i,2*(t+n)-4*e,e-t,l);u(i,0);for(var g=0;g<d;g++){var p=l[g],_=1-p;1e-8<=p&&p<=1-1e-8&&u(_*_*_*t+3*_*_*p*e+3*_*p*p*n+p*p*p*i,s)}}}}},r.each(["getBounds","getStrokeBounds","getHandleBounds"],function(t){this[t]=function(){this._bounds||(this._bounds={});var e=this._bounds[t];return e||(e=this._bounds[t]=I[t]([this._segment1,this._segment2],!1,this._path)),e.clone()}},{}),r.each({isStraight:function(t,e,n,i){if(e.isZero()&&n.isZero())return!0;var r=i.subtract(t);if(r.isZero())return!1;if(r.isCollinear(e)&&r.isCollinear(n)){var s=new m(t,i);if(s.getDistance(t.add(e))<1e-7&&s.getDistance(i.add(n))<1e-7){var a=r.dot(r),o=r.dot(e)/a,l=r.dot(n)/a;return o>=0&&o<=1&&l<=0&&l>=-1}}return!1},isLinear:function(t,e,n,i){var r=i.subtract(t).divide(3);return e.equals(r)&&n.negate().equals(r)}},function(t,e){this[e]=function(e){var n=this._segment1,i=this._segment2;return t(n._point,n._handleOut,i._handleIn,i._point,e)},this.statics[e]=function(e,n){var i=e[0],r=e[1],s=e[6],a=e[7];return t(new c(i,r),new c(e[2]-i,e[3]-r),new c(e[4]-s,e[5]-a),new c(s,a),n)}},{statics:{},hasHandles:function(){return!this._segment1._handleOut.isZero()||!this._segment2._handleIn.isZero()},hasLength:function(t){return(!this.getPoint1().equals(this.getPoint2())||this.hasHandles())&&this.getLength()>(t||0)},isCollinear:function(t){return t&&this.isStraight()&&t.isStraight()&&this.getLine().isCollinear(t.getLine())},isHorizontal:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).y)<1e-8},isVertical:function(){return this.isStraight()&&Math.abs(this.getTangentAtTime(.5).x)<1e-8}}),{beans:!1,getLocationAt:function(t,e){return this.getLocationAtTime(e?t:this.getTimeAt(t))},getLocationAtTime:function(t){return null!=t&&t>=0&&t<=1?new O(this,t):null},getTimeAt:function(t,e){return P.getTimeAt(this.getValues(),t,e)},getParameterAt:"#getTimeAt",getTimesWithTangent:function(){var t=c.read(arguments);return t.isZero()?[]:P.getTimesWithTangent(this.getValues(),t)},getOffsetAtTime:function(t){return this.getPartLength(0,t)},getLocationOf:function(){return this.getLocationAtTime(this.getTimeOf(c.read(arguments)))},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getTimeOf:function(){return P.getTimeOf(this.getValues(),c.read(arguments))},getParameterOf:"#getTimeOf",getNearestLocation:function(){var t=c.read(arguments),e=this.getValues(),n=P.getNearestTime(e,t),i=P.getPoint(e,n);return new O(this,n,i,null,t.getDistance(i))},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t}},new function(){var t=["getPoint","getTangent","getNormal","getWeightedTangent","getWeightedNormal","getCurvature"];return r.each(t,function(t){this[t+"At"]=function(e,n){var i=this.getValues();return P[t](i,n?e:P.getTimeAt(i,e))},this[t+"AtTime"]=function(e){return P[t](this.getValues(),e)}},{statics:{_evaluateMethods:t}})},new function(){function t(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=9*(i-s)+3*(t[6]-e),l=6*(e+s)-12*i,h=3*(i-e),u=9*(r-a)+3*(t[7]-n),c=6*(n+a)-12*r,f=3*(r-n);return function(t){var e=(o*t+l)*t+h,n=(u*t+c)*t+f;return Math.sqrt(e*e+n*n)}}function n(t,e){return Math.max(2,Math.min(16,Math.ceil(32*Math.abs(e-t))))}function i(t,e,n,i){if(null==e||e<0||e>1)return null;var r=t[0],s=t[1],a=t[2],o=t[3],l=t[4],u=t[5],f=t[6],d=t[7],g=h.isZero;g(a-r)&&g(o-s)&&(a=r,o=s),g(l-f)&&g(u-d)&&(l=f,u=d);var p,_,v=3*(a-r),m=3*(l-a)-v,y=f-r-v-m,x=3*(o-s),b=3*(u-o)-x,w=d-s-x-b;if(0===n)p=0===e?r:1===e?f:((y*e+m)*e+v)*e+r,_=0===e?s:1===e?d:((w*e+b)*e+x)*e+s;else{var C=1e-8,S=1-C;if(e<C?(p=v,_=x):e>S?(p=3*(f-l),_=3*(d-u)):(p=(3*y*e+2*m)*e+v,_=(3*w*e+2*b)*e+x),i){0===p&&0===_&&(e<C||e>S)&&(p=l-a,_=u-o);var k=Math.sqrt(p*p+_*_);k&&(p/=k,_/=k)}if(3===n){l=6*y*e+2*m,u=6*w*e+2*b;var A=Math.pow(p*p+_*_,1.5);p=0!==A?(p*u-_*l)/A:0,_=0}}return 2===n?new c(_,-p):new c(p,_)}return{statics:{classify:function(t){function n(t,n,i){var r=n!==e,s=r&&n>0&&n<1,a=r&&i>0&&i<1;return!r||(s||a)&&("loop"!==t||s&&a)||(t="arch",s=a=!1),{type:t,roots:s||a?s&&a?n<i?[n,i]:[i,n]:[s?n:i]:null}}var i=t[0],r=t[1],s=t[2],a=t[3],o=t[4],l=t[5],u=t[6],c=t[7],f=s*(r-c)+a*(u-i)+i*c-r*u,d=3*(o*(a-r)+l*(i-s)+s*r-a*i),g=d-f,p=g-f+(i*(c-l)+r*(o-u)+u*l-c*o),_=Math.sqrt(p*p+g*g+d*d),v=0!==_?1/_:0,m=h.isZero,y="serpentine";if(g*=v,d*=v,m(p*=v))return m(g)?n(m(d)?"line":"quadratic"):n(y,d/(3*g));var x=3*g*g-4*p*d;if(m(x))return n("cusp",g/(2*p));var b=x>0?Math.sqrt(x/3):Math.sqrt(-x),w=2*p;return n(x>0?y:"loop",(g+b)/w,(g-b)/w)},getLength:function(i,r,s,a){if(r===e&&(r=0),s===e&&(s=1),P.isStraight(i)){var o=i;s<1&&(o=P.subdivide(o,s)[0],r/=s),r>0&&(o=P.subdivide(o,r)[1]);var l=o[6]-o[0],u=o[7]-o[1];return Math.sqrt(l*l+u*u)}return h.integrate(a||t(i),r,s,n(r,s))},getTimeAt:function(i,r,s){if(s===e&&(s=r<0?1:0),0===r)return s;var a=Math.abs,o=r>0,l=o?s:0,u=o?1:s,c=t(i),f=P.getLength(i,l,u,c),d=a(r)-f;if(a(d)<1e-12)return o?u:l;if(d>1e-12)return null;var g=0;return h.findRoot(function(t){return g+=h.integrate(c,s,t,n(s,t)),s=t,g-r},c,s+r/f,l,u,32,1e-12)},getPoint:function(t,e){return i(t,e,0,!1)},getTangent:function(t,e){return i(t,e,1,!0)},getWeightedTangent:function(t,e){return i(t,e,1,!1)},getNormal:function(t,e){return i(t,e,2,!0)},getWeightedNormal:function(t,e){return i(t,e,2,!1)},getCurvature:function(t,e){return i(t,e,3,!1).x},getPeaks:function(t){var e=t[0],n=t[1],i=t[2],r=t[3],s=t[4],a=t[5],o=3*i-e-3*s+t[6],l=3*e-6*i+3*s,u=-3*e+3*i,c=3*r-n-3*a+t[7],f=3*n-6*r+3*a,d=-3*n+3*r,g=[];return h.solveCubic(9*(o*o+c*c),9*(o*l+f*c),2*(l*l+f*f)+3*(u*o+d*c),u*l+f*d,g,1e-8,1-1e-8),g.sort()}}}},new function(){function t(t,e,n,i,r,s,a){var o=!a&&n.getPrevious()===r,l=!a&&n!==r&&n.getNext()===r,h=1e-8,u=1-h;if(null!==i&&i>=(o?h:0)&&i<=(l?u:1)&&null!==s&&s>=(l?h:0)&&s<=(o?u:1)){var c=new O(n,i,null,a),f=new O(r,s,null,a);c._intersection=f,f._intersection=c,e&&!e(c)||O.insert(t,c,!0)}}function e(i,r,s,a,o,l,h,u,c,f,d,g,p){if(++c>=4096||++u>=40)return c;var _,v,y=r[0],x=r[1],b=r[6],w=r[7],C=m.getSignedDistance,S=C(y,x,b,w,r[2],r[3]),k=C(y,x,b,w,r[4],r[5]),A=S*k>0?.75:4/9,T=A*Math.min(0,S,k),E=A*Math.max(0,S,k),M=C(y,x,b,w,i[0],i[1]),O=C(y,x,b,w,i[2],i[3]),R=C(y,x,b,w,i[4],i[5]),I=C(y,x,b,w,i[6],i[7]),L=function(t,e,n,i){var r,s=[0,M],a=[1/3,O],o=[2/3,R],l=[1,I],h=O-(2*M+I)/3,u=R-(M+2*I)/3;if(h*u<0)r=[[s,a,l],[s,o,l]];else{var c=h/u;r=[c>=2?[s,a,l]:c<=.5?[s,o,l]:[s,a,o,l],[s,l]]}return(h||u)<0?r.reverse():r}(),F=L[0],N=L[1];if(0===S&&0===k&&0===M&&0===O&&0===R&&0===I||null==(_=n(F,N,T,E))||null==(v=n(F.reverse(),N.reverse(),T,E)))return c;var j=f+(d-f)*_,z=f+(d-f)*v;if(Math.max(p-g,z-j)<1e-9){var D=(j+z)/2,B=(g+p)/2;t(o,l,h?a:s,h?B:D,h?s:a,h?D:B)}else if(i=P.getPart(i,_,v),v-_>.8)if(z-j>p-g)c=e(r,(q=P.subdivide(i,.5))[0],a,s,o,l,!h,u,c,g,p,j,D=(j+z)/2),c=e(r,q[1],a,s,o,l,!h,u,c,g,p,D,z);else{var q;c=e((q=P.subdivide(r,.5))[0],i,a,s,o,l,!h,u,c,g,B=(g+p)/2,j,z),c=e(q[1],i,a,s,o,l,!h,u,c,B,p,j,z)}else c=p-g>=1e-9?e(r,i,a,s,o,l,!h,u,c,g,p,j,z):e(i,r,s,a,o,l,h,u,c,j,z,g,p);return c}function n(t,e,n,r){return t[0][1]<n?i(t,!0,n):e[0][1]>r?i(e,!1,r):t[0][0]}function i(t,e,n){for(var i=t[0][0],r=t[0][1],s=1,a=t.length;s<a;s++){var o=t[s][0],l=t[s][1];if(e?l>=n:l<=n)return l===n?o:i+(n-r)*(o-i)/(l-r);i=o,r=l}return null}function s(t,e,n,i,r){var s=h.isZero;if(s(i)&&s(r)){var a=P.getTimeOf(t,new c(e,n));return null===a?[]:[a]}for(var o=Math.atan2(-r,i),l=Math.sin(o),u=Math.cos(o),f=[],d=[],g=0;g<8;g+=2){var p=t[g]-e,_=t[g+1]-n;f.push(p*u-_*l,p*l+_*u)}return P.solveCubic(f,1,0,d,0,1),d}function a(e,n,i,r,a,o,l){for(var h=n[0],u=n[1],c=s(e,h,u,n[6]-h,n[7]-u),f=0,d=c.length;f<d;f++){var g=c[f],p=P.getPoint(e,g),_=P.getTimeOf(n,p);null!==_&&t(a,o,l?r:i,l?_:g,l?i:r,l?g:_)}}function o(e,n,i,r,s,a){var o=m.intersect(e[0],e[1],e[6],e[7],n[0],n[1],n[6],n[7]);o&&t(s,a,i,P.getTimeOf(e,o),r,P.getTimeOf(n,o))}function l(n,i,r,s,l,h){var u=1e-12,d=Math.min,g=Math.max;if(g(n[0],n[2],n[4],n[6])+u>d(i[0],i[2],i[4],i[6])&&d(n[0],n[2],n[4],n[6])-u<g(i[0],i[2],i[4],i[6])&&g(n[1],n[3],n[5],n[7])+u>d(i[1],i[3],i[5],i[7])&&d(n[1],n[3],n[5],n[7])-u<g(i[1],i[3],i[5],i[7])){var p=f(n,i);if(p)for(var _=0;_<2;_++){var v=p[_];t(l,h,r,v[0],s,v[1],!0)}else{var m=P.isStraight(n),y=P.isStraight(i),x=m&&y,b=m&&!y,w=l.length;if((x?o:m||y?a:e)(b?i:n,b?n:i,b?s:r,b?r:s,l,h,b,0,0,0,1,0,1),!x||l.length===w)for(_=0;_<4;_++){var C=_>>1,S=1&_,k=6*C,A=6*S,T=new c(n[k],n[k+1]),E=new c(i[A],i[A+1]);T.isClose(E,u)&&t(l,h,r,C,s,S)}}}return l}function u(e,n,i,r){var s=P.classify(e);if("loop"===s.type){var a=s.roots;t(i,r,n,a[0],n,a[1])}return i}function f(t,e){function n(t){var e=t[6]-t[0],n=t[7]-t[1];return e*e+n*n}var i=Math.abs,r=m.getDistance,s=1e-7,a=P.isStraight(t),o=P.isStraight(e),l=a&&o,h=n(t)<n(e),u=h?e:t,f=h?t:e,d=u[0],g=u[1],p=u[6]-d,_=u[7]-g;if(r(d,g,p,_,f[0],f[1],!0)<s&&r(d,g,p,_,f[6],f[7],!0)<s)!l&&r(d,g,p,_,u[2],u[3],!0)<s&&r(d,g,p,_,u[4],u[5],!0)<s&&r(d,g,p,_,f[2],f[3],!0)<s&&r(d,g,p,_,f[4],f[5],!0)<s&&(a=o=l=!0);else if(l)return null;if(a^o)return null;for(var v=[t,e],y=[],x=0;x<4&&y.length<2;x++){var b=1&x,w=1^b,C=x>>1,S=P.getTimeOf(v[b],new c(v[w][C?6:0],v[w][C?7:1]));if(null!=S){var k=b?[C,S]:[S,C];(!y.length||i(k[0]-y[0][0])>1e-8&&i(k[1]-y[0][1])>1e-8)&&y.push(k)}if(x>2&&!y.length)break}if(2!==y.length)y=null;else if(!l){var A=P.getPart(t,y[0][0],y[1][0]),T=P.getPart(e,y[0][1],y[1][1]);(i(T[2]-A[2])>s||i(T[3]-A[3])>s||i(T[4]-A[4])>s||i(T[5]-A[5])>s)&&(y=null)}return y}return{getIntersections:function(t){var e=this.getValues(),n=t&&t!==this&&t.getValues();return n?l(e,n,this,t,[]):u(e,this,[])},statics:{getOverlaps:f,getIntersections:function(t,e,n,i,s,a){var o=!e;o&&(e=t);for(var h,c,f=t.length,d=e.length,g=[],p=[],_=0;_<d;_++)g[_]=e[_].getValues(s);for(_=0;_<f;_++){var v=t[_],m=o?g[_]:v.getValues(i),y=v.getPath();y!==c&&(c=y,p.push(h=[])),o&&u(m,v,h,n);for(var x=o?_+1:0;x<d;x++){if(a&&h.length)return h;l(m,g[x],v,e[x],h,n)}}h=[],_=0;for(var b=p.length;_<b;_++)r.push(h,p[_]);return h},getCurveLineIntersections:s,getTimesWithTangent:function(t,e){var n=t[0],i=t[1],r=t[2],s=t[3],a=t[4],o=t[5],l=t[6],u=t[7],c=e.normalize(),f=c.x,d=c.y,g=3*l-9*a+9*r-3*n,p=3*u-9*o+9*s-3*i,_=6*a-12*r+6*n,v=6*o-12*s+6*i,m=3*r-3*n,y=3*s-3*i,x=2*g*d-2*p*f,b=[];if(Math.abs(x)<h.CURVETIME_EPSILON){if(0!=(x=g*v-p*_)){var w=-(g*y-p*m)/x;w>=0&&w<=1&&b.push(w)}}else{var C=(_*_-4*g*m)*d*d+(-2*_*v+4*p*m+4*g*y)*f*d+(v*v-4*p*y)*f*f,S=_*d-v*f;if(C>=0&&0!=x){var k=Math.sqrt(C),A=-(S+k)/x,T=(-S+k)/x;A>=0&&A<=1&&b.push(A),T>=0&&T<=1&&b.push(T)}}return b}}}}),O=r.extend({_class:"CurveLocation",initialize:function(t,e,n,i,r){if(e>=.99999999){var s=t.getNext();s&&(e=0,t=s)}this._setCurve(t),this._time=e,this._point=n||t.getPointAtTime(e),this._overlap=i,this._distance=r,this._intersection=this._next=this._previous=null},_setCurve:function(t){var e=t._path;this._path=e,this._version=e?e._version:0,this._curve=t,this._segment=null,this._segment1=t._segment1,this._segment2=t._segment2},_setSegment:function(t){this._setCurve(t.getCurve()),this._segment=t,this._time=t===this._segment1?0:1,this._point=t._point.clone()},getSegment:function(){var t=this._segment;if(!t){var e=this.getCurve(),n=this.getTime();0===n?t=e._segment1:1===n?t=e._segment2:null!=n&&(t=e.getPartLength(0,n)<e.getPartLength(n,1)?e._segment1:e._segment2),this._segment=t}return t},getCurve:function(){function t(t){var e=t&&t.getCurve();if(e&&null!=(n._time=e.getTimeOf(n._point)))return n._setCurve(e),e}var e=this._path,n=this;return e&&e._version!==this._version&&(this._time=this._offset=this._curveOffset=this._curve=null),this._curve||t(this._segment)||t(this._segment1)||t(this._segment2.getPrevious())},getPath:function(){var t=this.getCurve();return t&&t._path},getIndex:function(){var t=this.getCurve();return t&&t.getIndex()},getTime:function(){var t=this.getCurve(),e=this._time;return t&&null==e?this._time=t.getTimeOf(this._point):e},getParameter:"#getTime",getPoint:function(){return this._point},getOffset:function(){var t=this._offset;if(null==t){t=0;var e=this.getPath(),n=this.getIndex();if(e&&null!=n)for(var i=e.getCurves(),r=0;r<n;r++)t+=i[r].getLength();this._offset=t+=this.getCurveOffset()}return t},getCurveOffset:function(){var t=this._curveOffset;if(null==t){var e=this.getCurve(),n=this.getTime();this._curveOffset=t=null!=n&&e&&e.getPartLength(0,n)}return t},getIntersection:function(){return this._intersection},getDistance:function(){return this._distance},divide:function(){var t=this.getCurve(),e=t&&t.divideAtTime(this.getTime());return e&&this._setSegment(e._segment1),e},split:function(){var t=this.getCurve(),e=t._path,n=t&&t.splitAtTime(this.getTime());return n&&this._setSegment(e.getLastSegment()),n},equals:function(t,e){var n=this===t;if(!n&&t instanceof O){var i=this.getCurve(),r=t.getCurve(),s=i._path;if(s===r._path){var a=Math.abs,o=a(this.getOffset()-t.getOffset()),l=!e&&this._intersection,h=!e&&t._intersection;n=(o<1e-7||s&&a(s.getLength()-o)<1e-7)&&(!l&&!h||l&&h&&l.equals(h,!0))}}return n},toString:function(){var t=[],e=this.getPoint(),n=l.instance;e&&t.push("point: "+e);var i=this.getIndex();null!=i&&t.push("index: "+i);var r=this.getTime();return null!=r&&t.push("time: "+n.number(r)),null!=this._distance&&t.push("distance: "+n.number(this._distance)),"{ "+t.join(", ")+" }"},isTouching:function(){var t=this._intersection;if(t&&this.getTangent().isCollinear(t.getTangent())){var e=this.getCurve(),n=t.getCurve();return!(e.isStraight()&&n.isStraight()&&e.getLine().intersect(n.getLine()))}return!1},isCrossing:function(){function t(t,e){var n=t.getValues(),i=P.classify(n).roots||P.getPeaks(n),r=i.length,s=e&&r>1?i[r-1]:r>0?i[0]:.5;d.push(P.getLength(n,e?s:0,e?1:s)/2)}function e(t,e,n){return e<n?t>e&&t<n:t>e||t<n}var n=this._intersection;if(!n)return!1;var i=this.getTime(),r=n.getTime(),s=1e-8,a=1-s,o=i>=s&&i<=a,l=r>=s&&r<=a;if(o&&l)return!this.isTouching();var h=this.getCurve(),u=i<s?h.getPrevious():h,c=n.getCurve(),f=r<s?c.getPrevious():c;if(i>a&&(h=h.getNext()),r>a&&(c=c.getNext()),!(u&&h&&f&&c))return!1;var d=[];o||(t(u,!0),t(h,!1)),l||(t(f,!0),t(c,!1));var g=this.getPoint(),p=Math.min.apply(Math,d),_=o?h.getTangentAtTime(i):h.getPointAt(p).subtract(g),v=o?_.negate():u.getPointAt(-p).subtract(g),m=l?c.getTangentAtTime(r):c.getPointAt(p).subtract(g),y=l?m.negate():f.getPointAt(-p).subtract(g),x=v.getAngle(),b=_.getAngle(),w=y.getAngle(),C=m.getAngle();return!!(o?e(x,w,C)^e(b,w,C)&&e(x,C,w)^e(b,C,w):e(w,x,b)^e(C,x,b)&&e(w,b,x)^e(C,b,x))},hasOverlap:function(){return!!this._overlap}},r.each(P._evaluateMethods,function(t){var e=t+"At";this[t]=function(){var t=this.getCurve(),n=this.getTime();return null!=n&&t&&t[e](n,!0)}},{preserve:!0}),new function(){function t(t,e,n){function i(n,i){for(var s=n+i;s>=-1&&s<=r;s+=i){var a=t[(s%r+r)%r];if(!e.getPoint().isClose(a.getPoint(),1e-7))break;if(e.equals(a))return a}return null}for(var r=t.length,s=0,a=r-1;s<=a;){var o,l=s+a>>>1,h=t[l];if(n&&(o=e.equals(h)?h:i(l,-1)||i(l,1)))return e._overlap&&(o._overlap=o._intersection._overlap=!0),o;var u=e.getPath(),c=h.getPath();(u!==c?u._id-c._id:e.getIndex()+e.getTime()-(h.getIndex()+h.getTime()))<0?a=l-1:s=l+1}return t.splice(s,0,e),e}return{statics:{insert:t,expand:function(e){for(var n=e.slice(),i=e.length-1;i>=0;i--)t(n,e[i]._intersection,!1);return n}}}}),R=x.extend({_class:"PathItem",_selectBounds:!1,_canScaleStroke:!0,beans:!0,initialize:function(){},statics:{create:function(t){var e,n,i;if(r.isPlainObject(t)?(n=t.segments,e=t.pathData):Array.isArray(t)?n=t:"string"==typeof t&&(e=t),n){var s=n[0];i=s&&Array.isArray(s[0])}else e&&(i=(e.match(/m/gi)||[]).length>1||/z\s*\S+/i.test(e));return new(i?L:I)(t)}},_asPathItem:function(){return this},isClockwise:function(){return this.getArea()>=0},setClockwise:function(t){this.isClockwise()!=(t=!!t)&&this.reverse()},setPathData:function(t){function e(t,e){var n=+i[t];return o&&(n+=l[e]),n}function n(t){return new c(e(t,"x"),e(t+1,"y"))}var i,r,s,a=t&&t.match(/[mlhvcsqtaz][^mlhvcsqtaz]*/gi),o=!1,l=new c,h=new c;this.clear();for(var u=0,f=a&&a.length;u<f;u++){var g=a[u],p=g[0],_=p.toLowerCase(),v=(i=g.match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g))&&i.length;switch(o=p===_,"z"!==r||/[mz]/.test(_)||this.moveTo(l),_){case"m":case"l":for(var m="m"===_,y=0;y<v;y+=2)this[m?"moveTo":"lineTo"](l=n(y)),m&&(h=l,m=!1);s=l;break;case"h":case"v":var x="h"===_?"x":"y";for(l=l.clone(),y=0;y<v;y++)l[x]=e(y,x),this.lineTo(l);s=l;break;case"c":for(y=0;y<v;y+=6)this.cubicCurveTo(n(y),s=n(y+2),l=n(y+4));break;case"s":for(y=0;y<v;y+=4)this.cubicCurveTo(/[cs]/.test(r)?l.multiply(2).subtract(s):l,s=n(y),l=n(y+2)),r=_;break;case"q":for(y=0;y<v;y+=4)this.quadraticCurveTo(s=n(y),l=n(y+2));break;case"t":for(y=0;y<v;y+=2)this.quadraticCurveTo(s=/[qt]/.test(r)?l.multiply(2).subtract(s):l,l=n(y)),r=_;break;case"a":for(y=0;y<v;y+=7)this.arcTo(l=n(y+5),new d(+i[y],+i[y+1]),+i[y+2],+i[y+4],+i[y+3]);break;case"z":this.closePath(1e-12),l=h}r=_}},_canComposite:function(){return!(this.hasFill()&&this.hasStroke())},_contains:function(t){var e=t.isInside(this.getBounds({internal:!0,handle:!0}))?this._getWinding(t):{};return e.onPath||!!("evenodd"===this.getFillRule()?1&e.windingL||1&e.windingR:e.winding)},getIntersections:function(t,e,n,i){var r=this===t||!t,s=this._matrix._orNullIfIdentity(),a=r?s:(n||t._matrix)._orNullIfIdentity();return r||this.getBounds(s).intersects(t.getBounds(a),1e-12)?P.getIntersections(this.getCurves(),!r&&t.getCurves(),e,s,a,i):[]},getCrossings:function(t){return this.getIntersections(t,function(t){return t.hasOverlap()||t.isCrossing()})},getNearestLocation:function(){for(var t=c.read(arguments),e=this.getCurves(),n=1/0,i=null,r=0,s=e.length;r<s;r++){var a=e[r].getNearestLocation(t);a._distance<n&&(n=a._distance,i=a)}return i},getNearestPoint:function(){var t=this.getNearestLocation.apply(this,arguments);return t?t.getPoint():t},interpolate:function(t,e,n){var i=!this._children,r=i?"_segments":"_children",s=t[r],a=e[r],o=this[r];if(!s||!a||s.length!==a.length)throw new Error("Invalid operands in interpolate() call: "+t+", "+e);var l=o.length,h=a.length;if(l<h)for(var u=i?E:I,c=l;c<h;c++)this.add(new u);else l>h&&this[i?"removeSegments":"removeChildren"](h,l);for(c=0;c<h;c++)o[c].interpolate(s[c],a[c],n);i&&(this.setClosed(t._closed),this._changed(9))},compare:function(t){var e=!1;if(t){var n=this._children||[this],i=t._children?t._children.slice():[t],r=i.length,s=[],a=0;e=!0;for(var o=n.length-1;o>=0&&e;o--){var l=n[o];e=!1;for(var h=r-1;h>=0&&!e;h--)l.compare(i[h])&&(s[h]||(s[h]=!0,a++),e=!0)}e=e&&a===r}return e}}),I=R.extend({_class:"Path",_serializeFields:{segments:[],closed:!1},initialize:function(t){this._closed=!1,this._segments=[],this._version=0;var n=Array.isArray(t)?"object"==typeof t[0]?t:arguments:!t||t.size!==e||t.x===e&&t.point===e?null:arguments;n&&n.length>0?this.setSegments(n):(this._curves=e,this._segmentSelection=0,n||"string"!=typeof t||(this.setPathData(t),t=null)),this._initialize(!n&&t)},_equals:function(t){return this._closed===t._closed&&r.equals(this._segments,t._segments)},copyContent:function(t){this.setSegments(t._segments),this._closed=t._closed},_changed:function t(n){if(t.base.call(this,n),8&n){if(this._length=this._area=e,32&n)this._version++;else if(this._curves)for(var i=0,r=this._curves.length;i<r;i++)this._curves[i]._changed()}else 64&n&&(this._bounds=e)},getStyle:function(){var t=this._parent;return(t instanceof L?t:this)._style},getSegments:function(){return this._segments},setSegments:function(t){var n=this.isFullySelected(),i=t&&t.length;if(this._segments.length=0,this._segmentSelection=0,this._curves=e,i){var r=t[i-1];"boolean"==typeof r&&(this.setClosed(r),i--),this._add(E.readList(t,0,{},i))}n&&this.setFullySelected(!0)},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){var t=this._curves,e=this._segments;if(!t){var n=this._countCurves();t=this._curves=new Array(n);for(var i=0;i<n;i++)t[i]=new P(this,e[i],e[i+1]||e[0])}return t},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var t=this.getCurves();return t[t.length-1]},isClosed:function(){return this._closed},setClosed:function(t){if(this._closed!=(t=!!t)){if(this._closed=t,this._curves){var e=this._curves.length=this._countCurves();t&&(this._curves[e-1]=new P(this,this._segments[e-1],this._segments[0]))}this._changed(41)}}},{beans:!0,getPathData:function(t,e){function n(e,n){if(e._transformCoordinates(t,p),i=p[0],r=p[1],_)v.push("M"+g.pair(i,r)),_=!1;else if(h=p[3],(o=p[2])===i&&h===r&&u===s&&c===a){if(!n){var l=i-s,f=r-a;v.push(0===l?"v"+g.number(f):0===f?"h"+g.number(l):"l"+g.pair(l,f))}}else v.push("c"+g.pair(u-s,c-a)+" "+g.pair(o-s,h-a)+" "+g.pair(i-s,r-a));s=i,a=r,u=p[4],c=p[5]}var i,r,s,a,o,h,u,c,f=this._segments,d=f.length,g=new l(e),p=new Array(6),_=!0,v=[];if(!d)return"";for(var m=0;m<d;m++)n(f[m]);return this._closed&&d>0&&(n(f[0],!0),v.push("z")),v.join("")},isEmpty:function(){return!this._segments.length},_transformContent:function(t){for(var e=this._segments,n=new Array(6),i=0,r=e.length;i<r;i++)e[i]._transformCoordinates(t,n,!0);return!0},_add:function(t,e){for(var n=this._segments,i=this._curves,s=t.length,a=null==e,o=(e=a?n.length:e,0);o<s;o++){var l=t[o];l._path&&(l=t[o]=l.clone()),l._path=this,l._index=e+o,l._selection&&this._updateSelection(l,0,l._selection)}if(a)r.push(n,t);else{n.splice.apply(n,[e,0].concat(t)),o=e+s;for(var h=n.length;o<h;o++)n[o]._index=o}if(i){var u=this._countCurves(),c=e>0&&e+s-1===u?e-1:e,f=c,d=Math.min(c+s,u);for(t._curves&&(i.splice.apply(i,[c,0].concat(t._curves)),f+=t._curves.length),o=f;o<d;o++)i.splice(o,0,new P(this,null,null));this._adjustCurves(c,d)}return this._changed(41),t},_adjustCurves:function(t,e){for(var n,i=this._segments,r=this._curves,s=t;s<e;s++)(n=r[s])._path=this,n._segment1=i[s],n._segment2=i[s+1]||i[0],n._changed();(n=r[this._closed&&!t?i.length-1:t-1])&&(n._segment2=i[t]||i[0],n._changed()),(n=r[e])&&(n._segment1=i[e],n._changed())},_countCurves:function(){var t=this._segments.length;return!this._closed&&t>0?t-1:t},add:function(t){return arguments.length>1&&"number"!=typeof t?this._add(E.readList(arguments)):this._add([E.read(arguments)])[0]},insert:function(t,e){return arguments.length>2&&"number"!=typeof e?this._add(E.readList(arguments,1),t):this._add([E.read(arguments,1)],t)[0]},addSegment:function(){return this._add([E.read(arguments)])[0]},insertSegment:function(t){return this._add([E.read(arguments,1)],t)[0]},addSegments:function(t){return this._add(E.readList(t))},insertSegments:function(t,e){return this._add(E.readList(e),t)},removeSegment:function(t){return this.removeSegments(t,t+1)[0]||null},removeSegments:function(t,e,n){t=t||0,e=r.pick(e,this._segments.length);var i=this._segments,s=this._curves,a=i.length,o=i.splice(t,e-t),l=o.length;if(!l)return o;for(var h=0;h<l;h++){var u=o[h];u._selection&&this._updateSelection(u,u._selection,0),u._index=u._path=null}h=t;for(var c=i.length;h<c;h++)i[h]._index=h;if(s){var f=t>0&&e===a+(this._closed?1:0)?t-1:t;for(h=(s=s.splice(f,l)).length-1;h>=0;h--)s[h]._path=null;n&&(o._curves=s.slice(1)),this._adjustCurves(f,f)}return this._changed(41),o},clear:"#removeSegments",hasHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)if(t[e].hasHandles())return!0;return!1},clearHandles:function(){for(var t=this._segments,e=0,n=t.length;e<n;e++)t[e].clearHandles()},getLength:function(){if(null==this._length){for(var t=this.getCurves(),e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();this._length=e}return this._length},getArea:function(){var t=this._area;if(null==t){var e=this._segments,n=this._closed;t=0;for(var i=0,r=e.length;i<r;i++){var s=i+1===r;t+=P.getArea(P.getValues(e[i],e[s?0:i+1],null,s&&!n))}this._area=t}return t},isFullySelected:function(){var t=this._segments.length;return this.isSelected()&&t>0&&this._segmentSelection===7*t},setFullySelected:function(t){t&&this._selectSegments(!0),this.setSelected(t)},setSelection:function t(e){1&e||this._selectSegments(!1),t.base.call(this,e)},_selectSegments:function(t){var e=this._segments,n=e.length,i=t?7:0;this._segmentSelection=i*n;for(var r=0;r<n;r++)e[r]._selection=i},_updateSelection:function(t,e,n){t._selection=n,(this._segmentSelection+=n-e)>0&&this.setSelected(!0)},divideAt:function(t){var e,n=this.getLocationAt(t);return n&&(e=n.getCurve().divideAt(n.getCurveOffset()))?e._segment1:null},splitAt:function(t){var e=this.getLocationAt(t),n=e&&e.index,i=e&&e.time;i>1-1e-8&&(n++,i=0);var r=this.getCurves();if(n>=0&&n<r.length){i>=1e-8&&r[n++].divideAtTime(i);var s,a=this.removeSegments(n,this._segments.length,!0);return this._closed?(this.setClosed(!1),s=this):((s=new I(x.NO_INSERT)).insertAbove(this),s.copyAttributes(this)),s._add(a,0),this.addSegment(a[0]),s}return null},split:function(t,n){var i,r=n===e?t:(i=this.getCurves()[t])&&i.getLocationAtTime(n);return null!=r?this.splitAt(r):null},join:function(t,e){var n=e||0;if(t&&t!==this){var i=t._segments,r=this.getLastSegment(),s=t.getLastSegment();if(!s)return this;r&&r._point.isClose(s._point,n)&&t.reverse();var a=t.getFirstSegment();if(r&&r._point.isClose(a._point,n))r.setHandleOut(a._handleOut),this._add(i.slice(1));else{var o=this.getFirstSegment();o&&o._point.isClose(a._point,n)&&t.reverse(),s=t.getLastSegment(),o&&o._point.isClose(s._point,n)?(o.setHandleIn(s._handleIn),this._add(i.slice(0,i.length-1),0)):this._add(i.slice())}t._closed&&this._add([i[0]]),t.remove()}var l=this.getFirstSegment(),h=this.getLastSegment();return l!==h&&l._point.isClose(h._point,n)&&(l.setHandleIn(h._handleIn),h.remove(),this.setClosed(!0)),this},reduce:function(t){for(var e=this.getCurves(),n=t&&t.simplify,i=n?1e-7:0,r=e.length-1;r>=0;r--){var s=e[r];!s.hasHandles()&&(!s.hasLength(i)||n&&s.isCollinear(s.getNext()))&&s.remove()}return this},reverse:function(){this._segments.reverse();for(var t=0,e=this._segments.length;t<e;t++){var n=this._segments[t],i=n._handleIn;n._handleIn=n._handleOut,n._handleOut=i,n._index=t}this._curves=null,this._changed(9)},flatten:function(t){for(var e=new F(this,t||.25,256,!0).parts,n=e.length,i=[],r=0;r<n;r++)i.push(new E(e[r].curve.slice(0,2)));!this._closed&&n>0&&i.push(new E(e[n-1].curve.slice(6))),this.setSegments(i)},simplify:function(t){var e=new N(this).fit(t||2.5);return e&&this.setSegments(e),!!e},smooth:function(t){function n(t,e){var n=t&&t.index;if(null!=n){var r=t.path;if(r&&r!==i)throw new Error(t._class+" "+n+" of "+r+" is not part of "+i);e&&t instanceof P&&n++}else n="number"==typeof t?t:e;return Math.min(n<0&&l?n%o:n<0?n+o:n,o-1)}var i=this,r=t||{},s=r.type||"asymmetric",a=this._segments,o=a.length,l=this._closed,h=l&&r.from===e&&r.to===e,u=n(r.from,0),c=n(r.to,o-1);if(u>c)if(l)u-=o;else{var f=u;u=c,c=f}if(/^(?:asymmetric|continuous)$/.test(s)){var d="asymmetric"===s,g=Math.min,p=c-u+1,_=p-1,v=h?g(p,4):1,m=v,y=v,x=[];if(l||(m=g(1,u),y=g(1,o-c-1)),(_+=m+y)<=1)return;for(var b=0,w=u-m;b<=_;b++,w++)x[b]=a[(w<0?w+o:w)%o]._point;var C=x[0]._x+2*x[1]._x,S=x[0]._y+2*x[1]._y,k=2,A=_-1,T=[C],E=[S],M=[k],O=[],R=[];for(b=1;b<_;b++){var I=b<A,L=I?4:d?3:8,F=I?2:d?0:1,N=(I?1:d?1:2)/k;k=M[b]=(I?4:d?2:7)-N,C=T[b]=L*x[b]._x+F*x[b+1]._x-N*C,S=E[b]=L*x[b]._y+F*x[b+1]._y-N*S}for(O[A]=T[A]/M[A],R[A]=E[A]/M[A],b=_-2;b>=0;b--)O[b]=(T[b]-O[b+1])/M[b],R[b]=(E[b]-R[b+1])/M[b];O[_]=(3*x[_]._x-O[A])/2,R[_]=(3*x[_]._y-R[A])/2,b=m;var j=_-y;for(w=u;b<=j;b++,w++){var z=a[w<0?w+o:w],D=z._point,B=O[b]-D._x,q=R[b]-D._y;(h||b<j)&&z.setHandleOut(B,q),(h||b>m)&&z.setHandleIn(-B,-q)}}else for(b=u;b<=c;b++)a[b<0?b+o:b].smooth(r,!h&&b===u,!h&&b===c)},toShape:function(t){function n(t,e){var n=u[t],i=n.getNext(),r=u[e],s=r.getNext();return n._handleOut.isZero()&&i._handleIn.isZero()&&r._handleOut.isZero()&&s._handleIn.isZero()&&i._point.subtract(n._point).isCollinear(s._point.subtract(r._point))}function i(t){var e=u[t],n=e.getNext(),i=e._handleOut,r=n._handleIn,s=.5522847498307936;if(i.isOrthogonal(r)){var a=e._point,o=n._point,l=new m(a,i,!0).intersect(new m(o,r,!0),!0);return l&&h.isZero(i.getLength()/l.subtract(a).getLength()-s)&&h.isZero(r.getLength()/l.subtract(o).getLength()-s)}return!1}function r(t,e){return u[t]._point.getDistance(u[e]._point)}if(!this._closed)return null;var s,a,o,l,u=this._segments;if(!this.hasHandles()&&4===u.length&&n(0,2)&&n(1,3)&&function(t){var e=u[1],n=e.getPrevious(),i=e.getNext();return n._handleOut.isZero()&&e._handleIn.isZero()&&e._handleOut.isZero()&&i._handleIn.isZero()&&e._point.subtract(n._point).isOrthogonal(i._point.subtract(e._point))}()?(s=C.Rectangle,a=new d(r(0,3),r(0,1)),l=u[1]._point.add(u[2]._point).divide(2)):8===u.length&&i(0)&&i(2)&&i(4)&&i(6)&&n(1,5)&&n(3,7)?(s=C.Rectangle,o=(a=new d(r(1,6),r(0,3))).subtract(new d(r(0,7),r(1,2))).divide(2),l=u[3]._point.add(u[4]._point).divide(2)):4===u.length&&i(0)&&i(1)&&i(2)&&i(3)&&(h.isZero(r(0,2)-r(1,3))?(s=C.Circle,o=r(0,2)/2):(s=C.Ellipse,o=new d(r(2,0)/2,r(3,1)/2)),l=u[1]._point),s){var c=this.getPosition(!0),f=new s({center:c,size:a,radius:o,insert:!1});return f.copyAttributes(this,!0),f._matrix.prepend(this._matrix),f.rotate(l.subtract(c).getAngle()+90),(t===e||t)&&f.insertAbove(this),f}return null},toPath:"#clone",compare:function t(e){if(!e||e instanceof L)return t.base.call(this,e);var n=this.getCurves(),i=e.getCurves(),r=n.length,s=i.length;if(!r||!s)return r==s;for(var a,o,l=n[0].getValues(),h=[],u=0,c=0,f=0;f<s;f++){var d=i[f].getValues();if(h.push(d),_=P.getOverlaps(l,d)){a=!f&&_[0][0]>0?s-1:f,o=_[0][1];break}}var g,p=Math.abs;for(d=h[a];l&&d;){var _;if((_=P.getOverlaps(l,d))&&p(_[0][0]-c)<1e-8){1===(c=_[1][0])&&(l=++u<r?n[u].getValues():null,c=0);var v=_[0][1];if(p(v-o)<1e-8){if(g||(g=[a,v]),1===(o=_[1][1])&&(++a>=s&&(a=0),d=h[a]||i[a].getValues(),o=0),!l)return g[0]===a&&g[1]===o;continue}}break}return!1},_hitTestSelf:function(t,e,n,i){function r(e,n){return t.subtract(e).divide(n).length<=1}function s(t,n,i){if(!e.selected||n.isSelected()){var s=t._point;if(n!==s&&(n=n.add(s)),r(n,b))return new T(i,p,{segment:t,point:n})}}function a(t,n){return(n||e.segments)&&s(t,t._point,"segment")||!n&&e.handles&&(s(t,t._handleIn,"handle-in")||s(t,t._handleOut,"handle-out"))}function o(t){f.add(t)}function l(e){var n,s=y||e._index>0&&e._index<m-1;return"round"===(s?h:u)?r(e._point,b):(f=new I({internal:!0,closed:!0}),s?e.isSmooth()||I._addBevelJoin(e,h,k,c,null,i,o,!0):"square"===u&&I._addSquareCap(e,u,k,null,i,o,!0),f.isEmpty()?void 0:f.contains(t)||(n=f.getNearestLocation(t))&&r(n.getPoint(),x))}var h,u,c,f,d,g,p=this,_=this.getStyle(),v=this._segments,m=v.length,y=this._closed,x=e._tolerancePadding,b=x,w=e.stroke&&_.hasStroke(),C=e.fill&&_.hasFill(),S=e.curves,k=w?_.getStrokeWidth()/2:C&&e.tolerance>0||S?0:null;if(null!==k&&(k>0?(h=_.getStrokeJoin(),u=_.getStrokeCap(),c=_.getMiterLimit(),b=b.add(I._getStrokePadding(k,i))):h=u="round"),!e.ends||e.segments||y){if(e.segments||e.handles)for(var A=0;A<m;A++)if(g=a(v[A]))return g}else if(g=a(v[0],!0)||a(v[m-1],!0))return g;if(null!==k){if(d=this.getNearestLocation(t)){var E=d.getTime();0===E||1===E&&m>1?l(d.getSegment())||(d=null):r(d.getPoint(),b)||(d=null)}if(!d&&"miter"===h&&m>1)for(A=0;A<m;A++){var M=v[A];if(t.getDistance(M._point)<=c*k&&l(M)){d=M.getLocation();break}}}return!d&&C&&this._contains(t)||d&&!w&&!S?new T("fill",this):d?new T(w?"stroke":"curve",this,{location:d,point:d.getPoint()}):null}},r.each(P._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this.getLocationAt(e);return n&&n[t]()}},{beans:!1,getLocationOf:function(){for(var t=c.read(arguments),e=this.getCurves(),n=0,i=e.length;n<i;n++){var r=e[n].getLocationOf(t);if(r)return r}return null},getOffsetOf:function(){var t=this.getLocationOf.apply(this,arguments);return t?t.getOffset():null},getLocationAt:function(t){if("number"==typeof t){for(var e=this.getCurves(),n=0,i=0,r=e.length;i<r;i++){var s=n,a=e[i];if((n+=a.getLength())>t)return a.getLocationAt(t-s)}if(e.length>0&&t<=this.getLength())return new O(e[e.length-1],1)}else if(t&&t.getPath&&t.getPath()===this)return t;return null},getOffsetsWithTangent:function(){var t=c.read(arguments);if(t.isZero())return[];for(var e=[],n=0,i=this.getCurves(),r=0,s=i.length;r<s;r++){for(var a=i[r],o=a.getTimesWithTangent(t),l=0,h=o.length;l<h;l++){var u=n+a.getOffsetAtTime(o[l]);e.indexOf(u)<0&&e.push(u)}n+=a.length}return e}}),new function(){function t(t,e,n){function i(e){if(n)e._transformCoordinates(n,g),r=g[0],s=g[1];else{var i=e._point;r=i._x,s=i._y}var f;p?(t.moveTo(r,s),p=!1):(n?(l=g[2],h=g[3]):(l=r+(f=e._handleIn)._x,h=s+f._y),l===r&&h===s&&u===a&&c===o?t.lineTo(r,s):t.bezierCurveTo(u,c,l,h,r,s)),a=r,o=s,n?(u=g[4],c=g[5]):(u=a+(f=e._handleOut)._x,c=o+f._y)}for(var r,s,a,o,l,h,u,c,f=e._segments,d=f.length,g=new Array(6),p=!0,_=0;_<d;_++)i(f[_]);e._closed&&d>0&&i(f[0])}return{_draw:function(e,n,i,r){function s(t){return c[(t%f+f)%f]}var a=n.dontStart,o=n.dontFinish||n.clip,l=this.getStyle(),h=l.hasFill(),u=l.hasStroke(),c=l.getDashArray(),f=!st.support.nativeDash&&u&&c&&c.length;if(a||e.beginPath(),(h||u&&!f||o)&&(t(e,this,r),this._closed&&e.closePath()),!o&&(h||u)&&(this._setStyles(e,n,i),h&&(e.fill(l.getFillRule()),e.shadowColor="rgba(0,0,0,0)"),u)){if(f){a||e.beginPath();var d,g=new F(this,.25,32,!1,r),p=g.length,_=-l.getDashOffset(),v=0;for(_%=p;_>0;)_-=s(v--)+s(v--);for(;_<p;)d=_+s(v++),(_>0||d>0)&&g.drawPart(e,Math.max(_,0),Math.max(d,0)),_=d+s(v++)}e.stroke()}},_drawSelected:function(e,n){e.beginPath(),t(e,this,n),e.stroke(),function(t,e,n,i){function r(e){var n=l[e],i=l[e+1];s==n&&a==i||(t.beginPath(),t.moveTo(s,a),t.lineTo(n,i),t.stroke(),t.beginPath(),t.arc(n,i,o,0,2*Math.PI,!0),t.fill())}for(var s,a,o=i/2,l=new Array(6),h=0,u=e.length;h<u;h++){var c=e[h],f=c._selection;if(c._transformCoordinates(n,l),s=l[0],a=l[1],2&f&&r(2),4&f&&r(4),t.fillRect(s-o,a-o,i,i),!(1&f)){var d=t.fillStyle;t.fillStyle="#ffffff",t.fillRect(s-o+1,a-o+1,i-2,i-2),t.fillStyle=d}}}(e,this._segments,n,st.settings.handleSize)}}},new function(){function t(t){var e=t._segments;if(!e.length)throw new Error("Use a moveTo() command first");return e[e.length-1]}return{moveTo:function(){var t=this._segments;1===t.length&&this.removeSegment(0),t.length||this._add([new E(c.read(arguments))])},moveBy:function(){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(){this._add([new E(c.read(arguments))])},cubicCurveTo:function(){var e=c.read(arguments),n=c.read(arguments),i=c.read(arguments),r=t(this);r.setHandleOut(e.subtract(r._point)),this._add([new E(i,n.subtract(i))])},quadraticCurveTo:function(){var e=c.read(arguments),n=c.read(arguments),i=t(this)._point;this.cubicCurveTo(e.add(i.subtract(e).multiply(1/3)),e.add(n.subtract(e).multiply(1/3)),n)},curveTo:function(){var e=c.read(arguments),n=c.read(arguments),i=r.pick(r.read(arguments),.5),s=1-i,a=t(this)._point,o=e.subtract(a.multiply(s*s)).subtract(n.multiply(i*i)).divide(2*i*s);if(o.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(o,n)},arcTo:function(){var e,n,i,s,a=Math.abs,o=Math.sqrt,l=t(this),u=l._point,f=c.read(arguments),g=r.peek(arguments);if("boolean"==typeof(b=r.pick(g,!0)))var p=(C=u.add(f).divide(2)).add(C.subtract(u).rotate(b?-90:90));else if(r.remain(arguments)<=2)p=f,f=c.read(arguments);else{var _=d.read(arguments),y=h.isZero;if(y(_.width)||y(_.height))return this.lineTo(f);var x=r.read(arguments),b=!!r.read(arguments),w=!!r.read(arguments),C=u.add(f).divide(2),S=(W=u.subtract(C).rotate(-x)).x,k=W.y,A=a(_.width),T=a(_.height),M=A*A,P=T*T,O=S*S,R=k*k,I=o(O/M+R/P);if(I>1&&(M=(A*=I)*A,P=(T*=I)*T),a(I=(M*P-M*R-P*O)/(M*R+P*O))<1e-12&&(I=0),I<0)throw new Error("Cannot create an arc with the given arguments");e=new c(A*k/T,-T*S/A).multiply((w===b?-1:1)*o(I)).rotate(x).add(C),n=(i=(s=(new v).translate(e).rotate(x).scale(A,T))._inverseTransform(u)).getDirectedAngle(s._inverseTransform(f)),!b&&n>0?n-=360:b&&n<0&&(n+=360)}if(p){var L=new m(u.add(p).divide(2),p.subtract(u).rotate(90),!0),F=new m(p.add(f).divide(2),f.subtract(p).rotate(90),!0),N=new m(u,f),j=N.getSide(p);if(!(e=L.intersect(F,!0))){if(!j)return this.lineTo(f);throw new Error("Cannot create an arc with the given arguments")}n=(i=u.subtract(e)).getDirectedAngle(f.subtract(e));var z=N.getSide(e,!0);0===z?n=j*a(n):j===z&&(n+=n<0?360:-360)}for(var D=a(n),B=D>=360?4:Math.ceil((D-1e-7)/90),q=n/B,U=q*Math.PI/360,V=4/3*Math.sin(U)/(1+Math.cos(U)),H=[],G=0;G<=B;G++){var W=f,$=null;if(G<B&&($=i.rotate(90).multiply(V),s?(W=s._transformPoint(i),$=s._transformPoint(i.add($)).subtract(W)):W=e.add(i)),G){var Z=i.rotate(-90).multiply(V);s&&(Z=s._transformPoint(i.add(Z)).subtract(W)),H.push(new E(W,Z,$))}else l.setHandleOut($);i=i.rotate(q)}this._add(H)},lineBy:function(){var e=c.read(arguments),n=t(this)._point;this.lineTo(n.add(e))},curveBy:function(){var e=c.read(arguments),n=c.read(arguments),i=r.read(arguments),s=t(this)._point;this.curveTo(s.add(e),s.add(n),i)},cubicCurveBy:function(){var e=c.read(arguments),n=c.read(arguments),i=c.read(arguments),r=t(this)._point;this.cubicCurveTo(r.add(e),r.add(n),r.add(i))},quadraticCurveBy:function(){var e=c.read(arguments),n=c.read(arguments),i=t(this)._point;this.quadraticCurveTo(i.add(e),i.add(n))},arcBy:function(){var e=t(this)._point,n=e.add(c.read(arguments)),i=r.pick(r.peek(arguments),!0);this.arcTo(n,"boolean"==typeof i?i:e.add(c.read(arguments)))},closePath:function(t){this.setClosed(!0),this.join(this,t)}}},{_getBounds:function(t,e){return I[e.handle?"getHandleBounds":e.stroke?"getStrokeBounds":"getBounds"](this._segments,this._closed,this,t,e)},statics:{getBounds:function(t,e,n,i,r,s){function a(t){t._transformCoordinates(i,l);for(var e=0;e<2;e++)P._addBounds(h[e],h[e+4],l[e+2],l[e],e,s?s[e]:0,u,c,f);var n=h;h=l,l=n}var o=t[0];if(!o)return new p;for(var l=new Array(6),h=o._transformCoordinates(i,new Array(6)),u=h.slice(0,2),c=u.slice(),f=new Array(2),d=1,g=t.length;d<g;d++)a(t[d]);return e&&a(o),new p(u[0],u[1],c[0]-u[0],c[1]-u[1])},getStrokeBounds:function(t,e,n,i,r){function s(t){_=_.include(t)}function a(t){_=_.unite(b.setCenter(t._point.transform(i)))}function o(t,e){"round"===e||t.isSmooth()?a(t):I._addBevelJoin(t,e,v,x,i,f,s)}function l(t,e){"round"===e?a(t):I._addSquareCap(t,e,v,i,f,s)}var h=n.getStyle(),u=h.hasStroke(),c=h.getStrokeWidth(),f=u&&n._getStrokeMatrix(i,r),g=u&&I._getStrokePadding(c,f),_=I.getBounds(t,e,n,i,r,g);if(!u)return _;for(var v=c/2,m=h.getStrokeJoin(),y=h.getStrokeCap(),x=h.getMiterLimit(),b=new p(new d(g)),w=t.length-(e?0:1),C=1;C<w;C++)o(t[C],m);return e?o(t[0],m):w>0&&(l(t[0],y),l(t[t.length-1],y)),_},_getStrokePadding:function(t,e){if(!e)return[t,t];var n=new c(t,0).transform(e),i=new c(0,t).transform(e),r=n.getAngleInRadians(),s=n.getLength(),a=i.getLength(),o=Math.sin(r),l=Math.cos(r),h=Math.tan(r),u=Math.atan2(a*h,s),f=Math.atan2(a,h*s);return[Math.abs(s*Math.cos(u)*l+a*Math.sin(u)*o),Math.abs(a*Math.sin(f)*l+s*Math.cos(f)*o)]},_addBevelJoin:function(t,e,n,i,r,s,a,o){var l=t.getCurve(),h=l.getPrevious(),u=l.getPoint1().transform(r),f=h.getNormalAtTime(1).multiply(n).transform(s),d=l.getNormalAtTime(0).multiply(n).transform(s);if(f.getDirectedAngle(d)<0&&(f=f.negate(),d=d.negate()),o&&a(u),a(u.add(f)),"miter"===e){var g=new m(u.add(f),new c(-f.y,f.x),!0).intersect(new m(u.add(d),new c(-d.y,d.x),!0),!0);g&&u.getDistance(g)<=i*n&&a(g)}a(u.add(d))},_addSquareCap:function(t,e,n,i,r,s,a){var o=t._point.transform(i),l=t.getLocation(),h=l.getNormal().multiply(0===l.getTime()?n:-n).transform(r);"square"===e&&(a&&(s(o.subtract(h)),s(o.add(h))),o=o.add(h.rotate(-90))),s(o.add(h)),s(o.subtract(h))},getHandleBounds:function(t,e,n,i,r){var s,a,o=n.getStyle();if(r.stroke&&o.hasStroke()){var l=n._getStrokeMatrix(i,r),h=o.getStrokeWidth()/2,u=h;"miter"===o.getStrokeJoin()&&(u=h*o.getMiterLimit()),"square"===o.getStrokeCap()&&(u=Math.max(u,h*Math.SQRT2)),s=I._getStrokePadding(h,l),a=I._getStrokePadding(u,l)}for(var c=new Array(6),f=1/0,d=-f,g=f,_=d,v=0,m=t.length;v<m;v++){t[v]._transformCoordinates(i,c);for(var y=0;y<6;y+=2){var x=y?s:a,b=x?x[0]:0,w=x?x[1]:0,C=c[y],S=c[y+1],k=C-b,A=C+b,T=S-w,E=S+w;k<f&&(f=k),A>d&&(d=A),T<g&&(g=T),E>_&&(_=E)}}return new p(f,g,d-f,_-g)}}});I.inject({statics:new function(){function t(t,e,n){var i=r.getNamed(n),s=new I(i&&0==i.insert&&x.NO_INSERT);return s._add(t),s._closed=e,s.set(i,{insert:!0})}function e(e,n,r){for(var s=new Array(4),a=0;a<4;a++){var o=i[a];s[a]=new E(o._point.multiply(n).add(e),o._handleIn.multiply(n),o._handleOut.multiply(n))}return t(s,!0,r)}var n=.5522847498307936,i=[new E([-1,0],[0,n],[0,-n]),new E([0,-1],[-n,0],[n,0]),new E([1,0],[0,-n],[0,n]),new E([0,1],[n,0],[-n,0])];return{Line:function(){return t([new E(c.readNamed(arguments,"from")),new E(c.readNamed(arguments,"to"))],!1,arguments)},Circle:function(){var t=c.readNamed(arguments,"center"),n=r.readNamed(arguments,"radius");return e(t,new d(n),arguments)},Rectangle:function(){var e,i=p.readNamed(arguments,"rectangle"),r=d.readNamed(arguments,"radius",0,{readNull:!0}),s=i.getBottomLeft(!0),a=i.getTopLeft(!0),o=i.getTopRight(!0),l=i.getBottomRight(!0);if(!r||r.isZero())e=[new E(s),new E(a),new E(o),new E(l)];else{var h=(r=d.min(r,i.getSize(!0).divide(2))).width,u=r.height,c=h*n,f=u*n;e=[new E(s.add(h,0),null,[-c,0]),new E(s.subtract(0,u),[0,f]),new E(a.add(0,u),null,[0,-f]),new E(a.add(h,0),[-c,0],null),new E(o.subtract(h,0),null,[c,0]),new E(o.add(0,u),[0,-f],null),new E(l.subtract(0,u),null,[0,f]),new E(l.subtract(h,0),[c,0])]}return t(e,!0,arguments)},RoundRectangle:"#Rectangle",Ellipse:function(){var t=C._readEllipse(arguments);return e(t.center,t.radius,arguments)},Oval:"#Ellipse",Arc:function(){var t=c.readNamed(arguments,"from"),e=c.readNamed(arguments,"through"),n=c.readNamed(arguments,"to"),i=r.getNamed(arguments),s=new I(i&&0==i.insert&&x.NO_INSERT);return s.moveTo(t),s.arcTo(e,n),s.set(i)},RegularPolygon:function(){for(var e=c.readNamed(arguments,"center"),n=r.readNamed(arguments,"sides"),i=r.readNamed(arguments,"radius"),s=360/n,a=n%3==0,o=new c(0,a?-i:i),l=a?-1:.5,h=new Array(n),u=0;u<n;u++)h[u]=new E(e.add(o.rotate((u+l)*s)));return t(h,!0,arguments)},Star:function(){for(var e=c.readNamed(arguments,"center"),n=2*r.readNamed(arguments,"points"),i=r.readNamed(arguments,"radius1"),s=r.readNamed(arguments,"radius2"),a=360/n,o=new c(0,-1),l=new Array(n),h=0;h<n;h++)l[h]=new E(e.add(o.rotate(a*h).multiply(h%2?s:i)));return t(l,!0,arguments)}}}});var L=R.extend({_class:"CompoundPath",_serializeFields:{children:[]},beans:!0,initialize:function(t){this._children=[],this._namedChildren={},this._initialize(t)||("string"==typeof t?this.setPathData(t):this.addChildren(Array.isArray(t)?t:arguments))},insertChildren:function t(e,n){var i=n,s=i[0];s&&"number"==typeof s[0]&&(i=[i]);for(var a=n.length-1;a>=0;a--){var o=i[a];i!==n||o instanceof I||(i=r.slice(i)),Array.isArray(o)?i[a]=new I({segments:o,insert:!1}):o instanceof L&&(i.splice.apply(i,[a,1].concat(o.removeChildren())),o.remove())}return t.base.call(this,e,i)},reduce:function t(e){for(var n=this._children,i=n.length-1;i>=0;i--)(r=n[i].reduce(e)).isEmpty()&&r.remove();var r;return n.length?t.base.call(this):((r=new I(x.NO_INSERT)).copyAttributes(this),r.insertAbove(this),this.remove(),r)},isClosed:function(){for(var t=this._children,e=0,n=t.length;e<n;e++)if(!t[e]._closed)return!1;return!0},setClosed:function(t){for(var e=this._children,n=0,i=e.length;n<i;n++)e[n].setClosed(t)},getFirstSegment:function(){var t=this.getFirstChild();return t&&t.getFirstSegment()},getLastSegment:function(){var t=this.getLastChild();return t&&t.getLastSegment()},getCurves:function(){for(var t=this._children,e=[],n=0,i=t.length;n<i;n++)r.push(e,t[n].getCurves());return e},getFirstCurve:function(){var t=this.getFirstChild();return t&&t.getFirstCurve()},getLastCurve:function(){var t=this.getLastChild();return t&&t.getLastCurve()},getArea:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getArea();return e},getLength:function(){for(var t=this._children,e=0,n=0,i=t.length;n<i;n++)e+=t[n].getLength();return e},getPathData:function(t,e){for(var n=this._children,i=[],r=0,s=n.length;r<s;r++){var a=n[r],o=a._matrix;i.push(a.getPathData(t&&!o.isIdentity()?t.appended(o):t,e))}return i.join("")},_hitTestChildren:function t(e,n,i){return t.base.call(this,e,n.class===I||"path"===n.type?n:r.set({},n,{fill:!1}),i)},_draw:function(t,e,n,i){var r=this._children;if(r.length){e=e.extend({dontStart:!0,dontFinish:!0}),t.beginPath();for(var s=0,a=r.length;s<a;s++)r[s].draw(t,e,i);if(!e.clip){this._setStyles(t,e,n);var o=this._style;o.hasFill()&&(t.fill(o.getFillRule()),t.shadowColor="rgba(0,0,0,0)"),o.hasStroke()&&t.stroke()}}},_drawSelected:function(t,e,n){for(var i=this._children,r=0,s=i.length;r<s;r++){var a=i[r],o=a._matrix;n[a._id]||a._drawSelected(t,o.isIdentity()?e:e.appended(o))}}},new function(){function t(t,e){var n=t._children;if(e&&!n.length)throw new Error("Use a moveTo() command first");return n[n.length-1]}return r.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","cubicCurveBy","quadraticCurveBy","curveBy","arcBy"],function(e){this[e]=function(){var n=t(this,!0);n[e].apply(n,arguments)}},{moveTo:function(){var e=t(this),n=e&&e.isEmpty()?e:new I(x.NO_INSERT);n!==e&&this.addChild(n),n.moveTo.apply(n,arguments)},moveBy:function(){var e=t(this,!0),n=e&&e.getLastSegment(),i=c.read(arguments);this.moveTo(n?i.add(n._point):i)},closePath:function(e){t(this,!0).closePath(e)}})},r.each(["reverse","flatten","simplify","smooth"],function(t){this[t]=function(e){for(var n,i=this._children,r=0,s=i.length;r<s;r++)n=i[r][t](e)||n;return n}},{}));R.inject(new function(){function t(t,e){var n=t.clone(!1).reduce({simplify:!0}).transform(null,!0,!0);return e?n.resolveCrossings().reorient("nonzero"===n.getFillRule(),!0):n}function n(t,e,n,i,r){var s=new L(x.NO_INSERT);return s.addChildren(t,!0),s=s.reduce({simplify:e}),r&&0==r.insert||s.insertAbove(i&&n.isSibling(i)&&n.getIndex()<i.getIndex()?i:n),s.copyAttributes(n,!0),s}function i(e,i,a,o){function h(t){for(var e=0,n=t.length;e<n;e++){var i=t[e];r.push(b,i._segments),r.push(w,i.getCurves()),i._overlapsOnly=!0}}if(o&&(0==o.trace||o.stroke)&&/^(subtract|intersect)$/.test(a))return s(e,i,a);var c=t(e,!0),g=i&&e!==i&&t(i,!0),p=v[a];p[a]=!0,g&&(p.subtract||p.exclude)^g.isClockwise()^c.isClockwise()&&g.reverse();var _,m=u(O.expand(c.getCrossings(g))),y=c._children||[c],x=g&&(g._children||[g]),b=[],w=[];if(m.length){h(y),x&&h(x);for(var C=0,S=m.length;C<S;C++)f(m[C]._segment,c,g,w,p);for(C=0,S=b.length;C<S;C++){var k=b[C],A=k._intersection;k._winding||f(k,c,g,w,p),A&&A._overlap||(k._path._overlapsOnly=!1)}_=d(b,p)}else _=l(x?y.concat(x):y.slice(),function(t){return!!p[t]});return n(_,!0,e,i,o)}function s(e,i,r){function s(t){if(!c[t._id]&&(u||o.contains(t.getPointAt(t.getLength()/2))^h))return f.unshift(t),c[t._id]=!0}for(var a=t(e),o=t(i),l=a.getCrossings(o),h="subtract"===r,u="divide"===r,c={},f=[],d=l.length-1;d>=0;d--){var g=l[d].split();g&&(s(g)&&g.getFirstSegment().setHandleIn(0,0),a.getLastSegment().setHandleOut(0,0))}return s(a),n(f,!1,e,i)}function a(t,e){for(var n=t;n;){if(n===e)return;n=n._previous}for(;t._next&&t._next!==e;)t=t._next;if(!t._next){for(;e._previous;)e=e._previous;t._next=e,e._previous=t}}function o(t){for(var e=t.length-1;e>=0;e--)t[e].clearHandles()}function l(t,e,n){var i=t&&t.length;if(i){var s=r.each(t,function(t,e){this[t._id]={container:null,winding:t.isClockwise()?1:-1,index:e}},{}),a=t.slice().sort(function(t,e){return _(e.getArea())-_(t.getArea())});null==n&&(n=a[0].isClockwise());for(var o=0;o<i;o++){for(var l=a[o],h=s[l._id],u=l.getInteriorPoint(),c=0,f=o-1;f>=0;f--){var d=a[f];if(d.contains(u)){var g=s[d._id];h.winding+=c=g.winding,h.container=g.exclude?g.container:d;break}}if(e(h.winding)===e(c))h.exclude=!0,t[h.index]=null;else{var p=h.container;l.setClockwise(p?!p.isClockwise():n)}}}return t}function u(t,e,n){function i(t){return t._path._id+"."+t._segment1._index}for(var r,s,l,h=e&&[],u=!1,c=n||[],f=n&&{},d=(n&&n.length)-1;d>=0;d--)(p=n[d])._path&&(f[i(p)]=!0);for(d=t.length-1;d>=0;d--){var g,p,_=t[d],v=_._time,m=v,y=e&&!e(_);if((p=_._curve)&&(p!==s?(u=!p.hasHandles()||f&&f[i(p)],r=[],l=null,s=p):l>=1e-8&&(v/=l)),y)r&&r.push(_);else{if(e&&h.unshift(_),l=m,v<1e-8)g=p._segment1;else if(v>.99999999)g=p._segment2;else{var x=p.divideAtTime(v,!0);u&&c.push(p,x),g=x._segment1;for(var b=r.length-1;b>=0;b--){var w=r[b];w._time=(w._time-v)/(1-v)}}_._setSegment(g);var C=g._intersection,S=_._intersection;if(C){a(C,S);for(var k=C;k;)a(k._intersection,C),k=k._next}else g._intersection=S}}return n||o(c),h||t}function c(t,e,n,i,r){function s(s){var a=s[u+0],l=s[u+6];if(!(v<g(a,l)||v>p(a,l))){var f=s[h+0],_=s[h+2],b=s[h+4],w=s[h+6];if(a===l)return void((f<x&&w>y||w<x&&f>y)&&(k=!0));var A=v===a?0:v===l?1:y>p(f,_,b,w)||x<g(f,_,b,w)?1:P.solveCubic(s,u,v,E,0,1)>0?E[0]:1,M=0===A?f:1===A?w:P.getPoint(s,A)[n?"y":"x"],O=a>l?1:-1,R=o[h+6];return v!==a?(M<y?C+=O:M>x?S+=O:k=!0,M>d-m&&M<d+m&&(T/=2)):(O!==(o[u]>o[u+6]?1:-1)?f<y?C+=O:f>x&&(S+=O):f!=R&&(R<x&&M>x?(S+=O,k=!0):R>y&&M<y&&(C+=O,k=!0)),T=0),o=s,!r&&M>y&&M<x&&0===P.getTangent(s,A)[n?"x":"y"]&&c(t,e,!n,i,!0)}}function a(t){var e=t[u+0],i=t[u+2],r=t[u+4],a=t[u+6];if(v<=p(e,i,r,a)&&v>=g(e,i,r,a))for(var o,l=t[h+0],c=t[h+2],f=t[h+4],d=t[h+6],_=y>p(l,c,f,d)||x<g(l,c,f,d)?[t]:P.getMonoCurves(t,n),m=0,b=_.length;m<b;m++)if(o=s(_[m]))return o}for(var o,l,h=n?1:0,u=1^h,f=[t.x,t.y],d=f[h],v=f[u],m=1e-6,y=d-1e-9,x=d+1e-9,b=0,w=0,C=0,S=0,k=!1,A=!1,T=1,E=[],M=0,O=e.length;M<O;M++){var R,I=e[M],L=I._path,F=I.getValues();if(!(M&&e[M-1]._path===L||(o=null,L._closed||(l=P.getValues(L.getLastCurve().getSegment2(),I.getSegment1(),null,!i),l[u]!==l[u+6]&&(o=l)),o))){o=F;for(var N=L.getLastCurve();N&&N!==I;){var j=N.getValues();if(j[u]!==j[u+6]){o=j;break}N=N.getPrevious()}}if(R=a(F))return R;if(M+1===O||e[M+1]._path!==L){if(l&&(R=a(l)))return R;!k||C||S||(C=S=L.isClockwise(i)^n?1:-1),b+=C,w+=S,C=S=0,k&&(A=!0,k=!1),l=null}}return b=_(b),w=_(w),{winding:p(b,w),windingL:b,windingR:w,quality:T,onPath:A}}function f(t,e,n,i,r){var s=[],a=t,o=0;do{var l=(y=t.getCurve()).getLength();s.push({segment:t,curve:y,length:l}),o+=l,t=t.getNext()}while(t&&!t._intersection&&t!==a);for(var u=[.5,.25,.75],f={winding:0,quality:-1},d=0;d<u.length&&f.quality<.5;d++){l=o*u[d];for(var g=0,p=s.length;g<p;g++){var v=s[g],m=v.length;if(l<=m){var y,x=(y=v.curve)._path,b=x._parent,w=b instanceof L?b:x,C=h.clamp(y.getTimeAt(l),1e-8,1-1e-8),S=y.getPointAtTime(C),k=_(y.getTangentAtTime(C).y)<Math.SQRT1_2,A=null;if(r.subtract&&n){var T=w===e?n._getWinding(S,k,!0):e._getWinding(S,k,!0);if(w===e&&T.winding||w===n&&!T.winding){if(T.quality<1)continue;A={winding:0,quality:1}}}(A=A||c(S,i,k,!0)).quality>f.quality&&(f=A);break}l-=m}}for(g=s.length-1;g>=0;g--)s[g].segment._winding=f}function d(t,e){function n(t){var n;return!(!t||t._visited||e&&(!e[(n=t._winding||{}).winding]||e.unite&&2===n.winding&&n.windingL&&n.windingR))}function i(t){if(t)for(var e=0,n=a.length;e<n;e++)if(t===a[e])return!0;return!1}function r(t){for(var e=t._segments,n=0,i=e.length;n<i;n++)e[n]._visited=!0}function s(t,e){function r(r,s){for(;r&&r!==s;){var o=r._segment,h=o&&o._path;if(h){var u=o.getNext()||h.getFirstSegment(),c=u._intersection;o!==t&&(i(o)||i(u)||u&&n(o)&&(n(u)||c&&n(c._segment)))&&l.push(o),e&&a.push(o)}r=r._next}}var s=t._intersection,o=s,l=[];if(e&&(a=[t]),s){for(r(s);s&&s._prev;)s=s._prev;r(s,o)}return l}var a,o=[];t.sort(function(t,e){var n=t._intersection,i=e._intersection,r=!(!n||!n._overlap),s=t._path,a=e._path;return r^!(!i||!i._overlap)?r?1:-1:!n^!i?n?1:-1:s!==a?s._id-a._id:t._index-e._index});for(var l=0,h=t.length;l<h;l++){var u,c,f,d=t[l],g=n(d),p=null,_=!1,v=!0,m=[];if(g&&d._path._overlapsOnly){var y=d._path,b=d._intersection._segment._path;y.compare(b)&&(y.getArea()&&o.push(y.clone(!1)),r(y),r(b),g=!1)}for(;g;){var w=!p,C=s(d,w),S=C.shift(),k=!(_=!w&&(i(d)||i(S)))&&S;if(w&&(p=new I(x.NO_INSERT),u=null),_){(d.isFirst()||d.isLast())&&(v=d._path._closed),d._visited=!0;break}if(k&&u&&(m.push(u),u=null),u||(k&&C.push(d),u={start:p._segments.length,crossings:C,visited:c=[],handleIn:f}),k&&(d=S),!n(d)){p.removeSegments(u.start);for(var A=0,T=c.length;A<T;A++)c[A]._visited=!1;c.length=0;do{(d=u&&u.crossings.shift())&&d._path||(d=null,(u=m.pop())&&(c=u.visited,f=u.handleIn))}while(u&&!n(d));if(!d)break}var M=d.getNext();p.add(new E(d._point,f,M&&d._handleOut)),d._visited=!0,c.push(d),d=M||d._path.getFirstSegment(),f=M&&M._handleIn}_&&(v&&(p.getFirstSegment().setHandleIn(f),p.setClosed(v)),0!==p.getArea()&&o.push(p))}return o}var g=Math.min,p=Math.max,_=Math.abs,v={unite:{1:!0,2:!0},intersect:{2:!0},subtract:{1:!0},exclude:{1:!0,"-1":!0}};return{_getWinding:function(t,e,n){return c(t,this.getCurves(),e,n)},unite:function(t,e){return i(this,t,"unite",e)},intersect:function(t,e){return i(this,t,"intersect",e)},subtract:function(t,e){return i(this,t,"subtract",e)},exclude:function(t,e){return i(this,t,"exclude",e)},divide:function(t,e){return e&&(0==e.trace||e.stroke)?s(this,t,"divide"):n([this.subtract(t,e),this.intersect(t,e)],!0,this,t,e)},resolveCrossings:function(){function t(t,e){var n=t&&t._intersection;return n&&n._overlap&&n._path===e}var e=this._children,n=e||[this],i=!1,s=!1,a=this.getIntersections(null,function(t){return t.hasOverlap()&&(i=!0)||t.isCrossing()&&(s=!0)}),l=i&&s&&[];if(a=O.expand(a),i)for(var h=u(a,function(t){return t.hasOverlap()},l),c=h.length-1;c>=0;c--){var f=h[c],g=f._path,p=f._segment,_=p.getPrevious(),v=p.getNext();t(_,g)&&t(v,g)&&(p.remove(),_._handleOut._set(0,0),v._handleIn._set(0,0),_===p||_.getCurve().hasLength()||(v._handleIn.set(_._handleIn),_.remove()))}s&&(u(a,i&&function(t){var e=t.getCurve(),n=t.getSegment(),i=t._intersection,r=i._curve,s=i._segment;return!!(e&&r&&e._path&&r._path)||(n&&(n._intersection=null),void(s&&(s._intersection=null)))},l),l&&o(l),n=d(r.each(n,function(t){r.push(this,t._segments)},[])));var m,y=n.length;return y>1&&e?(n!==e&&this.setChildren(n),m=this):1!==y||e||(n[0]!==this&&this.setSegments(n[0].removeSegments()),m=this),m||((m=new L(x.NO_INSERT)).addChildren(n),(m=m.reduce()).copyAttributes(this),this.replaceWith(m)),m},reorient:function(t,n){var i=this._children;return i&&i.length?this.setChildren(l(this.removeChildren(),function(e){return!!(t?e:1&e)},n)):n!==e&&this.setClockwise(n),this},getInteriorPoint:function(){var t=this.getBounds().getCenter(!0);if(!this.contains(t)){for(var e=this.getCurves(),n=t.y,i=[],r=[],s=0,a=e.length;s<a;s++){var o=e[s].getValues(),l=o[1],h=o[3],u=o[5],c=o[7];if(n>=g(l,h,u,c)&&n<=p(l,h,u,c))for(var f=P.getMonoCurves(o),d=0,_=f.length;d<_;d++){var v=f[d],m=v[1],y=v[7];if(m!==y&&(n>=m&&n<=y||n>=y&&n<=m)){var x=n===m?v[0]:n===y?v[6]:1===P.solveCubic(v,1,n,r,0,1)?P.getPoint(v,r[0]).x:(v[0]+v[6])/2;i.push(x)}}}i.length>1&&(i.sort(function(t,e){return t-e}),t.x=(i[0]+i[1])/2)}return t}}});var F=r.extend({_class:"PathFlattener",initialize:function(t,e,n,i,r){function s(t,e){var n=P.getValues(t,e,r);l.push(n),a(n,t._index,0,1)}function a(t,n,r,s){if(!(s-r>c)||i&&P.isStraight(t)||P.isFlatEnough(t,e||.25)){var o=t[6]-t[0],l=t[7]-t[1],f=Math.sqrt(o*o+l*l);f>0&&h.push({offset:u+=f,curve:t,index:n,time:s})}else{var d=P.subdivide(t,.5),g=(r+s)/2;a(d[0],n,r,g),a(d[1],n,g,s)}}for(var o,l=[],h=[],u=0,c=1/(n||32),f=t._segments,d=f[0],g=1,p=f.length;g<p;g++)s(d,o=f[g]),d=o;t._closed&&s(o||d,f[0]),this.curves=l,this.parts=h,this.length=u,this.index=0},_get:function(t){for(var e,n=this.parts,i=n.length,r=this.index;e=r,r&&!(n[--r].offset<t););for(;e<i;e++){var s=n[e];if(s.offset>=t){this.index=e;var a=n[e-1],o=a&&a.index===s.index?a.time:0,l=a?a.offset:0;return{index:s.index,time:o+(s.time-o)*(t-l)/(s.offset-l)}}}return{index:n[i-1].index,time:1}},drawPart:function(t,e,n){for(var i=this._get(e),r=this._get(n),s=i.index,a=r.index;s<=a;s++){var o=P.getPart(this.curves[s],s===i.index?i.time:0,s===r.index?r.time:1);s===i.index&&t.moveTo(o[0],o[1]),t.bezierCurveTo.apply(t,o.slice(2))}}},r.each(P._evaluateMethods,function(t){this[t+"At"]=function(e){var n=this._get(e);return P[t](this.curves[n.index],n.time)}},{})),N=r.extend({initialize:function(t){for(var e,n=this.points=[],i=t._segments,r=t._closed,s=0,a=i.length;s<a;s++){var o=i[s].point;e&&e.equals(o)||n.push(e=o.clone())}r&&(n.unshift(n[n.length-1]),n.push(n[1])),this.closed=r},fit:function(t){var e=this.points,n=e.length,i=null;return n>0&&(i=[new E(e[0])],n>1&&(this.fitCubic(i,t,0,n-1,e[1].subtract(e[0]),e[n-2].subtract(e[n-1])),this.closed&&(i.shift(),i.pop()))),i},fitCubic:function(t,e,n,i,r,s){var a=this.points;if(i-n!=1){for(var o,l=this.chordLengthParameterize(n,i),h=Math.max(e,e*e),u=!0,c=0;c<=4;c++){var f=this.generateBezier(n,i,l,r,s),d=this.findMaxError(n,i,f,l);if(d.error<e&&u)return void this.addCurve(t,f);if(o=d.index,d.error>=h)break;u=this.reparameterize(n,i,l,f),h=d.error}var g=a[o-1].subtract(a[o+1]);this.fitCubic(t,e,n,o,r,g),this.fitCubic(t,e,o,i,g.negate(),s)}else{var p=a[n],_=a[i],v=p.getDistance(_)/3;this.addCurve(t,[p,p.add(r.normalize(v)),_.add(s.normalize(v)),_])}},addCurve:function(t,e){t[t.length-1].setHandleOut(e[1].subtract(e[0])),t.push(new E(e[3],e[2].subtract(e[3])))},generateBezier:function(t,e,n,i,r){for(var s=1e-12,a=Math.abs,o=this.points,l=o[t],h=o[e],u=[[0,0],[0,0]],c=[0,0],f=0,d=e-t+1;f<d;f++){var g=n[f],p=1-g,_=3*g*p,v=p*p*p,m=_*p,y=_*g,x=g*g*g,b=i.normalize(m),w=r.normalize(y),C=o[t+f].subtract(l.multiply(v+m)).subtract(h.multiply(y+x));u[0][0]+=b.dot(b),u[0][1]+=b.dot(w),u[1][0]=u[0][1],u[1][1]+=w.dot(w),c[0]+=b.dot(C),c[1]+=w.dot(C)}var S,k,A=u[0][0]*u[1][1]-u[1][0]*u[0][1];if(a(A)>s)S=(c[0]*u[1][1]-c[1]*u[0][1])/A,k=(u[0][0]*c[1]-u[1][0]*c[0])/A;else{var T=u[0][0]+u[0][1],E=u[1][0]+u[1][1];S=k=a(T)>s?c[0]/T:a(E)>s?c[1]/E:0}var M,P,O=h.getDistance(l),R=s*O;if(S<R||k<R)S=k=O/3;else{var I=h.subtract(l);M=i.normalize(S),P=r.normalize(k),M.dot(I)-P.dot(I)>O*O&&(S=k=O/3,M=P=null)}return[l,l.add(M||i.normalize(S)),h.add(P||r.normalize(k)),h]},reparameterize:function(t,e,n,i){for(var r=t;r<=e;r++)n[r-t]=this.findRoot(i,this.points[r],n[r-t]);r=1;for(var s=n.length;r<s;r++)if(n[r]<=n[r-1])return!1;return!0},findRoot:function(t,e,n){for(var i=[],r=[],s=0;s<=2;s++)i[s]=t[s+1].subtract(t[s]).multiply(3);for(s=0;s<=1;s++)r[s]=i[s+1].subtract(i[s]).multiply(2);var a=this.evaluate(3,t,n),o=this.evaluate(2,i,n),l=this.evaluate(1,r,n),u=a.subtract(e),c=o.dot(o)+u.dot(l);return h.isZero(c)?n:n-u.dot(o)/c},evaluate:function(t,e,n){for(var i=e.slice(),r=1;r<=t;r++)for(var s=0;s<=t-r;s++)i[s]=i[s].multiply(1-n).add(i[s+1].multiply(n));return i[0]},chordLengthParameterize:function(t,e){for(var n=[0],i=t+1;i<=e;i++)n[i-t]=n[i-t-1]+this.points[i].getDistance(this.points[i-1]);i=1;for(var r=e-t;i<=r;i++)n[i]/=n[r];return n},findMaxError:function(t,e,n,i){for(var r=Math.floor((e-t+1)/2),s=0,a=t+1;a<e;a++){var o=this.evaluate(3,n,i[a-t]).subtract(this.points[a]),l=o.x*o.x+o.y*o.y;l>=s&&(s=l,r=a)}return{error:s,index:r}}}),j=x.extend({_class:"TextItem",_applyMatrix:!1,_canApplyMatrix:!1,_serializeFields:{content:null},_boundsOptions:{stroke:!1,handle:!1},initialize:function(t){this._content="",this._lines=[];var n=t&&r.isPlainObject(t)&&t.x===e&&t.y===e;this._initialize(n&&t,!n&&c.read(arguments))},_equals:function(t){return this._content===t._content},copyContent:function(t){this.setContent(t._content)},getContent:function(){return this._content},setContent:function(t){this._content=""+t,this._lines=this._content.split(/\r\n|\n|\r/gm),this._changed(521)},isEmpty:function(){return!this._content},getCharacterStyle:"#getStyle",setCharacterStyle:"#setStyle",getParagraphStyle:"#getStyle",setParagraphStyle:"#setStyle"}),z=j.extend({_class:"PointText",initialize:function(){j.apply(this,arguments)},getPoint:function(){var t=this._matrix.getTranslation();return new f(t.x,t.y,this,"setPoint")},setPoint:function(){var t=c.read(arguments);this.translate(t.subtract(this._matrix.getTranslation()))},_draw:function(t,e,n){if(this._content){this._setStyles(t,e,n);var i=this._lines,r=this._style,s=r.hasFill(),a=r.hasStroke(),o=r.getLeading(),l=t.shadowColor;t.font=r.getFontStyle(),t.textAlign=r.getJustification();for(var h=0,u=i.length;h<u;h++){t.shadowColor=l;var c=i[h];s&&(t.fillText(c,0,0),t.shadowColor="rgba(0,0,0,0)"),a&&t.strokeText(c,0,0),t.translate(0,o)}}},_getBounds:function(t,e){var n=this._style,i=this._lines,r=i.length,s=n.getJustification(),a=n.getLeading(),o=this.getView().getTextWidth(n.getFontStyle(),i),l=0;"left"!==s&&(l-=o/("center"===s?2:1));var h=new p(l,r?-.75*a:0,o,r*a);return t?t._transformBounds(h,h):h}}),D=r.extend(new function(){function t(t){var i,r=t.match(/^#([\da-f]{2})([\da-f]{2})([\da-f]{2})([\da-f]{2})?$/i)||t.match(/^#([\da-f])([\da-f])([\da-f])([\da-f])?$/i),s="rgb";if(r){var o=r[4]?4:3;i=new Array(o);for(var l=0;l<o;l++){var h=r[l+1];i[l]=parseInt(1==h.length?h+h:h,16)/255}}else if(r=t.match(/^(rgb|hsl)a?\((.*)\)$/)){s=r[1],i=r[2].split(/[,\s]+/g);for(var u="hsl"===s,c=(l=0,Math.min(i.length,4));l<c;l++){var f=i[l];if(h=parseFloat(f),u)if(0===l){var d=f.match(/([a-z]*)$/)[1];h*={turn:360,rad:180/Math.PI,grad:.9}[d]||1}else l<3&&(h/=100);else l<3&&(h/=255);i[l]=h}}else{var g=a[t];if(!g)if(n){e||((e=et.getContext(1,1)).globalCompositeOperation="copy"),e.fillStyle="rgba(0,0,0,0)",e.fillStyle=t,e.fillRect(0,0,1,1);var p=e.getImageData(0,0,1,1).data;g=a[t]=[p[0]/255,p[1]/255,p[2]/255]}else g=[0,0,0];i=g.slice()}return[s,i]}var e,i={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"],gradient:["gradient","origin","destination","highlight"]},s={},a={transparent:[0,0,0,0]},o=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],h={"rgb-hsb":function(t,e,n){var i=Math.max(t,e,n),r=i-Math.min(t,e,n);return[0===r?0:60*(i==t?(e-n)/r+(e<n?6:0):i==e?(n-t)/r+2:(t-e)/r+4),0===i?0:r/i,i]},"hsb-rgb":function(t,e,n){var i,r=(t=(t/60%6+6)%6)-(i=Math.floor(t)),s=[n,n*(1-e),n*(1-e*r),n*(1-e*(1-r))];return[s[(i=o[i])[0]],s[i[1]],s[i[2]]]},"rgb-hsl":function(t,e,n){var i=Math.max(t,e,n),r=Math.min(t,e,n),s=i-r,a=0===s,o=(i+r)/2;return[a?0:60*(i==t?(e-n)/s+(e<n?6:0):i==e?(n-t)/s+2:(t-e)/s+4),a?0:o<.5?s/(i+r):s/(2-i-r),o]},"hsl-rgb":function(t,e,n){if(0===e)return[n,n,n];for(var i=[(t=(t/360%1+1)%1)+1/3,t,t-1/3],r=n<.5?n*(1+e):n+e-n*e,s=2*n-r,a=[],o=0;o<3;o++){var l=i[o];l<0&&(l+=1),l>1&&(l-=1),a[o]=6*l<1?s+6*(r-s)*l:2*l<1?r:3*l<2?s+(r-s)*(2/3-l)*6:s}return a},"rgb-gray":function(t,e,n){return[.2989*t+.587*e+.114*n]},"gray-rgb":function(t){return[t,t,t]},"gray-hsb":function(t){return[0,0,t]},"gray-hsl":function(t){return[0,0,t]},"gradient-rgb":function(){return[]},"rgb-gradient":function(){return[]}};return r.each(i,function(t,e){s[e]=[],r.each(t,function(t,n){var a=r.capitalize(t),o=/^(hue|saturation)$/.test(t),l=s[e][n]="gradient"===e?"gradient"===t?function(t){var e=this._components[0];return e!==(t=B.read(Array.isArray(t)?t:arguments,0,{readNull:!0}))&&(e&&e._removeOwner(this),t&&t._addOwner(this)),t}:function(){return c.read(arguments,0,{readNull:"highlight"===t,clone:!0})}:function(t){return null==t||isNaN(t)?0:+t};this["get"+a]=function(){return this._type===e||o&&/^hs[bl]$/.test(this._type)?this._components[n]:this._convert(e)[n]},this["set"+a]=function(t){this._type===e||o&&/^hs[bl]$/.test(this._type)||(this._components=this._convert(e),this._properties=i[e],this._type=e),this._components[n]=l.call(this,t),this._changed()}},this)},{_class:"Color",_readIndex:!0,initialize:function e(n){var a,o,l,h,u=arguments,c=this.__read,f=0;Array.isArray(n)&&(n=(u=n)[0]);var d=null!=n&&typeof n;if("string"===d&&n in i&&(a=n,n=u[1],Array.isArray(n)?(o=n,l=u[2]):(c&&(f=1),u=r.slice(u,1),d=typeof n)),!o){if(h="number"===d?u:"object"===d&&null!=n.length?n:null){a||(a=h.length>=3?"rgb":"gray");var g=i[a].length;l=h[g],c&&(f+=h===arguments?g+(null!=l?1:0):1),h.length>g&&(h=r.slice(h,0,g))}else if("string"===d){var p=t(n);a=p[0],4===(o=p[1]).length&&(l=o[3],o.length--)}else if("object"===d)if(n.constructor===e){if(a=n._type,o=n._components.slice(),l=n._alpha,"gradient"===a)for(var _=1,v=o.length;_<v;_++){var m=o[_];m&&(o[_]=m.clone())}}else if(n.constructor===B)a="gradient",h=u;else{var y=i[a="hue"in n?"lightness"in n?"hsl":"hsb":"gradient"in n||"stops"in n||"radial"in n?"gradient":"gray"in n?"gray":"rgb"],x=s[a];for(this._components=o=[],_=0,v=y.length;_<v;_++)null==(b=n[y[_]])&&!_&&"gradient"===a&&"stops"in n&&(b={stops:n.stops,radial:n.radial}),null!=(b=x[_].call(this,b))&&(o[_]=b);l=n.alpha}c&&a&&(f=1)}if(this._type=a||"rgb",!o)for(this._components=o=[],_=0,v=(x=s[this._type]).length;_<v;_++){var b;null!=(b=x[_].call(this,h&&h[_]))&&(o[_]=b)}return this._components=o,this._properties=i[this._type],this._alpha=l,c&&(this.__read=f),this},set:"#initialize",_serialize:function(t,e){var n=this.getComponents();return r.serialize(/^(gray|rgb)$/.test(this._type)?n:[this._type].concat(n),t,!0,e)},_changed:function(){this._canvasStyle=null,this._owner&&this._owner._changed(129)},_convert:function(t){var e;return this._type===t?this._components.slice():(e=h[this._type+"-"+t])?e.apply(this,this._components):h["rgb-"+t].apply(this,h[this._type+"-rgb"].apply(this,this._components))},convert:function(t){return new D(t,this._convert(t),this._alpha)},getType:function(){return this._type},setType:function(t){this._components=this._convert(t),this._properties=i[t],this._type=t},getComponents:function(){var t=this._components.slice();return null!=this._alpha&&t.push(this._alpha),t},getAlpha:function(){return null!=this._alpha?this._alpha:1},setAlpha:function(t){this._alpha=null==t?null:Math.min(Math.max(t,0),1),this._changed()},hasAlpha:function(){return null!=this._alpha},equals:function(t){var e=r.isPlainValue(t,!0)?D.read(arguments):t;return e===this||e&&this._class===e._class&&this._type===e._type&&this.getAlpha()===e.getAlpha()&&r.equals(this._components,e._components)||!1},toString:function(){for(var t=this._properties,e=[],n="gradient"===this._type,i=l.instance,r=0,s=t.length;r<s;r++){var a=this._components[r];null!=a&&e.push(t[r]+": "+(n?a:i.number(a)))}return null!=this._alpha&&e.push("alpha: "+i.number(this._alpha)),"{ "+e.join(", ")+" }"},toCSS:function(t){function e(t){return Math.round(255*(t<0?0:t>1?1:t))}var n=this._convert("rgb"),i=t||null==this._alpha?1:this._alpha;return n=[e(n[0]),e(n[1]),e(n[2])],i<1&&n.push(i<0?0:i),t?"#"+((1<<24)+(n[0]<<16)+(n[1]<<8)+n[2]).toString(16).slice(1):(4==n.length?"rgba(":"rgb(")+n.join(",")+")"},toCanvasStyle:function(t,e){if(this._canvasStyle)return this._canvasStyle;if("gradient"!==this._type)return this._canvasStyle=this.toCSS();var n,i=this._components,r=i[0],s=r._stops,a=i[1],o=i[2],l=i[3],h=e&&e.inverted();if(h&&(a=h._transformPoint(a),o=h._transformPoint(o),l&&(l=h._transformPoint(l))),r._radial){var u=o.getDistance(a);if(l){var c=l.subtract(a);c.getLength()>u&&(l=a.add(c.normalize(u-.1)))}var f=l||a;n=t.createRadialGradient(f.x,f.y,0,a.x,a.y,u)}else n=t.createLinearGradient(a.x,a.y,o.x,o.y);for(var d=0,g=s.length;d<g;d++){var p=s[d],_=p._offset;n.addColorStop(null==_?d/(g-1):_,p._color.toCanvasStyle())}return this._canvasStyle=n},transform:function(t){if("gradient"===this._type){for(var e=this._components,n=1,i=e.length;n<i;n++){var r=e[n];t._transformPoint(r,r,!0)}this._changed()}},statics:{_types:i,random:function(){var t=Math.random;return new D(t(),t(),t())}}})},new function(){return r.each({add:function(t,e){return t+e},subtract:function(t,e){return t-e},multiply:function(t,e){return t*e},divide:function(t,e){return t/e}},function(t,e){this[e]=function(e){e=D.read(arguments);for(var n=this._type,i=this._components,r=e._convert(n),s=0,a=i.length;s<a;s++)r[s]=t(i[s],r[s]);return new D(n,r,null!=this._alpha?t(this._alpha,e.getAlpha()):null)}},{})}),B=r.extend({_class:"Gradient",initialize:function(t,e){this._id=u.get(),t&&r.isPlainObject(t)&&(this.set(t),t=e=null),null==this._stops&&this.setStops(t||["white","black"]),null==this._radial&&this.setRadial("string"==typeof e&&"radial"===e||e||!1)},_serialize:function(t,e){return e.add(this,function(){return r.serialize([this._stops,this._radial],t,!0,e)})},_changed:function(){for(var t=0,e=this._owners&&this._owners.length;t<e;t++)this._owners[t]._changed()},_addOwner:function(t){this._owners||(this._owners=[]),this._owners.push(t)},_removeOwner:function(t){var n=this._owners?this._owners.indexOf(t):-1;-1!=n&&(this._owners.splice(n,1),this._owners.length||(this._owners=e))},clone:function(){for(var t=[],e=0,n=this._stops.length;e<n;e++)t[e]=this._stops[e].clone();return new B(t,this._radial)},getStops:function(){return this._stops},setStops:function(t){if(t.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");var n=this._stops;if(n)for(var i=0,r=n.length;i<r;i++)n[i]._owner=e;for(i=0,r=(n=this._stops=q.readList(t,0,{clone:!0})).length;i<r;i++)n[i]._owner=this;this._changed()},getRadial:function(){return this._radial},setRadial:function(t){this._radial=t,this._changed()},equals:function(t){if(t===this)return!0;if(t&&this._class===t._class){var e=this._stops,n=t._stops,i=e.length;if(i===n.length){for(var r=0;r<i;r++)if(!e[r].equals(n[r]))return!1;return!0}}return!1}}),q=r.extend({_class:"GradientStop",initialize:function(t,n){var i=t,r=n;"object"==typeof t&&n===e&&(Array.isArray(t)&&"number"!=typeof t[0]?(i=t[0],r=t[1]):("color"in t||"offset"in t||"rampPoint"in t)&&(i=t.color,r=t.offset||t.rampPoint||0)),this.setColor(i),this.setOffset(r)},clone:function(){return new q(this._color.clone(),this._offset)},_serialize:function(t,e){var n=this._color,i=this._offset;return r.serialize(null==i?[n]:[n,i],t,!0,e)},_changed:function(){this._owner&&this._owner._changed(129)},getOffset:function(){return this._offset},setOffset:function(t){this._offset=t,this._changed()},getRampPoint:"#getOffset",setRampPoint:"#setOffset",getColor:function(){return this._color},setColor:function(){var t=D.read(arguments,0,{clone:!0});t&&(t._owner=this),this._color=t,this._changed()},equals:function(t){return t===this||t&&this._class===t._class&&this._color.equals(t._color)&&this._offset==t._offset||!1}}),U=r.extend(new function(){var t={fillColor:null,fillRule:"nonzero",strokeColor:null,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",strokeScaling:!0,miterLimit:10,dashOffset:0,dashArray:[],shadowColor:null,shadowBlur:0,shadowOffset:new c,selectedColor:null},n=r.set({},t,{fontFamily:"sans-serif",fontWeight:"normal",fontSize:12,leading:null,justification:"left"}),i=r.set({},n,{fillColor:new D}),s={strokeWidth:193,strokeCap:193,strokeJoin:193,strokeScaling:201,miterLimit:193,fontFamily:9,fontWeight:9,fontSize:9,font:9,leading:9,justification:9},a={beans:!0},o={_class:"Style",beans:!0,initialize:function(e,r,s){this._values={},this._owner=r,this._project=r&&r._project||s||st.project,this._defaults=!r||r instanceof b?n:r instanceof j?i:t,e&&this.set(e)}};return r.each(n,function(t,n){var i=/Color$/.test(n),l="shadowOffset"===n,h=r.capitalize(n),u=s[n],f="set"+h,d="get"+h;o[f]=function(t){var r=this._owner,s=r&&r._children,a=s&&s.length>0&&!(r instanceof L);if(a)for(var o=0,l=s.length;o<l;o++)s[o]._style[f](t);if(("selectedColor"===n||!a)&&n in this._defaults){var h=this._values[n];h!==t&&(i&&(h&&h._owner!==e&&(h._owner=e,h._canvasStyle=null),t&&t.constructor===D&&(t._owner&&(t=t.clone()),t._owner=r)),this._values[n]=t,r&&r._changed(u||129))}},o[d]=function(t){var s,a=this._owner,o=a&&a._children;if(n in this._defaults&&(!o||!o.length||t||a instanceof L))if((s=this._values[n])===e)(s=this._defaults[n])&&s.clone&&(s=s.clone());else{var h=i?D:l?c:null;!h||s&&s.constructor===h||(this._values[n]=s=h.read([s],0,{readNull:!0,clone:!0}),s&&i&&(s._owner=a))}else if(o)for(var u=0,f=o.length;u<f;u++){var g=o[u]._style[d]();if(u){if(!r.equals(s,g))return e}else s=g}return s},a[d]=function(t){return this._style[d](t)},a[f]=function(t){this._style[f](t)}}),r.each({Font:"FontFamily",WindingRule:"FillRule"},function(t,e){var n="get"+e,i="set"+e;o[n]=a[n]="#get"+t,o[i]=a[i]="#set"+t}),x.inject(a),o},{set:function(t){var e=t instanceof U,n=e?t._values:t;if(n)for(var i in n)if(i in this._defaults){var r=n[i];this[i]=r&&e&&r.clone?r.clone():r}},equals:function(t){function n(t,n,i){var s=t._values,a=n._values,o=n._defaults;for(var l in s){var h=a[l];if(!(i&&l in a||r.equals(s[l],h===e?o[l]:h)))return!1}return!0}return t===this||t&&this._class===t._class&&n(this,t)&&n(t,this,!0)||!1},_dispose:function(){var t;(t=this.getFillColor())&&(t._canvasStyle=null),(t=this.getStrokeColor())&&(t._canvasStyle=null),(t=this.getShadowColor())&&(t._canvasStyle=null)},hasFill:function(){var t=this.getFillColor();return!!t&&t.alpha>0},hasStroke:function(){var t=this.getStrokeColor();return!!t&&t.alpha>0&&this.getStrokeWidth()>0},hasShadow:function(){var t=this.getShadowColor();return!!t&&t.alpha>0&&(this.getShadowBlur()>0||!this.getShadowOffset().isZero())},getView:function(){return this._project._view},getFontStyle:function(){var t=this.getFontSize();return this.getFontWeight()+" "+t+(/[a-z]/i.test(t+"")?" ":"px ")+this.getFontFamily()},getFont:"#getFontFamily",setFont:"#setFontFamily",getLeading:function t(){var e=t.base.call(this),n=this.getFontSize();return/pt|em|%|px/.test(n)&&(n=this.getView().getPixelSize(n)),null!=e?e:1.2*n}}),V=new function(){function t(t,e,n,i){for(var r=["","webkit","moz","Moz","ms","o"],s=e[0].toUpperCase()+e.substring(1),a=0;a<6;a++){var o=r[a],l=o?o+s:e;if(l in t){if(!n)return t[l];t[l]=i;break}}}return{getStyles:function(t){var e=t&&9!==t.nodeType?t.ownerDocument:t,n=e&&e.defaultView;return n&&n.getComputedStyle(t,"")},getBounds:function(t,e){var n,i=t.ownerDocument,r=i.body,s=i.documentElement;try{n=t.getBoundingClientRect()}catch(a){n={left:0,top:0,width:0,height:0}}var o=n.left-(s.clientLeft||r.clientLeft||0),l=n.top-(s.clientTop||r.clientTop||0);if(!e){var h=i.defaultView;o+=h.pageXOffset||s.scrollLeft||r.scrollLeft,l+=h.pageYOffset||s.scrollTop||r.scrollTop}return new p(o,l,n.width,n.height)},getViewportBounds:function(t){var e=t.ownerDocument,n=e.defaultView,i=e.documentElement;return new p(0,0,n.innerWidth||i.clientWidth,n.innerHeight||i.clientHeight)},getOffset:function(t,e){return V.getBounds(t,e).getPoint()},getSize:function(t){return V.getBounds(t,!0).getSize()},isInvisible:function(t){return V.getSize(t).equals(new d(0,0))},isInView:function(t){return!V.isInvisible(t)&&V.getViewportBounds(t).intersects(V.getBounds(t,!0))},isInserted:function(t){return i.body.contains(t)},getPrefixed:function(e,n){return e&&t(e,n)},setPrefixed:function(e,n,i){if("object"==typeof n)for(var r in n)t(e,r,!0,n[r]);else t(e,n,!0,i)}}},H={add:function(t,e){if(t)for(var n in e)for(var r=e[n],s=n.split(/[\s,]+/g),a=0,o=s.length;a<o;a++){var l=s[a];t.addEventListener(l,r,t===i&&("touchstart"===l||"touchmove"===l)&&{passive:!1})}},remove:function(t,e){if(t)for(var n in e)for(var i=e[n],r=n.split(/[\s,]+/g),s=0,a=r.length;s<a;s++)t.removeEventListener(r[s],i,!1)},getPoint:function(t){var e=t.targetTouches?t.targetTouches.length?t.targetTouches[0]:t.changedTouches[0]:t;return new c(e.pageX||e.clientX+i.documentElement.scrollLeft,e.pageY||e.clientY+i.documentElement.scrollTop)},getTarget:function(t){return t.target||t.srcElement},getRelatedTarget:function(t){return t.relatedTarget||t.toElement},getOffset:function(t,e){return H.getPoint(t).subtract(V.getOffset(e||H.getTarget(t)))}};H.requestAnimationFrame=new function(){function t(){var e=s;s=[];for(var n=0,a=e.length;n<a;n++)e[n]();(r=i&&s.length)&&i(t)}var e,i=V.getPrefixed(n,"requestAnimationFrame"),r=!1,s=[];return function(n){s.push(n),i?r||(i(t),r=!0):e||(e=setInterval(t,1e3/60))}};var G=r.extend(s,{_class:"View",initialize:function t(e,r){function s(t){return r[t]||parseInt(r.getAttribute(t),10)}function o(){var t=V.getSize(r);return t.isNaN()||t.isZero()?new d(s("width"),s("height")):t}var l;if(n&&r){this._id=r.getAttribute("id"),null==this._id&&r.setAttribute("id",this._id="view-"+t._id++),H.add(r,this._viewEvents);var h="none";if(V.setPrefixed(r.style,{userDrag:h,userSelect:h,touchCallout:h,contentZooming:h,tapHighlightColor:"rgba(0,0,0,0)"}),a.hasAttribute(r,"resize")){var u=this;H.add(n,this._windowEvents={resize:function(){u.setViewSize(o())}})}if(l=o(),a.hasAttribute(r,"stats")&&"undefined"!=typeof Stats){this._stats=new Stats;var c=this._stats.domElement,f=c.style,g=V.getOffset(r);f.position="absolute",f.left=g.x+"px",f.top=g.y+"px",i.body.appendChild(c)}}else l=new d(r),r=null;this._project=e,this._scope=e._scope,this._element=r,this._pixelRatio||(this._pixelRatio=n&&n.devicePixelRatio||1),this._setElementSize(l.width,l.height),this._viewSize=l,t._views.push(this),t._viewsById[this._id]=this,(this._matrix=new v)._owner=this,t._focused||(t._focused=this),this._frameItems={},this._frameItemCount=0,this._itemEvents={native:{},virtual:{}},this._autoUpdate=!st.agent.node,this._needsUpdate=!1},remove:function(){if(!this._project)return!1;G._focused===this&&(G._focused=null),G._views.splice(G._views.indexOf(this),1),delete G._viewsById[this._id];var t=this._project;return t._view===this&&(t._view=null),H.remove(this._element,this._viewEvents),H.remove(n,this._windowEvents),this._element=this._project=null,this.off("frame"),this._animate=!1,this._frameItems={},!0},_events:r.each(x._itemHandlers.concat(["onResize","onKeyDown","onKeyUp"]),function(t){this[t]={}},{onFrame:{install:function(){this.play()},uninstall:function(){this.pause()}}}),_animate:!1,_time:0,_count:0,getAutoUpdate:function(){return this._autoUpdate},setAutoUpdate:function(t){this._autoUpdate=t,t&&this.requestUpdate()},update:function(){},draw:function(){this.update()},requestUpdate:function(){if(!this._requested){var t=this;H.requestAnimationFrame(function(){if(t._requested=!1,t._animate){t.requestUpdate();var e=t._element;V.getPrefixed(i,"hidden")&&"true"!==a.getAttribute(e,"keepalive")||!V.isInView(e)||t._handleFrame()}t._autoUpdate&&t.update()}),this._requested=!0}},play:function(){this._animate=!0,this.requestUpdate()},pause:function(){this._animate=!1},_handleFrame:function(){st=this._scope;var t=Date.now()/1e3,e=this._last?t-this._last:0;this._last=t,this.emit("frame",new r({delta:e,time:this._time+=e,count:this._count++})),this._stats&&this._stats.update()},_animateItem:function(t,e){var n=this._frameItems;e?(n[t._id]={item:t,time:0,count:0},1==++this._frameItemCount&&this.on("frame",this._handleFrameItems)):(delete n[t._id],0==--this._frameItemCount&&this.off("frame",this._handleFrameItems))},_handleFrameItems:function(t){for(var e in this._frameItems){var n=this._frameItems[e];n.item.emit("frame",new r(t,{time:n.time+=t.delta,count:n.count++}))}},_changed:function(){this._project._changed(4097),this._bounds=this._decomposed=e},getElement:function(){return this._element},getPixelRatio:function(){return this._pixelRatio},getResolution:function(){return 72*this._pixelRatio},getViewSize:function(){var t=this._viewSize;return new g(t.width,t.height,this,"setViewSize")},setViewSize:function(){var t=d.read(arguments),e=t.subtract(this._viewSize);e.isZero()||(this._setElementSize(t.width,t.height),this._viewSize.set(t),this._changed(),this.emit("resize",{size:t,delta:e}),this._autoUpdate&&this.update())},_setElementSize:function(t,e){var n=this._element;n&&(n.width!==t&&(n.width=t),n.height!==e&&(n.height=e))},getBounds:function(){return this._bounds||(this._bounds=this._matrix.inverted()._transformBounds(new p(new c,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},isVisible:function(){return V.isInView(this._element)},isInserted:function(){return V.isInserted(this._element)},getPixelSize:function(t){var e,n=this._element;if(n){var r=n.parentNode,s=i.createElement("div");s.style.fontSize=t,r.appendChild(s),e=parseFloat(V.getStyles(s).fontSize),r.removeChild(s)}else e=parseFloat(e);return e},getTextWidth:function(t,e){return 0}},r.each(["rotate","scale","shear","skew"],function(t){var e="rotate"===t;this[t]=function(){var n=(e?r:c).read(arguments),i=c.read(arguments,0,{readNull:!0});return this.transform((new v)[t](n,i||this.getCenter(!0)))}},{_decompose:function(){return this._decomposed||(this._decomposed=this._matrix.decompose())},translate:function(){var t=new v;return this.transform(t.translate.apply(t,arguments))},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(){var t=c.read(arguments);this.translate(this.getCenter().subtract(t))},getZoom:function(){var t=this._decompose().scaling;return(t.x+t.y)/2},setZoom:function(t){this.transform((new v).scale(t/this.getZoom(),this.getCenter()))},getRotation:function(){return this._decompose().rotation},setRotation:function(t){var e=this.getRotation();null!=e&&null!=t&&this.rotate(t-e)},getScaling:function(){var t=this._decompose().scaling;return new f(t.x,t.y,this,"setScaling")},setScaling:function(){var t=this.getScaling(),e=c.read(arguments,0,{clone:!0,readNull:!0});t&&e&&this.scale(e.x/t.x,e.y/t.y)},getMatrix:function(){return this._matrix},setMatrix:function(){var t=this._matrix;t.initialize.apply(t,arguments)},transform:function(t){this._matrix.append(t)},scrollBy:function(){this.translate(c.read(arguments).negate())}}),{projectToView:function(){return this._matrix._transformPoint(c.read(arguments))},viewToProject:function(){return this._matrix._inverseTransform(c.read(arguments))},getEventPoint:function(t){return this.viewToProject(H.getOffset(t,this._element))}},{statics:{_views:[],_viewsById:{},_id:0,create:function(t,e){return i&&"string"==typeof e&&(e=i.getElementById(e)),new(n?W:G)(t,e)}}},new function(){function t(t){var e=H.getTarget(t);return e.getAttribute&&G._viewsById[e.getAttribute("id")]}function e(){var t=G._focused;if(!t||!t.isVisible())for(var e=0,n=G._views.length;e<n;e++)if((t=G._views[e]).isVisible()){G._focused=l=t;break}}function r(t,e,n){t._handleMouseEvent("mousemove",e,n)}function s(t,e,n,i,r,s,a){function o(t,n){if(t.responds(n)){if(l||(l=new J(n,i,r,e||t,s?r.subtract(s):null)),t.emit(n,l)&&(k=!0,l.prevented&&(A=!0),l.stopped))return h=!0}else{var a=T[n];if(a)return o(t,a)}}for(var l,h=!1;t&&t!==a&&!o(t,n);)t=t._parent;return h}function a(t,e,n,i,r,a){return t._project.removeOn(n),A=k=!1,b&&s(b,null,n,i,r,a)||e&&e!==b&&!e.isDescendant(b)&&s(e,null,"mousedrag"===n?"mousemove":n,i,r,a,b)||s(t,b||e||t,n,i,r,a)}if(n){var o,l,h,u,c,f=!1,d=!1,g=n.navigator;g.pointerEnabled||g.msPointerEnabled?(h="pointerdown MSPointerDown",u="pointermove MSPointerMove",c="pointerup pointercancel MSPointerUp MSPointerCancel"):(h="touchstart",u="touchmove",c="touchend touchcancel","ontouchstart"in n&&g.userAgent.match(/mobile|tablet|ip(ad|hone|od)|android|silk/i)||(h+=" mousedown",u+=" mousemove",c+=" mouseup"));var p={},_={mouseout:function(t){var e=G._focused,n=H.getRelatedTarget(t);if(e&&(!n||"HTML"===n.nodeName)){var i=H.getOffset(t,e._element),s=i.x,a=Math.abs,o=a(s),l=o-(1<<25);i.x=a(l)<o?l*(s<0?-1:1):s,r(e,t,e.viewToProject(i))}},scroll:e};p[h]=function(e){var n=G._focused=t(e);f||(f=!0,n._handleMouseEvent("mousedown",e))},_[u]=function(n){var i=G._focused;if(!d){var s=t(n);s?i!==s&&(i&&r(i,n),o||(o=i),i=G._focused=l=s):l&&l===i&&(o&&!o.isInserted()&&(o=null),i=G._focused=o,o=null,e())}i&&r(i,n)},_[h]=function(){d=!0},_[c]=function(t){var e=G._focused;e&&f&&e._handleMouseEvent("mouseup",t),d=f=!1},H.add(i,_),H.add(n,{load:e});var v,m,y,x,b,w,C,S,k=!1,A=!1,T={doubleclick:"click",mousedrag:"mousemove"},E=!1,M={mousedown:{mousedown:1,mousedrag:1,click:1,doubleclick:1},mouseup:{mouseup:1,mousedrag:1,click:1,doubleclick:1},mousemove:{mousedrag:1,mousemove:1,mouseenter:1,mouseleave:1}};return{_viewEvents:p,_handleMouseEvent:function(t,e,n){function i(t){return r.virtual[t]||u.responds(t)||h&&h.responds(t)}var r=this._itemEvents,o=r.native[t],l="mousemove"===t,h=this._scope.tool,u=this;l&&f&&i("mousedrag")&&(t="mousedrag"),n||(n=this.getEventPoint(e));var c=this.getBounds().contains(n),d=o&&c&&u._project.hitTest(n,{tolerance:0,fill:!0,stroke:!0}),g=d&&d.item||null,p=!1,_={};if(_[t.substr(5)]=!0,o&&g!==x&&(x&&s(x,null,"mouseleave",e,n),g&&s(g,null,"mouseenter",e,n),x=g),E^c&&(s(this,null,c?"mouseenter":"mouseleave",e,n),p=!0),!c&&!_.drag||n.equals(m)||(a(this,g,l?t:"mousemove",e,n,m),p=!0),E=c,_.down&&c||_.up&&v){if(a(this,g,t,e,n,v),_.down){if(S=g===w&&Date.now()-C<300,y=w=g,!A&&g){for(var T=g;T&&!T.responds("mousedrag");)T=T._parent;T&&(b=g)}v=n}else _.up&&(A||g!==y||(C=Date.now(),a(this,g,S?"doubleclick":"click",e,n,v),S=!1),y=b=null);E=!1,p=!0}m=n,p&&h&&(k=h._handleMouseEvent(t,e,n,_)||k),!1!==e.cancelable&&(k&&!_.move||_.down&&i("mouseup"))&&e.preventDefault()},_handleKeyEvent:function(t,e,n,i){function r(r){r.responds(t)&&(st=a,r.emit(t,s=s||new Z(t,e,n,i)))}var s,a=this._scope,o=a.tool;this.isVisible()&&(r(this),o&&o.responds(t)&&r(o))},_countItemEvent:function(t,e){var n=this._itemEvents,i=n.native,r=n.virtual;for(var s in M)i[s]=(i[s]||0)+(M[s][t]||0)*e;r[t]=(r[t]||0)+e},statics:{updateFocus:e,_resetState:function(){f=d=k=E=!1,o=l=v=m=y=x=b=w=C=S=null}}}}}),W=G.extend({_class:"CanvasView",initialize:function(t,e){if(!(e instanceof n.HTMLCanvasElement)){var i=d.read(arguments,1);if(i.isZero())throw new Error("Cannot create CanvasView with the provided argument: "+r.slice(arguments,1));e=et.getCanvas(i)}var s=this._context=e.getContext("2d");if(s.save(),this._pixelRatio=1,!/^off|false$/.test(a.getAttribute(e,"hidpi"))){var o=n.devicePixelRatio||1,l=V.getPrefixed(s,"backingStorePixelRatio")||1;this._pixelRatio=o/l}G.call(this,t,e),this._needsUpdate=!0},remove:function t(){return this._context.restore(),t.base.call(this)},_setElementSize:function t(e,n){var i=this._pixelRatio;if(t.base.call(this,e*i,n*i),1!==i){var r=this._element,s=this._context;if(!a.hasAttribute(r,"resize")){var o=r.style;o.width=e+"px",o.height=n+"px"}s.restore(),s.save(),s.scale(i,i)}},getPixelSize:function t(e){var n,i=st.agent;if(i&&i.firefox)n=t.base.call(this,e);else{var r=this._context,s=r.font;r.font=e+" serif",n=parseFloat(r.font),r.font=s}return n},getTextWidth:function(t,e){var n=this._context,i=n.font,r=0;n.font=t;for(var s=0,a=e.length;s<a;s++)r=Math.max(r,n.measureText(e[s]).width);return n.font=i,r},update:function(){if(!this._needsUpdate)return!1;var t=this._project,e=this._context,n=this._viewSize;return e.clearRect(0,0,n.width+1,n.height+1),t&&t.draw(e,this._matrix,this._pixelRatio),this._needsUpdate=!1,!0}}),$=r.extend({_class:"Event",initialize:function(t){this.event=t,this.type=t&&t.type},prevented:!1,stopped:!1,preventDefault:function(){this.prevented=!0,this.event.preventDefault()},stopPropagation:function(){this.stopped=!0,this.event.stopPropagation()},stop:function(){this.stopPropagation(),this.preventDefault()},getTimeStamp:function(){return this.event.timeStamp},getModifiers:function(){return X.modifiers}}),Z=$.extend({_class:"KeyEvent",initialize:function(t,e,n,i){this.type=t,this.event=e,this.key=n,this.character=i},toString:function(){return"{ type: '"+this.type+"', key: '"+this.key+"', character: '"+this.character+"', modifiers: "+this.getModifiers()+" }"}}),X=new function(){function t(t){var n=t.key||t.keyIdentifier;return n=/^U\+/.test(n)?String.fromCharCode(parseInt(n.substr(2),16)):/^Arrow[A-Z]/.test(n)?n.substr(5):"Unidentified"===n||n===e?String.fromCharCode(t.keyCode):n,l[n]||(n.length>1?r.hyphenate(n):n.toLowerCase())}function s(t,e,n,i){var o,l=G._focused;if(u[e]=t,t?c[e]=n:delete c[e],e.length>1&&(o=r.camelize(e))in f){f[o]=t;var h=st&&st.agent;if("meta"===o&&h&&h.mac)if(t)a={};else{for(var d in a)d in c&&s(!1,d,a[d],i);a=null}}else t&&a&&(a[e]=n);l&&l._handleKeyEvent(t?"keydown":"keyup",i,e,n)}var a,o,l={"\t":"tab"," ":"space","\b":"backspace","\x7f":"delete",Spacebar:"space",Del:"delete",Win:"meta",Esc:"escape"},h={tab:"\t",space:" ",enter:"\r"},u={},c={},f=new r({shift:!1,control:!1,alt:!1,meta:!1,capsLock:!1,space:!1}).inject({option:{get:function(){return this.alt}},command:{get:function(){var t=st&&st.agent;return t&&t.mac?this.meta:this.control}}});return H.add(i,{keydown:function(e){var n=t(e),i=st&&st.agent;n.length>1||i&&i.chrome&&(e.altKey||i.mac&&e.metaKey||!i.mac&&e.ctrlKey)?s(!0,n,h[n]||(n.length>1?"":n),e):o=n},keypress:function(e){if(o){var n=t(e),i=e.charCode,r=i>=32?String.fromCharCode(i):n.length>1?"":n;n!==o&&(n=r.toLowerCase()),s(!0,n,r,e),o=null}},keyup:function(e){var n=t(e);n in c&&s(!1,n,c[n],e)}}),H.add(n,{blur:function(t){for(var e in c)s(!1,e,c[e],t)}}),{modifiers:f,isDown:function(t){return!!u[t]}}},J=$.extend({_class:"MouseEvent",initialize:function(t,e,n,i,r){this.type=t,this.event=e,this.point=n,this.target=i,this.delta=r},toString:function(){return"{ type: '"+this.type+"', point: "+this.point+", target: "+this.target+(this.delta?", delta: "+this.delta:"")+", modifiers: "+this.getModifiers()+" }"}}),Y=$.extend({_class:"ToolEvent",_item:null,initialize:function(t,e,n){this.tool=t,this.type=e,this.event=n},_choosePoint:function(t,e){return t||(e?e.clone():null)},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(t){this._point=t},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(t){this._lastPoint=t},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(t){this._downPoint=t},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this._middlePoint},setMiddlePoint:function(t){this._middlePoint=t},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(t){this._delta=t},getCount:function(){return this.tool[/^mouse(down|up)$/.test(this.type)?"_downCount":"_moveCount"]},setCount:function(t){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=t},getItem:function(){if(!this._item){var t=this.tool._scope.project.hitTest(this.getPoint());if(t){for(var e=t.item,n=e._parent;/^(Group|CompoundPath)$/.test(n._class);)e=n,n=n._parent;this._item=e}}return this._item},setItem:function(t){this._item=t},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),K=o.extend({_class:"Tool",_list:"tools",_reference:"tool",_events:["onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onActivate","onDeactivate","onEditOptions","onKeyDown","onKeyUp"],initialize:function(t){o.call(this),this._moveCount=-1,this._downCount=-1,this.set(t)},getMinDistance:function(){return this._minDistance},setMinDistance:function(t){this._minDistance=t,null!=t&&null!=this._maxDistance&&t>this._maxDistance&&(this._maxDistance=t)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(t){this._maxDistance=t,null!=this._minDistance&&null!=t&&t<this._minDistance&&(this._minDistance=t)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(t){this._minDistance=this._maxDistance=t},_handleMouseEvent:function(t,e,n,i){function r(t,e){var r=n,s=a?c._point:c._downPoint||r;if(a){if(c._moveCount>=0&&r.equals(s))return!1;if(s&&(null!=t||null!=e)){var o=r.subtract(s),l=o.getLength();if(l<(t||0))return!1;e&&(r=s.add(o.normalize(Math.min(l,e))))}c._moveCount++}return c._point=r,c._lastPoint=s||r,i.down&&(c._moveCount=-1,c._downPoint=r,c._downCount++),!0}function s(){o&&(u=c.emit(t,new Y(c,t,e))||u)}st=this._scope,i.drag&&!this.responds(t)&&(t="mousemove");var a=i.move||i.drag,o=this.responds(t),l=this.minDistance,h=this.maxDistance,u=!1,c=this;if(i.down)r(),s();else if(i.up)r(null,h),s();else if(o)for(;r(l,h);)s();return u}}),Q=r.extend(s,{_class:"Tween",statics:{easings:{linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:2*(2-t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}}},initialize:function t(e,n,i,r,s,a){this.object=e;var o=typeof s,l="function"===o;this.type=l?o:"string"===o?s:"linear",this.easing=l?s:t.easings[this.type],this.duration=r,this.running=!1,this._then=null,this._startTime=null;var h=n||i;this._keys=h?Object.keys(h):[],this._parsedKeys=this._parseKeys(this._keys),this._from=h&&this._getState(n),this._to=h&&this._getState(i),!1!==a&&this.start()},then:function(t){return this._then=t,this},start:function(){return this._startTime=null,this.running=!0,this},stop:function(){return this.running=!1,this},update:function(t){if(this.running){t>1&&(t=1,this.running=!1);for(var e=this.easing(t),n=this._keys,i=function(n){return"function"==typeof n?n(e,t):n},s=0,a=n&&n.length;s<a;s++){var o=n[s],l=i(this._from[o]),h=i(this._to[o]),u=l&&h&&l.__add&&h.__add?h.__subtract(l).__multiply(e).__add(l):(h-l)*e+l;this._setProperty(this._parsedKeys[o],u)}!this.running&&this._then&&this._then(this.object),this.responds("update")&&this.emit("update",new r({progress:t,factor:e}))}return this},_events:{onUpdate:{}},_handleFrame:function(t){var e=this._startTime,n=e?(t-e)/this.duration:0;e||(this._startTime=t),this.update(n)},_getState:function(t){for(var e=this._keys,n={},i=0,r=e.length;i<r;i++){var s,a=e[i],o=this._parsedKeys[a],l=this._getProperty(o);if(t){var h=this._resolveValue(l,t[a]);this._setProperty(o,h),s=(s=this._getProperty(o))&&s.clone?s.clone():s,this._setProperty(o,l)}else s=l&&l.clone?l.clone():l;n[a]=s}return n},_resolveValue:function(t,e){if(e){if(Array.isArray(e)&&2===e.length){var n=e[0];return n&&n.match&&n.match(/^[+\-*\/]=/)?this._calculate(t,n[0],e[1]):e}if("string"==typeof e){var i=e.match(/^[+\-*\/]=(.*)/);if(i){var r=JSON.parse(i[1].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '));return this._calculate(t,e[0],r)}}}return e},_calculate:function(t,e,n){return st.PaperScript.calculateBinary(t,e,n)},_parseKeys:function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n],s=r.replace(/\.([^.]*)/g,"/$1").replace(/\[['"]?([^'"\]]*)['"]?\]/g,"/$1");e[r]=s.split("/")}return e},_getProperty:function(t,e){for(var n=this.object,i=0,r=t.length-(e||0);i<r&&n;i++)n=n[t[i]];return n},_setProperty:function(t,e){var n=this._getProperty(t,1);n&&(n[t[t.length-1]]=e)}}),tt={request:function(e){var n=new t.XMLHttpRequest;return n.open((e.method||"get").toUpperCase(),e.url,r.pick(e.async,!0)),e.mimeType&&n.overrideMimeType(e.mimeType),n.onload=function(){var t=n.status;0===t||200===t?e.onLoad&&e.onLoad.call(n,n.responseText):n.onerror()},n.onerror=function(){var t=n.status,i='Could not load "'+e.url+'" (Status: '+t+")";if(!e.onError)throw new Error(i);e.onError(i,t)},n.send(null)}},et={canvases:[],getCanvas:function(t,e){if(!n)return null;var r,s=!0;"object"==typeof t&&(e=t.height,t=t.width),this.canvases.length?r=this.canvases.pop():(r=i.createElement("canvas"),s=!1);var a=r.getContext("2d");if(!a)throw new Error("Canvas "+r+" is unable to provide a 2D context.");return r.width===t&&r.height===e?s&&a.clearRect(0,0,t+1,e+1):(r.width=t,r.height=e),a.save(),r},getContext:function(t,e){var n=this.getCanvas(t,e);return n?n.getContext("2d"):null},release:function(t){var e=t&&t.canvas?t.canvas:t;e&&e.getContext&&(e.getContext("2d").restore(),this.canvases.push(e))}},nt=new function(){function t(t,e,n){return.2989*t+.587*e+.114*n}function e(e,n,i,r){var s=r-t(e,n,i),a=(r=t(d=e+s,g=n+s,p=i+s),_(d,g,p)),o=v(d,g,p);if(a<0){var l=r-a;d=r+(d-r)*r/l,g=r+(g-r)*r/l,p=r+(p-r)*r/l}if(o>255){var h=255-r,u=o-r;d=r+(d-r)*h/u,g=r+(g-r)*h/u,p=r+(p-r)*h/u}}function n(t,e,n){return v(t,e,n)-_(t,e,n)}function i(t,e,n,i){var r,s=[t,e,n],a=v(t,e,n),o=_(t,e,n);r=0===_(o=o===t?0:o===e?1:2,a=a===t?0:a===e?1:2)?1===v(o,a)?2:1:0,s[a]>s[o]?(s[r]=(s[r]-s[o])*i/(s[a]-s[o]),s[a]=i):s[r]=s[a]=0,s[o]=0,d=s[0],g=s[1],p=s[2]}var s,a,o,l,h,u,c,f,d,g,p,_=Math.min,v=Math.max,m=Math.abs,y={multiply:function(){d=h*s/255,g=u*a/255,p=c*o/255},screen:function(){d=h+s-h*s/255,g=u+a-u*a/255,p=c+o-c*o/255},overlay:function(){d=h<128?2*h*s/255:255-2*(255-h)*(255-s)/255,g=u<128?2*u*a/255:255-2*(255-u)*(255-a)/255,p=c<128?2*c*o/255:255-2*(255-c)*(255-o)/255},"soft-light":function(){var t=s*h/255;d=t+h*(255-(255-h)*(255-s)/255-t)/255,g=(t=a*u/255)+u*(255-(255-u)*(255-a)/255-t)/255,p=(t=o*c/255)+c*(255-(255-c)*(255-o)/255-t)/255},"hard-light":function(){d=s<128?2*s*h/255:255-2*(255-s)*(255-h)/255,g=a<128?2*a*u/255:255-2*(255-a)*(255-u)/255,p=o<128?2*o*c/255:255-2*(255-o)*(255-c)/255},"color-dodge":function(){d=0===h?0:255===s?255:_(255,255*h/(255-s)),g=0===u?0:255===a?255:_(255,255*u/(255-a)),p=0===c?0:255===o?255:_(255,255*c/(255-o))},"color-burn":function(){d=255===h?255:0===s?0:v(0,255-255*(255-h)/s),g=255===u?255:0===a?0:v(0,255-255*(255-u)/a),p=255===c?255:0===o?0:v(0,255-255*(255-c)/o)},darken:function(){d=h<s?h:s,g=u<a?u:a,p=c<o?c:o},lighten:function(){d=h>s?h:s,g=u>a?u:a,p=c>o?c:o},difference:function(){(d=h-s)<0&&(d=-d),(g=u-a)<0&&(g=-g),(p=c-o)<0&&(p=-p)},exclusion:function(){d=h+s*(255-h-h)/255,g=u+a*(255-u-u)/255,p=c+o*(255-c-c)/255},hue:function(){i(s,a,o,n(h,u,c)),e(d,g,p,t(h,u,c))},saturation:function(){i(h,u,c,n(s,a,o)),e(d,g,p,t(h,u,c))},luminosity:function(){e(h,u,c,t(s,a,o))},color:function(){e(s,a,o,t(h,u,c))},add:function(){d=_(h+s,255),g=_(u+a,255),p=_(c+o,255)},subtract:function(){d=v(h-s,0),g=v(u-a,0),p=v(c-o,0)},average:function(){d=(h+s)/2,g=(u+a)/2,p=(c+o)/2},negation:function(){d=255-m(255-s-h),g=255-m(255-a-u),p=255-m(255-o-c)}},x=this.nativeModes=r.each(["source-over","source-in","source-out","source-atop","destination-over","destination-in","destination-out","destination-atop","lighter","darker","copy","xor"],function(t){this[t]=!0},{}),b=et.getContext(1,1);b&&(r.each(y,function(t,e){var n="darken"===e,i=!1;b.save();try{b.fillStyle=n?"#300":"#a00",b.fillRect(0,0,1,1),b.globalCompositeOperation=e,b.globalCompositeOperation===e&&(b.fillStyle=n?"#a00":"#300",b.fillRect(0,0,1,1),i=b.getImageData(0,0,1,1).data[0]!==n?170:51)}catch(r){}b.restore(),x[e]=i}),et.release(b)),this.process=function(t,e,n,i,r){var _=e.canvas,v="normal"===t;if(v||x[t])n.save(),n.setTransform(1,0,0,1,0,0),n.globalAlpha=i,v||(n.globalCompositeOperation=t),n.drawImage(_,r.x,r.y),n.restore();else{var m=y[t];if(!m)return;for(var b=n.getImageData(r.x,r.y,_.width,_.height),w=b.data,C=e.getImageData(0,0,_.width,_.height).data,S=0,k=w.length;S<k;S+=4){s=C[S],h=w[S],a=C[S+1],u=w[S+1],o=C[S+2],c=w[S+2],l=C[S+3],f=w[S+3],m();var A=l*i/255,T=1-A;w[S]=A*d+T*h,w[S+1]=A*g+T*u,w[S+2]=A*p+T*c,w[S+3]=l*i+T*f}n.putImageData(b,r.x,r.y)}}},it=new function(){function t(t,e,n){for(var i in e){var r=e[i],a=s[i];"number"==typeof r&&n&&(r=n.number(r)),a?t.setAttributeNS(a,i,r):t.setAttribute(i,r)}return t}var e="http://www.w3.org/2000/svg",n="http://www.w3.org/2000/xmlns",r="http://www.w3.org/1999/xlink",s={href:r,xlink:n,xmlns:n+"/","xmlns:xlink":n+"/"};return{svg:e,xmlns:n,xlink:r,create:function(n,r,s){return t(i.createElementNS(e,n),r,s)},get:function(t,e){var n=s[e],i=n?t.getAttributeNS(n,e):t.getAttribute(e);return"null"===i?null:i},set:t}},rt=r.each({fillColor:["fill","color"],fillRule:["fill-rule","string"],strokeColor:["stroke","color"],strokeWidth:["stroke-width","number"],strokeCap:["stroke-linecap","string"],strokeJoin:["stroke-linejoin","string"],strokeScaling:["vector-effect","lookup",{true:"none",false:"non-scaling-stroke"},function(t,e){return!e&&(t instanceof R||t instanceof C||t instanceof j)}],miterLimit:["stroke-miterlimit","number"],dashArray:["stroke-dasharray","array"],dashOffset:["stroke-dashoffset","number"],fontFamily:["font-family","string"],fontWeight:["font-weight","string"],fontSize:["font-size","number"],justification:["text-anchor","lookup",{left:"start",center:"middle",right:"end"}],opacity:["opacity","number"],blendMode:["mix-blend-mode","style"]},function(t,e){var n=r.capitalize(e),i=t[2];this[e]={type:t[1],property:e,attribute:t[0],toSVG:i,fromSVG:i&&r.each(i,function(t,e){this[t]=e},{}),exportFilter:t[3],get:"get"+n,set:"set"+n}},{});new function(){function e(t,e,n){var i=new r,s=t.getTranslation();if(e){var a=(t=t._shiftless())._inverseTransform(s);i[n?"cx":"x"]=a.x,i[n?"cy":"y"]=a.y,s=null}if(!t.isIdentity()){var o=t.decompose();if(o){var l=[],u=o.rotation,c=o.scaling,f=o.skewing;s&&!s.isZero()&&l.push("translate("+g.point(s)+")"),u&&l.push("rotate("+g.number(u)+")"),h.isZero(c.x-1)&&h.isZero(c.y-1)||l.push("scale("+g.point(c)+")"),f.x&&l.push("skewX("+g.number(f.x)+")"),f.y&&l.push("skewY("+g.number(f.y)+")"),i.transform=l.join(" ")}else i.transform="matrix("+t.getValues().join(",")+")"}return i}function n(t,n){for(var i=e(t._matrix),r=t._children,s=it.create("g",i,g),a=0,l=r.length;a<l;a++){var h=r[a],u=f(h,n);if(u)if(h.isClipMask()){var c=it.create("clipPath");c.appendChild(u),o(h,c,"clip"),it.set(s,{"clip-path":"url(#"+c.id+")"})}else s.appendChild(u)}return s}function i(t){var n=t._type,i=t._radius,r=e(t._matrix,!0,"rectangle"!==n);if("rectangle"===n){n="rect";var s=t._size,a=s.width,o=s.height;r.x-=a/2,r.y-=o/2,r.width=a,r.height=o,i.isZero()&&(i=null)}return i&&("circle"===n?r.r=i:(r.rx=i.width,r.ry=i.height)),it.create(n,r,g)}function s(t,e,n){var i={},s=!n&&t.getParent(),l=[];return null!=t._name&&(i.id=t._name),r.each(rt,function(e){var n=e.get,h=e.type,u=t[n]();if(e.exportFilter?e.exportFilter(t,u):!s||!r.equals(s[n](),u)){if("color"===h&&null!=u){var c=u.getAlpha();c<1&&(i[e.attribute+"-opacity"]=c)}"style"===h?l.push(e.attribute+": "+u):i[e.attribute]=null==u?"none":"color"===h?u.gradient?function(t){var e=a(t,"color");if(!e){var n,i=t.getGradient(),r=i._radial,s=t.getOrigin(),l=t.getDestination();if(r){n={cx:s.x,cy:s.y,r:s.getDistance(l)};var h=t.getHighlight();h&&(n.fx=h.x,n.fy=h.y)}else n={x1:s.x,y1:s.y,x2:l.x,y2:l.y};n.gradientUnits="userSpaceOnUse",e=it.create((r?"radial":"linear")+"Gradient",n,g);for(var u=i._stops,c=0,f=u.length;c<f;c++){var d=u[c],p=d._color,_=p.getAlpha(),v=d._offset;n={offset:null==v?c/(f-1):v},p&&(n["stop-color"]=p.toCSS(!0)),_<1&&(n["stop-opacity"]=_),e.appendChild(it.create("stop",n,g))}o(t,e,"color")}return"url(#"+e.id+")"}(u):u.toCSS(!0):"array"===h?u.join(","):"lookup"===h?e.toSVG[u]:u}}),l.length&&(i.style=l.join(";")),1===i.opacity&&delete i.opacity,t._visible||(i.visibility="hidden"),it.set(e,i,g)}function a(t,e){return _||(_={ids:{},svgs:{}}),t&&_.svgs[e+"-"+(t._id||t.__id||(t.__id=u.get("svg")))]}function o(t,e,n){_||a();var i=_.ids[n]=(_.ids[n]||0)+1;e.id=n+"-"+i,_.svgs[n+"-"+(t._id||t.__id)]=e}function c(e,n){var i=e,r=null;if(_){for(var s in i="svg"===e.nodeName.toLowerCase()&&e,_.svgs)r||(i||(i=it.create("svg")).appendChild(e),r=i.insertBefore(it.create("defs"),i.firstChild)),r.appendChild(_.svgs[s]);_=null}return n.asString?(new t.XMLSerializer).serializeToString(i):i}function f(t,e,n){var i=m[t._class],r=i&&i(t,e);if(r){var a=e.onExport;a&&(r=a(t,r,e)||r);var o=JSON.stringify(t._data);o&&"{}"!==o&&"null"!==o&&r.setAttribute("data-paper-data",o)}return r&&s(t,r,n)}function d(t){return t||(t={}),g=new l(t.precision),t}var g,_,m={Group:n,Layer:n,Raster:function(t,n){var i=e(t._matrix,!0),r=t.getSize(),s=t.getImage();return i.x-=r.width/2,i.y-=r.height/2,i.width=r.width,i.height=r.height,i.href=0==n.embedImages&&s&&s.src||t.toDataURL(),it.create("image",i,g)},Path:function(t,n){var r=n.matchShapes;if(r){var s=t.toShape(!1);if(s)return i(s)}var a,o=t._segments,l=o.length,h=e(t._matrix);if(r&&l>=2&&!t.hasHandles())if(l>2){a=t._closed?"polygon":"polyline";for(var u=[],c=0;c<l;c++)u.push(g.point(o[c]._point));h.points=u.join(" ")}else{a="line";var f=o[0]._point,d=o[1]._point;h.set({x1:f.x,y1:f.y,x2:d.x,y2:d.y})}else a="path",h.d=t.getPathData(null,n.precision);return it.create(a,h,g)},Shape:i,CompoundPath:function(t,n){var i=e(t._matrix),r=t.getPathData(null,n.precision);return r&&(i.d=r),it.create("path",i,g)},SymbolItem:function(t,n){var i=e(t._matrix,!0),r=t._definition,s=a(r,"symbol"),l=r._item,h=l.getBounds();return s||((s=it.create("symbol",{viewBox:g.rectangle(h)})).appendChild(f(l,n)),o(r,s,"symbol")),i.href="#"+s.id,i.x+=h.x,i.y+=h.y,i.width=h.width,i.height=h.height,i.overflow="visible",it.create("use",i,g)},PointText:function(t){var n=it.create("text",e(t._matrix,!0),g);return n.textContent=t._content,n}};x.inject({exportSVG:function(t){return c(f(this,t=d(t),!0),t)}}),y.inject({exportSVG:function(t){t=d(t);var n=this._children,i=this.getView(),s=r.pick(t.bounds,"view"),a=t.matrix||"view"===s&&i._matrix,o=a&&v.read([a]),l="view"===s?new p([0,0],i.getViewSize()):"content"===s?x._getBounds(n,o,{stroke:!0}).rect:p.read([s],0,{readNull:!0}),h={version:"1.1",xmlns:it.svg,"xmlns:xlink":it.xlink};l&&(h.width=l.width,h.height=l.height,(l.x||l.y)&&(h.viewBox=g.rectangle(l)));var u=it.create("svg",h,g),_=u;o&&!o.isIdentity()&&(_=u.appendChild(it.create("g",e(o),g)));for(var m=0,y=n.length;m<y;m++)_.appendChild(f(n[m],t,!0));return c(u,t)}})},new function(){function s(t,e,n,i,r){var s=it.get(t,e),a=null==s?i?null:n?"":0:n?s:parseFloat(s);return/%\s*$/.test(s)?a/100*(r?1:M[/x|^width/.test(e)?"width":"height"]):a}function a(t,e,n,i,r){return e=s(t,e||"x",!1,i,r),n=s(t,n||"y",!1,i,r),!i||null!=e&&null!=n?new c(e,n):null}function o(t,e,n,i,r){return e=s(t,e||"width",!1,i,r),n=s(t,n||"height",!1,i,r),!i||null!=e&&null!=n?new d(e,n):null}function l(t,e,n){return"none"===t?null:"number"===e?parseFloat(t):"array"===e?t?t.split(/[\s,]+/g).map(parseFloat):[]:"color"===e?k(t)||t:"lookup"===e?n[t]:t}function h(t,e,n,i){var r=t.childNodes,s="clippath"===e,a="defs"===e,o=new b,l=o._project,h=l._currentStyle,u=[];if(s||a||(o=w(o,t,i),l._currentStyle=o._style.clone()),i)for(var c=t.querySelectorAll("defs"),f=0,d=c.length;f<d;f++)T(c[f],n,!1);for(f=0,d=r.length;f<d;f++){var g,p=r[f];1!==p.nodeType||/^defs$/i.test(p.nodeName)||!(g=T(p,n,!1))||g instanceof A||u.push(g)}return o.addChildren(u),s&&(o=w(o.reduce(),t,i)),l._currentStyle=h,(s||a)&&(o.remove(),o=null),o}function u(t,e){for(var n=t.getAttribute("points").match(/[+-]?(?:\d*\.\d+|\d+\.?)(?:[eE][+-]?\d+)?/g),i=[],r=0,s=n.length;r<s;r+=2)i.push(new c(parseFloat(n[r]),parseFloat(n[r+1])));var a=new I(i);return"polygon"===e&&a.closePath(),a}function f(t,e){var n,i=(s(t,"href",!0)||"").substring(1),r="radialgradient"===e;if(i)(n=P[i].getGradient())._radial^r&&((n=n.clone())._radial=r);else{for(var o=t.childNodes,l=[],h=0,u=o.length;h<u;h++){var c=o[h];1===c.nodeType&&l.push(w(new q,c))}n=new B(l,r)}var f,d,g,p="userSpaceOnUse"!==s(t,"gradientUnits",!0);return r?(d=(f=a(t,"cx","cy",!1,p)).add(s(t,"r",!1,!1,p),0),g=a(t,"fx","fy",!0,p)):(f=a(t,"x1","y1",!1,p),d=a(t,"x2","y2",!1,p)),w(new D(n,f,d,g),t)._scaleToBounds=p,null}function g(t,e,n,i){if(t.transform){for(var r=(i.getAttribute(n)||"").split(/\)\s*/g),s=new v,a=0,o=r.length;a<o;a++){var l=r[a];if(!l)break;for(var h=l.split(/\(\s*/),u=h[0],c=h[1].split(/[\s,]+/g),f=0,d=c.length;f<d;f++)c[f]=parseFloat(c[f]);switch(u){case"matrix":s.append(new v(c[0],c[1],c[2],c[3],c[4],c[5]));break;case"rotate":s.rotate(c[0],c[1]||0,c[2]||0);break;case"translate":s.translate(c[0],c[1]||0);break;case"scale":s.scale(c);break;case"skewX":s.skew(c[0],0);break;case"skewY":s.skew(0,c[0])}}t.transform(s)}}function _(t,e,n){var i="fill-opacity"===n?"getFillColor":"getStrokeColor",r=t[i]&&t[i]();r&&r.setAlpha(parseFloat(e))}function m(t,n,i){var s=t.attributes[n],a=s&&s.value;if(!a&&t.style){var o=r.camelize(n);(a=t.style[o])||i.node[o]===i.parent[o]||(a=i.node[o])}return a?"none"===a?null:a:e}function w(t,n,i){var s=n.parentNode,a={node:V.getStyles(n)||{},parent:!i&&!/^defs$/i.test(s.tagName)&&V.getStyles(s)||{}};return r.each(L,function(i,r){var s=m(n,r,a);t=s!==e&&i(t,s,r,n,a)||t}),t}function k(t){var e=t&&t.match(/\((?:["'#]*)([^"')]+)/),i=e&&e[1],r=i&&P[n?i.replace(n.location.href.split("#")[0]+"#",""):i];return r&&r._scaleToBounds&&((r=r.clone())._scaleToBounds=!0),r}function T(t,e,n){var s,a,l,h=t.nodeName.toLowerCase(),u="#document"!==h,c=i.body;n&&u&&(M=st.getView().getSize(),M=o(t,null,null,!0)||M,s=it.create("svg",{style:"stroke-width: 1px; stroke-miterlimit: 10"}),a=t.parentNode,l=t.nextSibling,s.appendChild(t),c.appendChild(s));var f=st.settings,d=f.applyMatrix,g=f.insertItems;f.applyMatrix=!1,f.insertItems=!1;var p=O[h],_=p&&p(t,h,e,n)||null;if(f.insertItems=g,f.applyMatrix=d,_){!u||_ instanceof b||(_=w(_,t,n));var v=e.onImport,m=u&&t.getAttribute("data-paper-data");v&&(_=v(t,_,e)||_),e.expandShapes&&_ instanceof C&&(_.remove(),_=_.toPath()),m&&(_._data=JSON.parse(m))}return s&&(c.removeChild(s),a&&(l?a.insertBefore(t,l):a.appendChild(t))),n&&(P={},_&&r.pick(e.applyMatrix,d)&&_.matrix.apply(!0,!0)),_}function E(n,r,s){function a(i){try{var a="object"==typeof i?i:(new t.DOMParser).parseFromString(i,"image/svg+xml");if(!a.nodeName)throw a=null,new Error("Unsupported SVG source: "+n);st=l,h=T(a,r,!0),r&&!1===r.insert||s._insertItem(e,h);var u=r.onLoad;u&&u(h,i)}catch(c){o(c)}}function o(t,e){var n=r.onError;if(!n)throw new Error(t);n(t,e)}if(!n)return null;r="function"==typeof r?{onLoad:r}:r||{};var l=st,h=null;if("string"!=typeof n||/^.*</.test(n)){if("undefined"!=typeof File&&n instanceof File){var u=new FileReader;return u.onload=function(){a(u.result)},u.onerror=function(){o(u.error)},u.readAsText(n)}a(n)}else{var c=i.getElementById(n);c?a(c):tt.request({url:n,async:!0,onLoad:a,onError:o})}return h}var M,P={},O={"#document":function(t,e,n,i){for(var r=t.childNodes,s=0,a=r.length;s<a;s++){var o=r[s];if(1===o.nodeType)return T(o,n,i)}},g:h,svg:h,clippath:h,polygon:u,polyline:u,path:function(t){return R.create(t.getAttribute("d"))},lineargradient:f,radialgradient:f,image:function(t){var e=new S(s(t,"href",!0));return e.on("load",function(){var e=o(t);this.setSize(e);var n=a(t).add(e.divide(2));this._matrix.append((new v).translate(n))}),e},symbol:function(t,e,n,i){return new A(h(t,e,n,i),!0)},defs:h,use:function(t){var e=(s(t,"href",!0)||"").substring(1),n=P[e],i=a(t);return n?n instanceof A?n.place(i):n.clone().translate(i):null},circle:function(t){return new C.Circle(a(t,"cx","cy"),s(t,"r"))},ellipse:function(t){return new C.Ellipse({center:a(t,"cx","cy"),radius:o(t,"rx","ry")})},rect:function(t){return new C.Rectangle(new p(a(t),o(t)),o(t,"rx","ry"))},line:function(t){return new I.Line(a(t,"x1","y1"),a(t,"x2","y2"))},text:function(t){var e=new z(a(t).add(a(t,"dx","dy")));return e.setContent(t.textContent.trim()||""),e}},L=r.set(r.each(rt,function(t){this[t.attribute]=function(e,n){if(e[t.set]&&(e[t.set](l(n,t.type,t.fromSVG)),"color"===t.type)){var i=e[t.get]();if(i&&i._scaleToBounds){var r=e.getBounds();i.transform((new v).translate(r.getPoint()).scale(r.getSize()))}}}},{}),{id:function(t,e){P[e]=t,t.setName&&t.setName(e)},"clip-path":function(t,e){var n=k(e);if(n){if((n=n.clone()).setClipMask(!0),!(t instanceof b))return new b(n,t);t.insertChild(0,n)}},gradientTransform:g,transform:g,"fill-opacity":_,"stroke-opacity":_,visibility:function(t,e){t.setVisible&&t.setVisible("visible"===e)},display:function(t,e){t.setVisible&&t.setVisible(null!==e)},"stop-color":function(t,e){t.setColor&&t.setColor(e)},"stop-opacity":function(t,e){t._color&&t._color.setAlpha(parseFloat(e))},offset:function(t,e){if(t.setOffset){var n=e.match(/(.*)%$/);t.setOffset(n?n[1]/100:parseFloat(e))}},viewBox:function(t,e,n,i,r){var s,a=new p(l(e,"array")),h=o(i,null,null,!0);if(t instanceof b){var u=h?h.divide(a.getSize()):1,c=(new v).scale(u).translate(a.getPoint().negate());s=t}else t instanceof A&&(h&&a.setSize(h),s=t._item);if(s){if("visible"!==m(i,"overflow",r)){var f=new C.Rectangle(a);f.setClipMask(!0),s.addChild(f)}c&&s.transform(c)}}});x.inject({importSVG:function(t,e){return E(t,e,this)}}),y.inject({importSVG:function(t,e){return this.activate(),E(t,e,this)}})},r.exports.PaperScript=(function(){function e(t,e){return(_.acorn||m).parse(t,e)}function s(t,e,n){var i=y[e];if(t&&t[i]){var r=t[i](n);return"!="===e?!r:r}switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"/":return t/n;case"%":return t%n;case"==":return t==n;case"!=":return t!=n}}function o(t,e){var n=x[t];if(e&&e[n])return e[n]();switch(t){case"+":return+e;case"-":return-e}}function l(r,s){function a(t){for(var e=0,n=c.length;e<n;e++){var i=c[e];if(i[0]>=t)break;t+=i[1]}return t}function o(t){return r.substring(a(t.range[0]),a(t.range[1]))}function l(t,e){return r.substring(a(t.range[1]),a(e.range[0]))}function h(t,e){for(var n=a(t.range[0]),i=a(t.range[1]),s=0,o=c.length-1;o>=0;o--)if(n>c[o][0]){s=o+1;break}c.splice(s,0,[n,e.length-i+n]),r=r.substring(0,n)+e+r.substring(i)}if(!r)return"";var u,c=[],f=(s=s||{}).url||"",d=st.agent,g=d.versionNumber,p=!1,_=s.sourceMaps,v=s.source||r,m=/\r\n|\n|\r/gm,b=s.offset||0;if(_&&(d.chrome&&g>=30||d.webkit&&g>=537.76||d.firefox&&g>=23||d.node)){if(d.node)b-=2;else if(n&&f&&!n.location.href.indexOf(f)){var w=i.getElementsByTagName("html")[0].innerHTML;b=w.substr(0,w.indexOf(r)+1).match(m).length+1}var C=["AA"+function(t){var e="";for(t=(Math.abs(t)<<1)+(t<0?1:0);t||!e;){var n=31&t;(t>>=5)&&(n|=32),e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[n]}return e}((p=b>0&&!(d.chrome&&g>=36||d.safari&&g>=600||d.firefox&&g>=40||d.node))?0:b)+"A"];C.length=(r.match(m)||[]).length+1+(p?b:0),u={version:3,file:f,names:[],mappings:C.join(";AACA"),sourceRoot:"",sources:[f],sourcesContent:[v]}}return function t(e,n){if(e){for(var i in e)if("range"!==i&&"loc"!==i){var r=e[i];if(Array.isArray(r))for(var s=0,a=r.length;s<a;s++)t(r[s],e);else r&&"object"==typeof r&&t(r,e)}switch(e.type){case"UnaryExpression":if(e.operator in x&&"Literal"!==e.argument.type){var u=o(e.argument);h(e,'$__("'+e.operator+'", '+u+")")}break;case"BinaryExpression":if(e.operator in y&&"Literal"!==e.left.type){var c=o(e.left),f=o(e.right),d=l(e.left,e.right),g=e.operator;h(e,"__$__("+c+","+d.replace(new RegExp("\\"+g),'"'+g+'"')+", "+f+")")}break;case"UpdateExpression":case"AssignmentExpression":var p=n&&n.type;if(!("ForStatement"===p||"BinaryExpression"===p&&/^[=!<>]/.test(n.operator)||"MemberExpression"===p&&n.computed))if("UpdateExpression"===e.type){var _=(u=o(e.argument))+" = "+(v="__$__("+u+', "'+e.operator[0]+'", 1)');e.prefix||"AssignmentExpression"!==p&&"VariableDeclarator"!==p||(o(n.left||n.id)===u&&(_=v),_=u+"; "+_),h(e,_)}else if(/^.=$/.test(e.operator)&&"Literal"!==e.left.type){c=o(e.left),f=o(e.right);var v=c+" = __$__("+c+', "'+e.operator[0]+'", '+f+")";h(e,/^\(.*\)$/.test(o(e))?"("+v+")":v)}break;case"ExportDefaultDeclaration":h({range:[e.start,e.declaration.start]},"module.exports = ");break;case"ExportNamedDeclaration":var m=e.declaration,b=e.specifiers;if(m){var w=m.declarations;w&&(w.forEach(function(t){h(t,"module.exports."+o(t))}),h({range:[e.start,m.start+m.kind.length]},""))}else if(b){var C=b.map(function(t){var e=o(t);return"module.exports."+e+" = "+e+"; "}).join("");C&&h(e,C)}}}}(e(r,{ranges:!0,preserveParens:!0,sourceType:"module"})),u&&(p&&(r=new Array(b+1).join("\n")+r),/^(inline|both)$/.test(_)&&(r+="\n//# sourceMappingURL=data:application/json;base64,"+t.btoa(unescape(encodeURIComponent(JSON.stringify(u))))),r+="\n//# sourceURL="+(f||"paperscript")),{url:f,source:v,code:r,map:u}}function h(t,e,n){function a(e,n){for(var i in e)!n&&/^_/.test(i)||!new RegExp("([\\b\\s\\W]|^)"+i.replace(/\$/g,"\\$")+"\\b").test(t)||(p.push(i),_.push(e[i]))}st=e;var h,u=e.getView(),f=/\btool\.\w+|\s+on(?:Key|Mouse)(?:Up|Down|Move|Drag)\b/.test(t)&&!/\bnew\s+Tool\b/.test(t)?new K:null,d=f?f._events:[],g=["onFrame","onResize"].concat(d),p=[],_=[],v="object"==typeof t?t:l(t,n);t=v.code,a({__$__:s,$__:o,paper:e,view:u,tool:f},!0),a(e),t="var module = { exports: {} }; "+t,(b=r.each(g,function(e){new RegExp("\\s+"+e+"\\b").test(t)&&(p.push(e),this.push("module.exports."+e+" = "+e+";"))},[]).join("\n"))&&(t+="\n"+b),t+="\nreturn module.exports;";var m=st.agent;if(i&&(m.chrome||m.firefox&&m.versionNumber<40)){var y=i.createElement("script"),x=i.head||i.getElementsByTagName("head")[0];m.firefox&&(t="\n"+t),y.appendChild(i.createTextNode("document.__paperscript__ = function("+p+") {"+t+"\n}")),x.appendChild(y),h=i.__paperscript__,delete i.__paperscript__,x.removeChild(y)}else h=Function(p,t);var b,w=(b=h&&h.apply(e,_))||{};return r.each(d,function(t){var e=w[t];e&&(f[t]=e)}),u&&(w.onResize&&u.setOnResize(w.onResize),u.emit("resize",{size:u.size,delta:new c}),w.onFrame&&u.setOnFrame(w.onFrame),u.requestUpdate()),b}function u(t){if(/^text\/(?:x-|)paperscript$/.test(t.type)&&"true"!==a.getAttribute(t,"ignore")){var e=a.getAttribute(t,"canvas"),n=i.getElementById(e),r=t.src||t.getAttribute("data-src"),s=a.hasAttribute(t,"async"),o="data-paper-scope";if(!n)throw new Error('Unable to find canvas with id "'+e+'"');var l=a.get(n.getAttribute(o))||(new a).setup(n);return n.setAttribute(o,l._id),r?tt.request({url:r,async:s,mimeType:"text/plain",onLoad:function(t){h(t,l,r)}}):h(t.innerHTML,l,t.baseURI),t.setAttribute("data-paper-ignore","true"),l}}function f(){r.each(i&&i.getElementsByTagName("script"),u)}var g,p,_=this,m=_.acorn;if(!m&&"undefined"!=typeof require)try{m=require("acorn")}catch(v){}m||(m=g=p={},function(t,e){"object"==typeof g&&"object"==typeof p?e(g):"function"==typeof define&&define.amd?define(["exports"],e):e(t.acorn||(t.acorn={}))}(this,function(t){"use strict";function e(t){for(var e in Z=t||{},K)Object.prototype.hasOwnProperty.call(Z,e)||(Z[e]=K[e]);Y=Z.sourceFile||null}function n(t,e){var n=Q(X,t),i=new SyntaxError(e+=" ("+n.line+":"+n.column+")");throw i.pos=t,i.loc=n,i.raisedAt=tt,i}function i(t){function e(t){if(1==t.length)return n+="return str === "+JSON.stringify(t[0])+";";n+="switch(str){";for(var e=0;e<t.length;++e)n+="case "+JSON.stringify(t[e])+":";n+="return true}return false;"}t=t.split(" ");var n="",i=[];t:for(var r=0;r<t.length;++r){for(var s=0;s<i.length;++s)if(i[s][0].length==t[r].length){i[s].push(t[r]);continue t}i.push([t[r]])}if(i.length>3){for(i.sort(function(t,e){return e.length-t.length}),n+="switch(str.length){",r=0;r<i.length;++r){var a=i[r];n+="case "+a[0].length+":",e(a)}n+="}"}else e(t);return new Function("str",n)}function r(){this.line=lt,this.column=tt-ht}function s(){lt=1,tt=ht=0,ot=!0,h()}function a(t,e){nt=tt,Z.locations&&(rt=new r),st=t,h(),at=e,ot=t.beforeExpr}function o(){var t=Z.onComment&&Z.locations&&new r,e=tt,i=X.indexOf("*/",tt+=2);if(-1===i&&n(tt-2,"Unterminated comment"),tt=i+2,Z.locations){Re.lastIndex=e;for(var s;(s=Re.exec(X))&&s.index<tt;)++lt,ht=s.index+s[0].length}Z.onComment&&Z.onComment(!0,X.slice(e+2,i),e,tt,t,Z.locations&&new r)}function l(){for(var t=tt,e=Z.onComment&&Z.locations&&new r,n=X.charCodeAt(tt+=2);tt<J&&10!==n&&13!==n&&8232!==n&&8233!==n;)n=X.charCodeAt(++tt);Z.onComment&&Z.onComment(!1,X.slice(t+2,tt),t,tt,e,Z.locations&&new r)}function h(){for(;tt<J;){var t=X.charCodeAt(tt);if(32===t)++tt;else if(13===t)10===(e=X.charCodeAt(++tt))&&++tt,Z.locations&&(++lt,ht=tt);else if(10===t||8232===t||8233===t)++tt,Z.locations&&(++lt,ht=tt);else if(t>8&&t<14)++tt;else if(47===t){var e;if(42===(e=X.charCodeAt(tt+1)))o();else{if(47!==e)break;l()}}else if(160===t)++tt;else{if(!(t>=5760&&Te.test(String.fromCharCode(t))))break;++tt}}}function u(t){if(t?tt=et+1:et=tt,Z.locations&&(it=new r),t)return f();if(tt>=J)return a(bt);var e=X.charCodeAt(tt);if(Ie(e)||92===e)return v();var i=function(t){switch(t){case 46:return function(){var t=X.charCodeAt(tt+1);return t>=48&&t<=57?g(!0):(++tt,a(ie))}();case 40:return++tt,a(Kt);case 41:return++tt,a(Qt);case 59:return++tt,a(ee);case 44:return++tt,a(te);case 91:return++tt,a(Zt);case 93:return++tt,a(Xt);case 123:return++tt,a(Jt);case 125:return++tt,a(Yt);case 58:return++tt,a(ne);case 63:return++tt,a(re);case 48:var e=X.charCodeAt(tt+1);if(120===e||88===e)return function(){tt+=2;var t=d(16);return null==t&&n(et+2,"Expected hexadecimal number"),Ie(X.charCodeAt(tt))&&n(tt,"Identifier directly after number"),a(vt,t)}();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return g(!1);case 34:case 39:return function(t){tt++;for(var e="";;){tt>=J&&n(et,"Unterminated string constant");var i=X.charCodeAt(tt);if(i===t)return++tt,a(yt,e);if(92===i){i=X.charCodeAt(++tt);var r=/^[0-7]+/.exec(X.slice(tt,tt+3));for(r&&(r=r[0]);r&&parseInt(r,8)>255;)r=r.slice(0,-1);if("0"===r&&(r=null),++tt,r)pt&&n(tt-2,"Octal literal in strict mode"),e+=String.fromCharCode(parseInt(r,8)),tt+=r.length-1;else switch(i){case 110:e+="\n";break;case 114:e+="\r";break;case 120:e+=String.fromCharCode(p(2));break;case 117:e+=String.fromCharCode(p(4));break;case 85:e+=String.fromCharCode(p(8));break;case 116:e+="\t";break;case 98:e+="\b";break;case 118:e+="\v";break;case 102:e+="\f";break;case 48:e+="\0";break;case 13:10===X.charCodeAt(tt)&&++tt;case 10:Z.locations&&(ht=tt,++lt);break;default:e+=String.fromCharCode(i)}}else 13!==i&&10!==i&&8232!==i&&8233!==i||n(et,"Unterminated string constant"),e+=String.fromCharCode(i),++tt}}(t);case 47:return function(){var t=X.charCodeAt(tt+1);return ot?(++tt,f()):61===t?c(oe,2):c(se,1)}();case 37:case 42:return 61===X.charCodeAt(tt+1)?c(oe,2):c(ye,1);case 124:case 38:return function(t){var e=X.charCodeAt(tt+1);return e===t?c(124===t?ue:ce,2):61===e?c(oe,2):c(124===t?fe:ge,1)}(t);case 94:return 61===X.charCodeAt(tt+1)?c(oe,2):c(de,1);case 43:case 45:return function(t){var e=X.charCodeAt(tt+1);return e===t?45==e&&62==X.charCodeAt(tt+2)&&Oe.test(X.slice(ct,tt))?(tt+=3,l(),h(),u()):c(le,2):61===e?c(oe,2):c(me,1)}(t);case 60:case 62:return function(t){var e=X.charCodeAt(tt+1),n=1;return e===t?(n=62===t&&62===X.charCodeAt(tt+2)?3:2,61===X.charCodeAt(tt+n)?c(oe,n+1):c(ve,n)):33==e&&60==t&&45==X.charCodeAt(tt+2)&&45==X.charCodeAt(tt+3)?(tt+=4,l(),h(),u()):(61===e&&(n=61===X.charCodeAt(tt+2)?3:2),c(_e,n))}(t);case 61:case 33:return function(t){return 61===X.charCodeAt(tt+1)?c(pe,61===X.charCodeAt(tt+2)?3:2):c(61===t?ae:he,1)}(t);case 126:return c(he,1)}return!1}(e);if(!1===i){var s=String.fromCharCode(e);if("\\"===s||Me.test(s))return v();n(tt,"Unexpected character '"+s+"'")}return i}function c(t,e){var n=X.slice(tt,tt+e);tt+=e,a(t,n)}function f(){for(var t,e,i=tt;;){tt>=J&&n(i,"Unterminated regular expression");var r=X.charAt(tt);if(Oe.test(r)&&n(i,"Unterminated regular expression"),t)t=!1;else{if("["===r)e=!0;else if("]"===r&&e)e=!1;else if("/"===r&&!e)break;t="\\"===r}++tt}var s=X.slice(i,tt);++tt;var o=_();o&&!/^[gmsiy]*$/.test(o)&&n(i,"Invalid regexp flag");try{var l=new RegExp(s,o)}catch(h){h instanceof SyntaxError&&n(i,h.message),n(h)}return a(mt,l)}function d(t,e){for(var n=tt,i=0,r=0,s=null==e?1/0:e;r<s;++r){var a,o=X.charCodeAt(tt);if((a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0)>=t)break;++tt,i=i*t+a}return tt===n||null!=e&&tt-n!==e?null:i}function g(t){var e=tt,i=!1,r=48===X.charCodeAt(tt);t||null!==d(10)||n(e,"Invalid number"),46===X.charCodeAt(tt)&&(++tt,d(10),i=!0);var s=X.charCodeAt(tt);69!==s&&101!==s||(43!==(s=X.charCodeAt(++tt))&&45!==s||++tt,null===d(10)&&n(e,"Invalid number"),i=!0),Ie(X.charCodeAt(tt))&&n(tt,"Identifier directly after number");var o,l=X.slice(e,tt);return i?o=parseFloat(l):r&&1!==l.length?/[89]/.test(l)||pt?n(e,"Invalid number"):o=parseInt(l,8):o=parseInt(l,10),a(vt,o)}function p(t){var e=d(16,t);return null===e&&n(et,"Bad character escape sequence"),e}function _(){be=!1;for(var t,e=!0,i=tt;;){var r=X.charCodeAt(tt);if(Le(r))be&&(t+=X.charAt(tt)),++tt;else{if(92!==r)break;be||(t=X.slice(i,tt)),be=!0,117!=X.charCodeAt(++tt)&&n(tt,"Expecting Unicode escape sequence \\uXXXX"),++tt;var s=p(4),a=String.fromCharCode(s);a||n(tt-1,"Invalid Unicode escape"),(e?Ie(s):Le(s))||n(tt-4,"Invalid Unicode escape"),t+=a}e=!1}return be?t:X.slice(i,tt)}function v(){var t=_(),e=xt;return!be&&Ae(t)&&(e=$t[t]),a(e,t)}function m(){ut=et,ct=nt,ft=rt,u()}function y(t){if(pt=t,tt=et,Z.locations)for(;tt<ht;)ht=X.lastIndexOf("\n",ht-2)+1,--lt;h(),u()}function x(){this.type=null,this.start=et,this.end=null}function b(){this.start=it,this.end=null,null!==Y&&(this.source=Y)}function w(){var t=new x;return Z.locations&&(t.loc=new b),Z.directSourceFile&&(t.sourceFile=Z.directSourceFile),Z.ranges&&(t.range=[et,0]),t}function C(t){var e=new x;return e.start=t.start,Z.locations&&(e.loc=new b,e.loc.start=t.loc.start),Z.ranges&&(e.range=[t.range[0],0]),e}function S(t,e){return t.type=e,t.end=ct,Z.locations&&(t.loc.end=ft),Z.ranges&&(t.range[1]=ct),t}function k(t){return Z.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"use strict"===t.expression.value}function A(t){if(st===t)return m(),!0}function T(){return!Z.strictSemicolons&&(st===bt||st===Yt||Oe.test(X.slice(ct,et)))}function E(){A(ee)||T()||P()}function M(t){st===t?m():P()}function P(){n(et,"Unexpected token")}function O(t){"Identifier"!==t.type&&"MemberExpression"!==t.type&&n(t.start,"Assigning to rvalue"),pt&&"Identifier"===t.type&&ke(t.name)&&n(t.start,"Assigning to "+t.name+" in strict mode")}function R(){(st===se||st===oe&&"/="==at)&&u(!0);var t=st,e=w();switch(t){case wt:case kt:m();var i=t===wt;A(ee)||T()?e.label=null:st!==xt?P():(e.label=$(),E());for(var r=0;r<gt.length;++r){var s=gt[r];if(null==e.label||s.name===e.label.name){if(null!=s.kind&&(i||"loop"===s.kind))break;if(e.label&&i)break}}return r===gt.length&&n(e.start,"Unsyntactic "+t.keyword),S(e,i?"BreakStatement":"ContinueStatement");case At:return m(),E(),S(e,"DebuggerStatement");case Et:return m(),gt.push(Fe),e.body=R(),gt.pop(),M(Dt),e.test=I(),E(),S(e,"DoWhileStatement");case Ot:if(m(),gt.push(Fe),M(Kt),st===ee)return F(e,null);if(st===zt){var a=w();return m(),j(a,!0),S(a,"VariableDeclaration"),1===a.declarations.length&&A(Wt)?N(e,a):F(e,a)}return a=z(!1,!0),A(Wt)?(O(a),N(e,a)):F(e,a);case Rt:return m(),G(e,!0);case It:return m(),e.test=I(),e.consequent=R(),e.alternate=A(Mt)?R():null,S(e,"IfStatement");case Lt:return dt||Z.allowReturnOutsideFunction||n(et,"'return' outside of function"),m(),A(ee)||T()?e.argument=null:(e.argument=z(),E()),S(e,"ReturnStatement");case Ft:m(),e.discriminant=I(),e.cases=[],M(Jt),gt.push(Ne);for(var o,l;st!=Yt;)if(st===Ct||st===Tt){var h=st===Ct;o&&S(o,"SwitchCase"),e.cases.push(o=w()),o.consequent=[],m(),h?o.test=z():(l&&n(ut,"Multiple default clauses"),l=!0,o.test=null),M(ne)}else o||P(),o.consequent.push(R());return o&&S(o,"SwitchCase"),m(),gt.pop(),S(e,"SwitchStatement");case Nt:return m(),Oe.test(X.slice(ct,et))&&n(ct,"Illegal newline after throw"),e.argument=z(),E(),S(e,"ThrowStatement");case jt:if(m(),e.block=L(),e.handler=null,st===St){var c=w();m(),M(Kt),c.param=$(),pt&&ke(c.param.name)&&n(c.param.start,"Binding "+c.param.name+" in strict mode"),M(Qt),c.guard=null,c.body=L(),e.handler=S(c,"CatchClause")}return e.guardedHandlers=_t,e.finalizer=A(Pt)?L():null,e.handler||e.finalizer||n(e.start,"Missing catch or finally clause"),S(e,"TryStatement");case zt:return m(),j(e),E(),S(e,"VariableDeclaration");case Dt:return m(),e.test=I(),gt.push(Fe),e.body=R(),gt.pop(),S(e,"WhileStatement");case Bt:return pt&&n(et,"'with' in strict mode"),m(),e.object=I(),e.body=R(),S(e,"WithStatement");case Jt:return L();case ee:return m(),S(e,"EmptyStatement");default:var f=at,d=z();if(t===xt&&"Identifier"===d.type&&A(ne)){for(r=0;r<gt.length;++r)gt[r].name===f&&n(d.start,"Label '"+f+"' is already declared");return gt.push({name:f,kind:st.isLoop?"loop":st===Ft?"switch":null}),e.body=R(),gt.pop(),e.label=d,S(e,"LabeledStatement")}return e.expression=d,E(),S(e,"ExpressionStatement")}}function I(){M(Kt);var t=z();return M(Qt),t}function L(t){var e,n=w(),i=!0,r=!1;for(n.body=[],M(Jt);!A(Yt);){var s=R();n.body.push(s),i&&t&&k(s)&&(e=r,y(r=!0)),i=!1}return r&&!e&&y(!1),S(n,"BlockStatement")}function F(t,e){return t.init=e,M(ee),t.test=st===ee?null:z(),M(ee),t.update=st===Qt?null:z(),M(Qt),t.body=R(),gt.pop(),S(t,"ForStatement")}function N(t,e){return t.left=e,t.right=z(),M(Qt),t.body=R(),gt.pop(),S(t,"ForInStatement")}function j(t,e){for(t.declarations=[],t.kind="var";;){var i=w();if(i.id=$(),pt&&ke(i.id.name)&&n(i.id.start,"Binding "+i.id.name+" in strict mode"),i.init=A(ae)?z(!0,e):null,t.declarations.push(S(i,"VariableDeclarator")),!A(te))break}return t}function z(t,e){var n=D(e);if(!t&&st===te){var i=C(n);for(i.expressions=[n];A(te);)i.expressions.push(D(e));return S(i,"SequenceExpression")}return n}function D(t){var e=function(t){var e=function(t){return function t(e,n,i){var r=st.binop;if(null!=r&&(!i||st!==Wt)&&r>n){var s=C(e);s.left=e,s.operator=at;var a=st;return m(),s.right=t(B(),r,i),t(S(s,a===ue||a===ce?"LogicalExpression":"BinaryExpression"),n,i)}return e}(B(),-1,t)}(t);if(A(re)){var n=C(e);return n.test=e,n.consequent=z(!0),M(ne),n.alternate=z(!0,t),S(n,"ConditionalExpression")}return e}(t);if(st.isAssign){var n=C(e);return n.operator=at,n.left=e,m(),n.right=D(t),O(e),S(n,"AssignmentExpression")}return e}function B(){if(st.prefix){var t=w(),e=st.isUpdate;return t.operator=at,t.prefix=!0,ot=!0,m(),t.argument=B(),e?O(t.argument):pt&&"delete"===t.operator&&"Identifier"===t.argument.type&&n(t.start,"Deleting local variable in strict mode"),S(t,e?"UpdateExpression":"UnaryExpression")}for(var i=q(U());st.postfix&&!T();)(t=C(i)).operator=at,t.prefix=!1,t.argument=i,O(i),m(),i=S(t,"UpdateExpression");return i}function q(t,e){var n;return A(ie)?((n=C(t)).object=t,n.property=$(!0),n.computed=!1,q(S(n,"MemberExpression"),e)):A(Zt)?((n=C(t)).object=t,n.property=z(),n.computed=!0,M(Xt),q(S(n,"MemberExpression"),e)):!e&&A(Kt)?((n=C(t)).callee=t,n.arguments=W(Qt,!1),q(S(n,"CallExpression"),e)):t}function U(){switch(st){case Ut:var t=w();return m(),S(t,"ThisExpression");case xt:return $();case vt:case yt:case mt:return(t=w()).value=at,t.raw=X.slice(et,nt),m(),S(t,"Literal");case Vt:case Ht:case Gt:return(t=w()).value=st.atomValue,t.raw=st.keyword,m(),S(t,"Literal");case Kt:var e=it,n=et;m();var i=z();return i.start=n,i.end=nt,Z.locations&&(i.loc.start=e,i.loc.end=rt),Z.ranges&&(i.range=[n,nt]),M(Qt),i;case Zt:return t=w(),m(),t.elements=W(Xt,!0,!0),S(t,"ArrayExpression");case Jt:return V();case Rt:return t=w(),m(),G(t,!1);case qt:return function(){var t=w();return m(),t.callee=q(U(),!0),t.arguments=A(Kt)?W(Qt,!1):_t,S(t,"NewExpression")}();default:P()}}function V(){var t=w(),e=!0,i=!1;for(t.properties=[],m();!A(Yt);){if(e)e=!1;else if(M(te),Z.allowTrailingCommas&&A(Yt))break;var r,s={key:H()},a=!1;if(A(ne)?(s.value=z(!0),r=s.kind="init"):Z.ecmaVersion>=5&&"Identifier"===s.key.type&&("get"===s.key.name||"set"===s.key.name)?(a=i=!0,r=s.kind=s.key.name,s.key=H(),st!==Kt&&P(),s.value=G(w(),!1)):P(),"Identifier"===s.key.type&&(pt||i))for(var o=0;o<t.properties.length;++o){var l=t.properties[o];if(l.key.name===s.key.name){var h=r==l.kind||a&&"init"===l.kind||"init"===r&&("get"===l.kind||"set"===l.kind);h&&!pt&&"init"===r&&"init"===l.kind&&(h=!1),h&&n(s.key.start,"Redefinition of property")}}t.properties.push(s)}return S(t,"ObjectExpression")}function H(){return st===vt||st===yt?U():$(!0)}function G(t,e){st===xt?t.id=$():e?P():t.id=null,t.params=[];var i=!0;for(M(Kt);!A(Qt);)i?i=!1:M(te),t.params.push($());var r=dt,s=gt;if(dt=!0,gt=[],t.body=L(!0),dt=r,gt=s,pt||t.body.body.length&&k(t.body.body[0]))for(var a=t.id?-1:0;a<t.params.length;++a){var o=a<0?t.id:t.params[a];if((Se(o.name)||ke(o.name))&&n(o.start,"Defining '"+o.name+"' in strict mode"),a>=0)for(var l=0;l<a;++l)o.name===t.params[l].name&&n(o.start,"Argument name clash in strict mode")}return S(t,e?"FunctionDeclaration":"FunctionExpression")}function W(t,e,n){for(var i=[],r=!0;!A(t);){if(r)r=!1;else if(M(te),e&&Z.allowTrailingCommas&&A(t))break;i.push(n&&st===te?null:z(!0))}return i}function $(t){var e=w();return t&&"everywhere"==Z.forbidReserved&&(t=!1),st===xt?(!t&&(Z.forbidReserved&&(3===Z.ecmaVersion?we:Ce)(at)||pt&&Se(at))&&-1==X.slice(et,nt).indexOf("\\")&&n(et,"The keyword '"+at+"' is reserved"),e.name=at):t&&st.keyword?e.name=st.keyword:P(),ot=!1,m(),S(e,"Identifier")}var Z,X,J,Y;t.version="0.5.0",t.parse=function(t,n){return X=String(t),J=X.length,e(n),s(),function(t){ut=ct=tt,Z.locations&&(ft=new r),dt=pt=null,gt=[],u();var e=t||w(),n=!0;for(t||(e.body=[]);st!==bt;){var i=R();e.body.push(i),n&&k(i)&&y(!0),n=!1}return S(e,"Program")}(Z.program)};var K=t.defaultOptions={ecmaVersion:5,strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null},Q=t.getLineInfo=function(t,e){for(var n=1,i=0;;){Re.lastIndex=i;var r=Re.exec(t);if(!(r&&r.index<e))break;++n,i=r.index+r[0].length}return{line:n,column:e-i}};t.tokenize=function(t,n){function i(t){return ct=nt,u(t),r.start=et,r.end=nt,r.startLoc=it,r.endLoc=rt,r.type=st,r.value=at,r}X=String(t),J=X.length,e(n),s();var r={};return i.jumpTo=function(t,e){if(tt=t,Z.locations){lt=1,ht=Re.lastIndex=0;for(var n;(n=Re.exec(X))&&n.index<t;)++lt,ht=n.index+n[0].length}ot=e,h()},i};var tt,et,nt,it,rt,st,at,ot,lt,ht,ut,ct,ft,dt,gt,pt,_t=[],vt={type:"num"},mt={type:"regexp"},yt={type:"string"},xt={type:"name"},bt={type:"eof"},wt={keyword:"break"},Ct={keyword:"case",beforeExpr:!0},St={keyword:"catch"},kt={keyword:"continue"},At={keyword:"debugger"},Tt={keyword:"default"},Et={keyword:"do",isLoop:!0},Mt={keyword:"else",beforeExpr:!0},Pt={keyword:"finally"},Ot={keyword:"for",isLoop:!0},Rt={keyword:"function"},It={keyword:"if"},Lt={keyword:"return",beforeExpr:!0},Ft={keyword:"switch"},Nt={keyword:"throw",beforeExpr:!0},jt={keyword:"try"},zt={keyword:"var"},Dt={keyword:"while",isLoop:!0},Bt={keyword:"with"},qt={keyword:"new",beforeExpr:!0},Ut={keyword:"this"},Vt={keyword:"null",atomValue:null},Ht={keyword:"true",atomValue:!0},Gt={keyword:"false",atomValue:!1},Wt={keyword:"in",binop:7,beforeExpr:!0},$t={break:wt,case:Ct,catch:St,continue:kt,debugger:At,default:Tt,do:Et,else:Mt,finally:Pt,for:Ot,function:Rt,if:It,return:Lt,switch:Ft,throw:Nt,try:jt,var:zt,while:Dt,with:Bt,null:Vt,true:Ht,false:Gt,new:qt,in:Wt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Ut,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Zt={type:"[",beforeExpr:!0},Xt={type:"]"},Jt={type:"{",beforeExpr:!0},Yt={type:"}"},Kt={type:"(",beforeExpr:!0},Qt={type:")"},te={type:",",beforeExpr:!0},ee={type:";",beforeExpr:!0},ne={type:":",beforeExpr:!0},ie={type:"."},re={type:"?",beforeExpr:!0},se={binop:10,beforeExpr:!0},ae={isAssign:!0,beforeExpr:!0},oe={isAssign:!0,beforeExpr:!0},le={postfix:!0,prefix:!0,isUpdate:!0},he={prefix:!0,beforeExpr:!0},ue={binop:1,beforeExpr:!0},ce={binop:2,beforeExpr:!0},fe={binop:3,beforeExpr:!0},de={binop:4,beforeExpr:!0},ge={binop:5,beforeExpr:!0},pe={binop:6,beforeExpr:!0},_e={binop:7,beforeExpr:!0},ve={binop:8,beforeExpr:!0},me={binop:9,prefix:!0,beforeExpr:!0},ye={binop:10,beforeExpr:!0};for(var xe in t.tokTypes={bracketL:Zt,bracketR:Xt,braceL:Jt,braceR:Yt,parenL:Kt,parenR:Qt,comma:te,semi:ee,colon:ne,dot:ie,question:re,slash:se,eq:ae,name:xt,eof:bt,num:vt,regexp:mt,string:yt},$t)t.tokTypes["_"+xe]=$t[xe];var be,we=i("abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile"),Ce=i("class enum extends super const export import"),Se=i("implements interface let package private protected public static yield"),ke=i("eval arguments"),Ae=i("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Te=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ee="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Me=new RegExp("["+Ee+"]"),Pe=new RegExp("["+Ee+"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u0620-\u0649\u0672-\u06d3\u06e7-\u06e8\u06fb-\u06fc\u0730-\u074a\u0800-\u0814\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0840-\u0857\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962-\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09d7\u09df-\u09e0\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5f-\u0b60\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62-\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2-\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d46-\u0d48\u0d57\u0d62-\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e34-\u0e3a\u0e40-\u0e45\u0e50-\u0e59\u0eb4-\u0eb9\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f41-\u0f47\u0f71-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1029\u1040-\u1049\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u170e-\u1710\u1720-\u1730\u1740-\u1750\u1772\u1773\u1780-\u17b2\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1920-\u192b\u1930-\u193b\u1951-\u196d\u19b0-\u19c0\u19c8-\u19c9\u19d0-\u19d9\u1a00-\u1a15\u1a20-\u1a53\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b46-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1bb0-\u1bb9\u1be6-\u1bf3\u1c00-\u1c22\u1c40-\u1c49\u1c5b-\u1c7d\u1cd0-\u1cd2\u1d00-\u1dbe\u1e01-\u1f15\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2d81-\u2d96\u2de0-\u2dff\u3021-\u3028\u3099\u309a\ua640-\ua66d\ua674-\ua67d\ua69f\ua6f0-\ua6f1\ua7f8-\ua800\ua806\ua80b\ua823-\ua827\ua880-\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8f3-\ua8f7\ua900-\ua909\ua926-\ua92d\ua930-\ua945\ua980-\ua983\ua9b3-\ua9c0\uaa00-\uaa27\uaa40-\uaa41\uaa4c-\uaa4d\uaa50-\uaa59\uaa7b\uaae0-\uaae9\uaaf2-\uaaf3\uabc0-\uabe1\uabec\uabed\uabf0-\uabf9\ufb20-\ufb28\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]"),Oe=/[\n\r\u2028\u2029]/,Re=/\r\n|[\n\r\u2028\u2029]/g,Ie=t.isIdentifierStart=function(t){return t<65?36===t:t<91||(t<97?95===t:t<123||t>=170&&Me.test(String.fromCharCode(t)))},Le=t.isIdentifierChar=function(t){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||t>=170&&Pe.test(String.fromCharCode(t))))},Fe={kind:"loop"},Ne={kind:"switch"}}),m.version||(m=null));var y={"+":"__add","-":"__subtract","*":"__multiply","/":"__divide","%":"__modulo","==":"__equals","!=":"__equals"},x={"-":"__negate","+":"__self"},b=r.each(["add","subtract","multiply","divide","modulo","equals","negate"],function(t){this["__"+t]="#"+t},{__self:function(){return this}});return c.inject(b),d.inject(b),D.inject(b),n&&("complete"===i.readyState?setTimeout(f):H.add(n,{load:f})),{compile:l,execute:h,load:function(t){return t?u(t):f()},parse:e,calculateBinary:s,calculateUnary:o}}).call(this);var st=new(a.inject(r.exports,{Base:r,Numerical:h,Key:X,DomEvent:H,DomElement:V,document:i,window:n,Symbol:A,PlacedSymbol:k}));return st.agent.node&&require("./node/extend.js")(st),"function"==typeof define&&define.amd?define("paper",st):"object"==typeof module&&module&&(module.exports=st),st}).call(this,"object"==typeof self?self:null);this.Two=function(t){var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:null,n=Object.prototype.toString,i={_indexAmount:0,natural:{slice:Array.prototype.slice,indexOf:Array.prototype.indexOf,keys:Object.keys,bind:Function.prototype.bind,create:Object.create},identity:function(t){return t},isArguments:function(t){return"[object Arguments]"===n.call(t)},isFunction:function(t){return"[object Function]"===n.call(t)},isString:function(t){return"[object String]"===n.call(t)},isNumber:function(t){return"[object Number]"===n.call(t)},isDate:function(t){return"[object Date]"===n.call(t)},isRegExp:function(t){return"[object RegExp]"===n.call(t)},isError:function(t){return"[object Error]"===n.call(t)},isFinite:function(t){return isFinite(t)&&!isNaN(parseFloat(t))},isNaN:function(t){return i.isNumber(t)&&t!==+t},isBoolean:function(t){return!0===t||!1===t||"[object Boolean]"===n.call(t)},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},isEmpty:function(t){return null==t||(v&&(i.isArray(t)||i.isString(t)||i.isArguments(t))?0===t.length:0===i.keys(t).length)},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:Array.isArray||function(t){return"[object Array]"===n.call(t)},isObject:function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},toArray:function(t){return t?i.isArray(t)?g.call(t):v(t)?i.map(t,i.identity):i.values(t):[]},range:function(t,e,n){null==e&&(e=t||0,t=0),n=n||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=Array(i),s=0;s<i;s++,t+=n)r[s]=t;return r},indexOf:function(t,e){if(i.natural.indexOf)return i.natural.indexOf.call(t,e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},has:function(t,e){return null!=t&&hasOwnProperty.call(t,e)},bind:function(t,e){var n=i.natural.bind;if(n&&t.bind===n)return n.apply(t,g.call(arguments,1));var r=g.call(arguments,2);return function(){t.apply(e,r)}},extend:function(t){for(var e=g.call(arguments,1),n=0;n<e.length;n++){var i=e[n];for(var r in i)t[r]=i[r]}return t},defaults:function(t){for(var e=g.call(arguments,1),n=0;n<e.length;n++){var i=e[n];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t},keys:function(t){if(!i.isObject(t))return[];if(i.natural.keys)return i.natural.keys(t);var e=[];for(var n in t)i.has(t,n)&&e.push(n);return e},values:function(t){for(var e=i.keys(t),n=[],r=0;r<e.length;r++)n.push(t[e[r]]);return n},each:function(t,e,n){for(var r=n||this,s=!v(t)&&i.keys(t),a=(s||t).length,o=0;o<a;o++){var l=s?s[o]:o;e.call(r,t[l],l,t)}return t},map:function(t,e,n){for(var r=n||this,s=!v(t)&&i.keys(t),a=(s||t).length,o=[],l=0;l<a;l++){var h=s?s[l]:l;o[l]=e.call(r,t[h],h,t)}return o},once:function(t){var e=!1;return function(){return e?t:(e=!0,t.apply(this,arguments))}},after:function(t,e){return function(){for(;--t<1;)return e.apply(this,arguments)}},uniqueId:function(t){var e=++i._indexAmount+"";return t?t+e:e}},r=Math.sin,s=Math.cos,a=Math.atan2,o=Math.sqrt,l=(Math,Math,Math.PI),h=l/2,u=Math.pow,c=Math.min,f=Math.max,d=0,g=i.natural.slice,p=e.performance&&e.performance.now?e.performance:Date,_=Math.pow(2,53)-1,v=function(t){var e,n=null==(e=t)?void 0:e.length;return"number"==typeof n&&n>=0&&n<=_},m={temp:e.document?e.document.createElement("div"):{},hasEventListeners:i.isFunction(e.addEventListener),bind:function(t,e,n,i){return this.hasEventListeners?t.addEventListener(e,n,!!i):t.attachEvent("on"+e,n),m},unbind:function(t,e,n,i){return m.hasEventListeners?t.removeEventListeners(e,n,!!i):t.detachEvent("on"+e,n),m},getRequestAnimationFrame:function(){var t,n=0,r=["ms","moz","webkit","o"],s=e.requestAnimationFrame;if(!s){for(var a=0;a<r.length;a++)s=e[r[a]+"RequestAnimationFrame"]||s,t=e[r[a]+"CancelAnimationFrame"]||e[r[a]+"CancelRequestAnimationFrame"]||t;s=s||function(t,i){var r=(new Date).getTime(),s=Math.max(0,16-(r-n)),a=e.setTimeout(function(){t(r+s)},s);return n=r+s,a}}return s.init=i.once(R),s}},y=e.Two=function(t){var n=i.defaults(t||{},{fullscreen:!1,width:640,height:480,type:y.Types.svg,autostart:!1});if(i.each(n,function(t,e){"fullscreen"!==e&&"autostart"!==e&&(this[e]=t)},this),i.isElement(n.domElement)){var r=n.domElement.tagName.toLowerCase();/^(CanvasRenderer-canvas|WebGLRenderer-canvas|SVGRenderer-svg)$/.test(this.type+"-"+r)||(this.type=y.Types[r])}if(this.renderer=new y[this.type](this),y.Utils.setPlaying.call(this,n.autostart),this.frameCount=0,n.fullscreen){var s=i.bind(P,this);i.extend(document.body.style,{overflow:"hidden",margin:0,padding:0,top:0,left:0,right:0,bottom:0,position:"fixed"}),i.extend(this.renderer.domElement.style,{display:"block",top:0,left:0,right:0,bottom:0,position:"fixed"}),m.bind(e,"resize",s),s()}else i.isElement(n.domElement)||(this.renderer.setSize(n.width,n.height,this.ratio),this.width=n.width,this.height=n.height);this.scene=this.renderer.scene,y.Instances.push(this),O.init()};i.extend(y,{root:e,Array:e.Float32Array||Array,Types:{webgl:"WebGLRenderer",svg:"SVGRenderer",canvas:"CanvasRenderer"},Version:"v0.7.0",Identifier:"two_",Properties:{hierarchy:"hierarchy",demotion:"demotion"},Events:{play:"play",pause:"pause",update:"update",render:"render",resize:"resize",change:"change",remove:"remove",insert:"insert",order:"order",load:"load"},Commands:{move:"M",line:"L",curve:"C",close:"Z"},Resolution:8,Instances:[],noConflict:function(){return e.Two=t,this},uniqueId:function(){var t=d;return d++,t},Utils:i.extend(i,{performance:p,defineProperty:function(t){var e="_"+t,n="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[n]=!0}})},release:function(t){i.isObject(t)&&(i.isFunction(t.unbind)&&t.unbind(),t.vertices&&(i.isFunction(t.vertices.unbind)&&t.vertices.unbind(),i.each(t.vertices,function(t){i.isFunction(t.unbind)&&t.unbind()})),t.children&&i.each(t.children,function(t){y.Utils.release(t)}))},xhr:function(t,e){var n=new XMLHttpRequest;return n.open("GET",t),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&e(n.responseText)},n.send(),n},Curve:{CollinearityEpsilon:u(10,-30),RecursionLimit:16,CuspLimit:0,Tolerance:{distance:.25,angle:0,epsilon:.01},abscissas:[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],weights:[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]]},devicePixelRatio:e.devicePixelRatio||1,getBackingStoreRatio:function(t){return t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1},getRatio:function(t){return y.Utils.devicePixelRatio/A(t)},setPlaying:function(t){return this.playing=!!t,this},getComputedMatrix:function(t,e){e=e&&e.identity()||new y.Matrix;for(var n=t,r=[];n&&n._matrix;)r.push(n._matrix),n=n.parent;return r.reverse(),i.each(r,function(t){var n=t.elements;e.multiply(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9])}),e},deltaTransformPoint:function(t,e,n){return new y.Vector(e*t.a+n*t.c+0,e*t.b+n*t.d+0)},decomposeMatrix:function(t){var e=y.Utils.deltaTransformPoint(t,0,1),n=y.Utils.deltaTransformPoint(t,1,0),i=180/Math.PI*Math.atan2(e.y,e.x)-90,r=180/Math.PI*Math.atan2(n.y,n.x);return{translateX:t.e,translateY:t.f,scaleX:Math.sqrt(t.a*t.a+t.b*t.b),scaleY:Math.sqrt(t.c*t.c+t.d*t.d),skewX:i,skewY:r,rotation:i}},applySvgAttributes:function(t,e){var n,r,s,a,o={},l={};if(getComputedStyle){var h=getComputedStyle(t);for(n=h.length;n--;)void 0!==(s=h[r=h[n]])&&(l[r]=s)}for(n=t.attributes.length;n--;)o[(a=t.attributes[n]).nodeName]=a.value;for(r in i.isUndefined(l.opacity)||(l["stroke-opacity"]=l.opacity,l["fill-opacity"]=l.opacity),i.extend(l,o),l.visible=!(i.isUndefined(l.display)&&"none"===l.display)||i.isUndefined(l.visibility)&&"hidden"===l.visibility,l)switch(s=l[r],r){case"transform":if("none"===s)break;if(null===(t.getCTM?t.getCTM():null))break;var u=y.Utils.decomposeMatrix(t.getCTM());e.translation.set(u.translateX,u.translateY),e.rotation=u.rotation,e.scale=u.scaleX;var c=parseFloat((l.x+"").replace("px")),f=parseFloat((l.y+"").replace("px"));c&&(e.translation.x=c),f&&(e.translation.y=f);break;case"visible":e.visible=s;break;case"stroke-linecap":e.cap=s;break;case"stroke-linejoin":e.join=s;break;case"stroke-miterlimit":e.miter=s;break;case"stroke-width":e.linewidth=parseFloat(s);break;case"stroke-opacity":case"fill-opacity":case"opacity":e.opacity=parseFloat(s);break;case"fill":case"stroke":e[r]=/url\(\#.*\)/i.test(s)?this.getById(s.replace(/url\(\#(.*)\)/i,"$1")):"none"===s?"transparent":s;break;case"id":e.id=s;break;case"class":e.classList=s.split(" ")}return e},read:{svg:function(){return y.Utils.read.g.apply(this,arguments)},g:function(t){var e=new y.Group;y.Utils.applySvgAttributes.call(this,t,e);for(var n=0,i=t.childNodes.length;n<i;n++){var r=t.childNodes[n],s=r.nodeName;if(!s)return;var a=s.replace(/svg\:/gi,"").toLowerCase();if(a in y.Utils.read){var o=y.Utils.read[a].call(e,r);e.add(o)}}return e},polygon:function(t,e){var n=t.getAttribute("points"),i=[];n.replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,function(t,e,n){i.push(new y.Anchor(parseFloat(e),parseFloat(n)))});var r=new y.Path(i,!e).noStroke();return r.fill="black",y.Utils.applySvgAttributes.call(this,t,r)},polyline:function(t){return y.Utils.read.polygon.call(this,t,!0)},path:function(t){var e,n,r=t.getAttribute("d"),s=new y.Anchor,a=!1,o=!1,l=r.match(/[a-df-z][^a-df-z]*/gi),h=l.length-1;i.each(l.slice(0),function(t,e){var n,i=t[0],r=i.toLowerCase(),s=t.slice(1).trim().split(/[\s,]+|(?=\s?[+\-])/),a=[];switch(e<=0&&(l=[]),r){case"h":case"v":s.length>1&&(n=1);break;case"m":case"l":case"t":s.length>2&&(n=2);break;case"s":case"q":s.length>4&&(n=4);break;case"c":s.length>6&&(n=6)}if(n){for(var o=0,h=s.length,u=0;o<h;o+=n){var c=i;if(u>0)switch(i){case"m":c="l";break;case"M":c="L"}a.push([c].concat(s.slice(o,o+n)).join(" ")),u++}l=Array.prototype.concat.apply(l,a)}else l.push(t)});var c=[];if(i.each(l,function(t,r){var l,f,d,g,p,_,v,m,x,b,w,C,S=t[0],A=S.toLowerCase();switch(n=(n=(n=t.slice(1).trim()).replace(/(-?\d+(?:\.\d*)?)[eE]([+\-]?\d+)/g,function(t,e,n){return parseFloat(e)*u(10,n)})).split(/[\s,]+|(?=\s?[+\-])/),o=S===A,A){case"z":r>=h?a=!0:l=new y.Anchor(f=s.x,d=s.y,void 0,void 0,void 0,void 0,y.Commands.close);break;case"m":case"l":f=parseFloat(n[0]),d=parseFloat(n[1]),l=new y.Anchor(f,d,void 0,void 0,void 0,void 0,"m"===A?y.Commands.move:y.Commands.line),o&&l.addSelf(s),s=l;break;case"h":case"v":var T="x"==(H="h"===A?"x":"y")?"y":"x";(l=new y.Anchor(void 0,void 0,void 0,void 0,void 0,void 0,y.Commands.line))[H]=parseFloat(n[0]),l[T]=s[T],o&&(l[H]+=s[H]),s=l;break;case"c":case"s":g=s.x,p=s.y,e||(e=new y.Vector),"c"===A?(_=parseFloat(n[0]),v=parseFloat(n[1]),m=parseFloat(n[2]),x=parseFloat(n[3]),b=parseFloat(n[4]),w=parseFloat(n[5])):(_=(C=M(s,e,o)).x,v=C.y,m=parseFloat(n[0]),x=parseFloat(n[1]),b=parseFloat(n[2]),w=parseFloat(n[3])),o&&(_+=g,v+=p,m+=g,x+=p,b+=g,w+=p),i.isObject(s.controls)||y.Anchor.AppendCurveProperties(s),s.controls.right.set(_-s.x,v-s.y),l=new y.Anchor(b,w,m-b,x-w,void 0,void 0,y.Commands.curve),s=l,e=l.controls.left;break;case"t":case"q":g=s.x,p=s.y,e||(e=new y.Vector),e.isZero()?(_=g,v=p):(_=e.x,p=e.y),"q"===A?(m=parseFloat(n[0]),x=parseFloat(n[1]),b=parseFloat(n[1]),w=parseFloat(n[2])):(m=(C=M(s,e,o)).x,x=C.y,b=parseFloat(n[0]),w=parseFloat(n[1])),o&&(_+=g,v+=p,m+=g,x+=p,b+=g,w+=p),i.isObject(s.controls)||y.Anchor.AppendCurveProperties(s),s.controls.right.set(_-s.x,v-s.y),l=new y.Anchor(b,w,m-b,x-w,void 0,void 0,y.Commands.curve),s=l,e=l.controls.left;break;case"a":g=s.x,p=s.y;var E=parseFloat(n[0]),P=parseFloat(n[1]),O=parseFloat(n[2])*Math.PI/180,R=parseFloat(n[3]),I=parseFloat(n[4]);b=parseFloat(n[5]),w=parseFloat(n[6]),o&&(b+=g,w+=p);var L=(b-g)/2,F=(w-p)/2,N=L*Math.cos(O)+F*Math.sin(O),j=-L*Math.sin(O)+F*Math.cos(O),z=E*E,D=P*P,B=N*N,q=j*j,U=B/z+q/D;U>1&&(E*=Math.sqrt(U),P*=Math.sqrt(U));var V=Math.sqrt((z*D-z*q-D*B)/(z*q+D*B));i.isNaN(V)?V=0:R!=I&&V>0&&(V*=-1);var H,G=V*E*j/P,W=-V*P*N/E,$=G*Math.cos(O)-W*Math.sin(O)+(g+b)/2,Z=G*Math.sin(O)+W*Math.cos(O)+(p+w)/2,X=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))},J=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(X(t)*X(e))},Y=(H=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(J(t,e))})([1,0],[(N-G)/E,(j-W)/P]),K=[(N-G)/E,(j-W)/P],Q=[(-N-G)/E,(-j-W)/P],tt=H(K,Q);J(K,Q)<=-1&&(tt=Math.PI),J(K,Q)>=1&&(tt=0),R&&(tt=k(tt,2*Math.PI)),I&&tt>0&&(tt-=2*Math.PI);var et=y.Resolution,nt=(new y.Matrix).translate($,Z).rotate(O);(l=i.map(i.range(et),function(t){var e=(1-t/(et-1))*tt+Y,n=E*Math.cos(e),i=P*Math.sin(e),r=nt.multiply(n,i,1);return new y.Anchor(r.x,r.y,!1,!1,!1,!1,y.Commands.line)})).push(new y.Anchor(b,w,!1,!1,!1,!1,y.Commands.line)),e=(s=l[l.length-1]).controls.left}l&&(i.isArray(l)?c=c.concat(l):c.push(l))}),!(c.length<=1)){(r=new y.Path(c,a,void 0,!0).noStroke()).fill="black";var f=r.getBoundingClientRect(!0);return f.centroid={x:f.left+f.width/2,y:f.top+f.height/2},i.each(r.vertices,function(t){t.subSelf(f.centroid)}),r.translation.addSelf(f.centroid),y.Utils.applySvgAttributes.call(this,t,r)}},circle:function(t){var e=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),i=parseFloat(t.getAttribute("r")),r=new y.Circle(e,n,i).noStroke();return r.fill="black",y.Utils.applySvgAttributes.call(this,t,r)},ellipse:function(t){var e=parseFloat(t.getAttribute("cx")),n=parseFloat(t.getAttribute("cy")),i=parseFloat(t.getAttribute("rx")),r=parseFloat(t.getAttribute("ry")),s=new y.Ellipse(e,n,i,r).noStroke();return s.fill="black",y.Utils.applySvgAttributes.call(this,t,s)},rect:function(t){var e=parseFloat(t.getAttribute("x"))||0,n=parseFloat(t.getAttribute("y"))||0,i=parseFloat(t.getAttribute("width")),r=parseFloat(t.getAttribute("height")),s=new y.Rectangle(e+i/2,n+r/2,i,r).noStroke();return s.fill="black",y.Utils.applySvgAttributes.call(this,t,s)},line:function(t){var e=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),i=parseFloat(t.getAttribute("x2")),r=parseFloat(t.getAttribute("y2")),s=new y.Line(e,n,i,r).noFill();return y.Utils.applySvgAttributes.call(this,t,s)},lineargradient:function(t){for(var e=parseFloat(t.getAttribute("x1")),n=parseFloat(t.getAttribute("y1")),r=parseFloat(t.getAttribute("x2")),s=parseFloat(t.getAttribute("y2")),a=(r+e)/2,o=(s+n)/2,l=[],h=0;h<t.children.length;h++){var u,c=t.children[h],f=parseFloat(c.getAttribute("offset")),d=c.getAttribute("stop-color"),g=c.getAttribute("stop-opacity"),p=c.getAttribute("style");i.isNull(d)&&(d=(u=!!p&&p.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&u.length>1?u[1]:void 0),i.isNull(g)&&(g=(u=!!p&&p.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&u.length>1?parseFloat(u[1]):1),l.push(new y.Gradient.Stop(f,d,g))}var _=new y.LinearGradient(e-a,n-o,r-a,s-o,l);return y.Utils.applySvgAttributes.call(this,t,_)},radialgradient:function(t){var e=parseFloat(t.getAttribute("cx"))||0,n=parseFloat(t.getAttribute("cy"))||0,r=parseFloat(t.getAttribute("r")),s=parseFloat(t.getAttribute("fx")),a=parseFloat(t.getAttribute("fy"));i.isNaN(s)&&(s=e),i.isNaN(a)&&(a=n);for(var o=Math.abs(e+s)/2,l=Math.abs(n+a)/2,h=[],u=0;u<t.children.length;u++){var c,f=t.children[u],d=parseFloat(f.getAttribute("offset")),g=f.getAttribute("stop-color"),p=f.getAttribute("stop-opacity"),_=f.getAttribute("style");i.isNull(g)&&(g=(c=!!_&&_.match(/stop\-color\:\s?([\#a-fA-F0-9]*)/))&&c.length>1?c[1]:void 0),i.isNull(p)&&(p=(c=!!_&&_.match(/stop\-opacity\:\s?([0-9\.\-]*)/))&&c.length>1?parseFloat(c[1]):1),h.push(new y.Gradient.Stop(d,g,p))}var v=new y.RadialGradient(e-o,n-l,r,h,s-o,a-l);return y.Utils.applySvgAttributes.call(this,t,v)}},subdivide:function(t,e,n,r,s,a,o,l,h){var u=(h=h||y.Utils.Curve.RecursionLimit)+1;return t===o&&e===l?[new y.Anchor(o,l)]:i.map(i.range(0,u),function(i){var h=i/u,c=T(h,t,n,s,o),f=T(h,e,r,a,l);return new y.Anchor(c,f)})},getPointOnCubicBezier:function(t,e,n,i,r){var s=1-t;return s*s*s*e+3*s*s*t*n+3*s*t*t*i+t*t*t*r},getCurveLength:function(t,e,n,i,r,s,a,l,h){if(t===n&&e===i&&r===a&&s===l){var u=a-t,c=l-e;return o(u*u+c*c)}var f=9*(n-r)+3*(a-t),d=6*(t+r)-12*n,g=3*(n-t),p=9*(i-s)+3*(l-e),_=6*(e+s)-12*i,v=3*(i-e);return E(function(t){var e=(f*t+d)*t+g,n=(p*t+_)*t+v;return o(e*e+n*n)},0,1,h||y.Utils.Curve.RecursionLimit)},integrate:function(t,e,n,i){for(var r=y.Utils.Curve.abscissas[i-2],s=y.Utils.Curve.weights[i-2],a=.5*(n-e),o=a+e,l=0,h=i+1>>1,u=1&i?s[l++]*t(o):0;l<h;){var c=a*r[l];u+=s[l++]*(t(o+c)+t(o-c))}return a*u},getCurveFromPoints:function(t,e){for(var n=t.length,r=n-1,s=0;s<n;s++){var a=t[s];i.isObject(a.controls)||y.Anchor.AppendCurveProperties(a);var o=e?k(s-1,n):f(s-1,0),l=e?k(s+1,n):c(s+1,r),h=a;S(t[o],h,t[l]),h._command=0===s?y.Commands.move:y.Commands.curve,h.controls.left.x=i.isNumber(h.controls.left.x)?h.controls.left.x:h.x,h.controls.left.y=i.isNumber(h.controls.left.y)?h.controls.left.y:h.y,h.controls.right.x=i.isNumber(h.controls.right.x)?h.controls.right.x:h.x,h.controls.right.y=i.isNumber(h.controls.right.y)?h.controls.right.y:h.y}},getControlPoints:function(t,e,n){var a=C(t,e),o=C(n,e),u=b(t,e),c=b(n,e),f=(a+o)/2;return e.u=i.isObject(e.controls.left)?e.controls.left:new y.Vector(0,0),e.v=i.isObject(e.controls.right)?e.controls.right:new y.Vector(0,0),u<1e-4||c<1e-4?(e._relative||(e.controls.left.copy(e),e.controls.right.copy(e)),e):(u*=.33,c*=.33,o<a?f+=h:f-=h,e.controls.left.x=s(f)*u,e.controls.left.y=r(f)*u,e.controls.right.x=s(f-=l)*c,e.controls.right.y=r(f)*c,e._relative||(e.controls.left.x+=e.x,e.controls.left.y+=e.y,e.controls.right.x+=e.x,e.controls.right.y+=e.y),e)},getReflection:function(t,e,n){return new y.Vector(2*t.x-(e.x+t.x)-(n?t.x:0),2*t.y-(e.y+t.y)-(n?t.y:0))},getAnchorsFromArcData:function(t,e,n,r,s,a,o){(new y.Matrix).translate(t.x,t.y).rotate(e);var l=y.Resolution;return i.map(i.range(l),function(t){var e=(t+1)/l;o&&(e=1-e);var i=e*a+s,h=n*Math.cos(i),u=r*Math.sin(i),c=new y.Anchor(h,u);return y.Anchor.AppendCurveProperties(c),c.command=y.Commands.line,c})},ratioBetween:function(t,e){return(t.x*e.x+t.y*e.y)/(t.length()*e.length())},angleBetween:function(t,e){return arguments.length>=4?a(arguments[1]-arguments[3],arguments[0]-arguments[2]):a(t.y-e.y,t.x-e.x)},distanceBetweenSquared:function(t,e){var n=t.x-e.x,i=t.y-e.y;return n*n+i*i},distanceBetween:function(t,e){return o(w(t,e))},lerp:function(t,e,n){return n*(e-t)+t},toFixed:function(t){return Math.floor(1e3*t)/1e3},mod:function(t,e){for(;t<0;)t+=e;return t%e},Collection:function(){Array.call(this),arguments.length>1?Array.prototype.push.apply(this,arguments):arguments[0]&&Array.isArray(arguments[0])&&Array.prototype.push.apply(this,arguments[0])},Error:function(t){this.name="two.js",this.message=t},Events:{on:function(t,e){return this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push(e),this},off:function(t,e){if(!this._events)return this;if(!t&&!e)return this._events={},this;for(var n=t?[t]:i.keys(this._events),r=0,s=n.length;r<s;r++){var a=this._events[t=n[r]];if(a){var o=[];if(e)for(var l=0,h=a.length;l<h;l++){var u=a[l];u=u.callback?u.callback:u,e&&e!==u&&o.push(u)}this._events[t]=o}}return this},trigger:function(t){if(!this._events)return this;var e=g.call(arguments,1),n=this._events[t];return n&&x(this,n,e),this},listen:function(t,e,n){var i=this;if(t){var r=function(){n.apply(i,arguments)};r.obj=t,r.name=e,r.callback=n,t.on(e,r)}return this},ignore:function(t,e,n){return t.off(e,n),this}}})}),y.Utils.Events.bind=y.Utils.Events.on,y.Utils.Events.unbind=y.Utils.Events.off;var x=function(t,e,n){var i;switch(n.length){case 0:i=function(i){e[i].call(t,n[0])};break;case 1:i=function(i){e[i].call(t,n[0],n[1])};break;case 2:i=function(i){e[i].call(t,n[0],n[1],n[2])};break;case 3:i=function(i){e[i].call(t,n[0],n[1],n[2],n[3])};break;default:i=function(i){e[i].apply(t,n)}}for(var r=0;r<e.length;r++)i(r)};y.Utils.Error.prototype=new Error,y.Utils.Error.prototype.constructor=y.Utils.Error,y.Utils.Collection.prototype=new Array,y.Utils.Collection.prototype.constructor=y.Utils.Collection,i.extend(y.Utils.Collection.prototype,y.Utils.Events,{pop:function(){var t=Array.prototype.pop.apply(this,arguments);return this.trigger(y.Events.remove,[t]),t},shift:function(){var t=Array.prototype.shift.apply(this,arguments);return this.trigger(y.Events.remove,[t]),t},push:function(){var t=Array.prototype.push.apply(this,arguments);return this.trigger(y.Events.insert,arguments),t},unshift:function(){var t=Array.prototype.unshift.apply(this,arguments);return this.trigger(y.Events.insert,arguments),t},splice:function(){var t,e=Array.prototype.splice.apply(this,arguments);return this.trigger(y.Events.remove,e),arguments.length>2&&(t=this.slice(arguments[0],arguments[0]+arguments.length-2),this.trigger(y.Events.insert,t),this.trigger(y.Events.order)),e},sort:function(){return Array.prototype.sort.apply(this,arguments),this.trigger(y.Events.order),this},reverse:function(){return Array.prototype.reverse.apply(this,arguments),this.trigger(y.Events.order),this}});var b=y.Utils.distanceBetween,w=y.Utils.distanceBetweenSquared,C=y.Utils.angleBetween,S=y.Utils.getControlPoints,k=y.Utils.mod,A=y.Utils.getBackingStoreRatio,T=y.Utils.getPointOnCubicBezier,E=y.Utils.integrate,M=y.Utils.getReflection;function P(){var t=document.body.getBoundingClientRect(),e=this.width=t.width,n=this.height=t.height;this.renderer.setSize(e,n,this.ratio),this.trigger(y.Events.resize,e,n)}i.extend(y.prototype,y.Utils.Events,{appendTo:function(t){return t.appendChild(this.renderer.domElement),this},play:function(){return y.Utils.setPlaying.call(this,!0),this.trigger(y.Events.play)},pause:function(){return this.playing=!1,this.trigger(y.Events.pause)},update:function(){var t=!!this._lastFrame,e=p.now();this.frameCount++,t&&(this.timeDelta=parseFloat((e-this._lastFrame).toFixed(3))),this._lastFrame=e;var n=this.width,i=this.height,r=this.renderer;return n===r.width&&i===r.height||r.setSize(n,i,this.ratio),this.trigger(y.Events.update,this.frameCount,this.timeDelta),this.render()},render:function(){return this.renderer.render(),this.trigger(y.Events.render,this.frameCount)},add:function(t){var e=t;return e instanceof Array||(e=i.toArray(arguments)),this.scene.add(e),this},remove:function(t){var e=t;return e instanceof Array||(e=i.toArray(arguments)),this.scene.remove(e),this},clear:function(){return this.scene.remove(i.toArray(this.scene.children)),this},makeLine:function(t,e,n,i){var r=new y.Line(t,e,n,i);return this.scene.add(r),r},makeRectangle:function(t,e,n,i){var r=new y.Rectangle(t,e,n,i);return this.scene.add(r),r},makeRoundedRectangle:function(t,e,n,i,r){var s=new y.RoundedRectangle(t,e,n,i,r);return this.scene.add(s),s},makeCircle:function(t,e,n){var i=new y.Circle(t,e,n);return this.scene.add(i),i},makeEllipse:function(t,e,n,i){var r=new y.Ellipse(t,e,n,i);return this.scene.add(r),r},makeStar:function(t,e,n,i,r){var s=new y.Star(t,e,n,i,r);return this.scene.add(s),s},makeCurve:function(t){var e=arguments.length,n=t;if(!i.isArray(t)){n=[];for(var r=0;r<e;r+=2){var s=arguments[r];if(!i.isNumber(s))break;n.push(new y.Anchor(s,arguments[r+1]))}}var a=arguments[e-1],o=new y.Path(n,!(i.isBoolean(a)?a:void 0),!0),l=o.getBoundingClientRect();return o.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(o),o},makePolygon:function(t,e,n,i){var r=new y.Polygon(t,e,n,i);return this.scene.add(r),r},makeArcSegment:function(t,e,n,i,r,s,a){var o=new y.ArcSegment(t,e,n,i,r,s,a);return this.scene.add(o),o},makePath:function(t){var e=arguments.length,n=t;if(!i.isArray(t)){n=[];for(var r=0;r<e;r+=2){var s=arguments[r];if(!i.isNumber(s))break;n.push(new y.Anchor(s,arguments[r+1]))}}var a=arguments[e-1],o=new y.Path(n,!(i.isBoolean(a)?a:void 0)),l=o.getBoundingClientRect();return o.center().translation.set(l.left+l.width/2,l.top+l.height/2),this.scene.add(o),o},makeText:function(t,e,n,i){var r=new y.Text(t,e,n,i);return this.add(r),r},makeLinearGradient:function(t,e,n,i){var r=g.call(arguments,4),s=new y.LinearGradient(t,e,n,i,r);return this.add(s),s},makeRadialGradient:function(t,e,n){var i=g.call(arguments,3),r=new y.RadialGradient(t,e,n,i);return this.add(r),r},makeSprite:function(t,e,n,i,r,s,a){var o=new y.Sprite(t,e,n,i,r,s);return a&&o.play(),this.add(o),o},makeImageSequence:function(t,e,n,i,r){var s=new y.ImageSequence(t,e,n,i);return r&&s.play(),this.add(s),s},makeTexture:function(t,e){return new y.Texture(t,e)},makeGroup:function(t){var e=t;e instanceof Array||(e=i.toArray(arguments));var n=new y.Group;return this.scene.add(n),n.add(e),n},interpret:function(t,e){var n=t.tagName.toLowerCase();if(!(n in y.Utils.read))return null;var i=y.Utils.read[n].call(this,t);return this.add(e&&i instanceof y.Group?i.children:i),i},load:function(t,e){var n,r=[];if(/.*\.svg/gi.test(t))return y.Utils.xhr(t,i.bind(function(t){for(m.temp.innerHTML=t,n=0;n<m.temp.children.length;n++)r.push(this.interpret(m.temp.children[n]));e(r.length<=1?r[0]:r,m.temp.children.length<=1?m.temp.children[0]:m.temp.children)},this)),this;for(m.temp.innerHTML=t,n=0;n<m.temp.children.length;n++)r.push(this.interpret(m.temp.children[n]));return e(r.length<=1?r[0]:r,m.temp.children.length<=1?m.temp.children[0]:m.temp.children),this}});var O=m.getRequestAnimationFrame();function R(){O(R);for(var t=0;t<y.Instances.length;t++){var e=y.Instances[t];e.playing&&e.update()}}return"function"==typeof define&&define.amd?define("two",[],function(){return y}):"undefined"!=typeof module&&module.exports&&(module.exports=y),y}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.Registry=function(){this.map={}};e.extend(n,{}),e.extend(n.prototype,{add:function(t,e){return this.map[t]=e,this},remove:function(t){return delete this.map[t],this},get:function(t){return this.map[t]},contains:function(t){return t in this.map}})}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.Vector=function(t,e){this.x=t||0,this.y=e||0};e.extend(n,{zero:new t.Vector}),e.extend(n.prototype,t.Utils.Events,{set:function(t,e){return this.x=t,this.y=e,this},copy:function(t){return this.x=t.x,this.y=t.y,this},clear:function(){return this.x=0,this.y=0,this},clone:function(){return new n(this.x,this.y)},add:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addSelf:function(t){return this.x+=t.x,this.y+=t.y,this},sub:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},subSelf:function(t){return this.x-=t.x,this.y-=t.y,this},multiplySelf:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divideScalar:function(t){return t?(this.x/=t,this.y/=t):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this.x*t.x+this.y*t.y},lengthSquared:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){return this.set((t.x-this.x)*e+this.x,(t.y-this.y)*e+this.y)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this.x+", "+this.y},toObject:function(){return{x:this.x,y:this.y}},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this.x=this.x*e-this.y*n,this.y=this.x*n+this.y*e,this}});var i={set:function(e,n){return this._x=e,this._y=n,this.trigger(t.Events.change)},copy:function(e){return this._x=e.x,this._y=e.y,this.trigger(t.Events.change)},clear:function(){return this._x=0,this._y=0,this.trigger(t.Events.change)},clone:function(){return new n(this._x,this._y)},add:function(e,n){return this._x=e.x+n.x,this._y=e.y+n.y,this.trigger(t.Events.change)},addSelf:function(e){return this._x+=e.x,this._y+=e.y,this.trigger(t.Events.change)},sub:function(e,n){return this._x=e.x-n.x,this._y=e.y-n.y,this.trigger(t.Events.change)},subSelf:function(e){return this._x-=e.x,this._y-=e.y,this.trigger(t.Events.change)},multiplySelf:function(e){return this._x*=e.x,this._y*=e.y,this.trigger(t.Events.change)},multiplyScalar:function(e){return this._x*=e,this._y*=e,this.trigger(t.Events.change)},divideScalar:function(e){return e?(this._x/=e,this._y/=e,this.trigger(t.Events.change)):this.clear()},negate:function(){return this.multiplyScalar(-1)},dot:function(t){return this._x*t.x+this._y*t.y},lengthSquared:function(){return this._x*this._x+this._y*this._y},length:function(){return Math.sqrt(this.lengthSquared())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this._x-t.x,n=this._y-t.y;return e*e+n*n},setLength:function(t){return this.normalize().multiplyScalar(t)},equals:function(t,e){return e=void 0===e?1e-4:e,this.distanceTo(t)<e},lerp:function(t,e){return this.set((t.x-this._x)*e+this._x,(t.y-this._y)*e+this._y)},isZero:function(t){return t=void 0===t?1e-4:t,this.length()<t},toString:function(){return this._x+", "+this._y},toObject:function(){return{x:this._x,y:this._y}},rotate:function(t){var e=Math.cos(t),n=Math.sin(t);return this._x=this._x*e-this._y*n,this._y=this._x*n+this._y*e,this}},r={enumerable:!0,get:function(){return this._x},set:function(e){this._x=e,this.trigger(t.Events.change,"x")}},s={enumerable:!0,get:function(){return this._y},set:function(e){this._y=e,this.trigger(t.Events.change,"y")}};t.Vector.prototype.bind=t.Vector.prototype.on=function(){return this._bound||(this._x=this.x,this._y=this.y,Object.defineProperty(this,"x",r),Object.defineProperty(this,"y",s),e.extend(this,i),this._bound=!0),t.Utils.Events.bind.apply(this,arguments),this}}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Commands,n=t.Utils,i=t.Anchor=function(r,s,a,o,l,h,u){if(t.Vector.call(this,r,s),this._broadcast=n.bind(function(){this.trigger(t.Events.change)},this),this._command=u||e.move,this._relative=!0,!u)return this;i.AppendCurveProperties(this),n.isNumber(a)&&(this.controls.left.x=a),n.isNumber(o)&&(this.controls.left.y=o),n.isNumber(l)&&(this.controls.right.x=l),n.isNumber(h)&&(this.controls.right.y=h)};n.extend(i,{AppendCurveProperties:function(e){e.controls={left:new t.Vector(0,0),right:new t.Vector(0,0)}}});var r={listen:function(){return n.isObject(this.controls)||i.AppendCurveProperties(this),this.controls.left.bind(t.Events.change,this._broadcast),this.controls.right.bind(t.Events.change,this._broadcast),this},ignore:function(){return this.controls.left.unbind(t.Events.change,this._broadcast),this.controls.right.unbind(t.Events.change,this._broadcast),this},clone:function(){var e=this.controls,n=new t.Anchor(this.x,this.y,e&&e.left.x,e&&e.left.y,e&&e.right.x,e&&e.right.y,this.command);return n.relative=this._relative,n},toObject:function(){var t={x:this.x,y:this.y};return this._command&&(t.command=this._command),this._relative&&(t.relative=this._relative),this.controls&&(t.controls={left:this.controls.left.toObject(),right:this.controls.right.toObject()}),t},toString:function(){return this.controls?[this._x,this._y,this.controls.left.x,this.controls.left.y,this.controls.right.x,this.controls.right.y].join(", "):[this._x,this._y].join(", ")}};Object.defineProperty(i.prototype,"command",{enumerable:!0,get:function(){return this._command},set:function(r){return this._command=r,this._command!==e.curve||n.isObject(this.controls)||i.AppendCurveProperties(this),this.trigger(t.Events.change)}}),Object.defineProperty(i.prototype,"relative",{enumerable:!0,get:function(){return this._relative},set:function(e){return this._relative==e?this:(this._relative=!!e,this.trigger(t.Events.change))}}),n.extend(i.prototype,t.Vector.prototype,r),t.Anchor.prototype.bind=t.Anchor.prototype.on=function(){t.Vector.prototype.bind.apply(this,arguments),n.extend(this,r)},t.Anchor.prototype.unbind=t.Anchor.prototype.off=function(){t.Vector.prototype.unbind.apply(this,arguments),n.extend(this,r)}}(("undefined"!=typeof global?global:this).Two),function(t){var e=Math.cos,n=Math.sin,i=Math.tan,r=t.Utils,s=t.Matrix=function(e,n,i,s,a,o){this.elements=new t.Array(9);var l=e;r.isArray(l)||(l=r.toArray(arguments)),this.identity().set(l)};r.extend(s,{Identity:[1,0,0,0,1,0,0,0,1],Multiply:function(e,n,i){if(n.length<=3){var r=n[0]||0,s=n[1]||0,a=n[2]||0;return{x:e[0]*r+e[1]*s+e[2]*a,y:e[3]*r+e[4]*s+e[5]*a,z:e[6]*r+e[7]*s+e[8]*a}}var o=e[0],l=e[1],h=e[2],u=e[3],c=e[4],f=e[5],d=e[6],g=e[7],p=e[8],_=n[0],v=n[1],m=n[2],y=n[3],x=n[4],b=n[5],w=n[6],C=n[7],S=n[8];return(i=i||new t.Array(9))[0]=o*_+l*y+h*w,i[1]=o*v+l*x+h*C,i[2]=o*m+l*b+h*S,i[3]=u*_+c*y+f*w,i[4]=u*v+c*x+f*C,i[5]=u*m+c*b+f*S,i[6]=d*_+g*y+p*w,i[7]=d*v+g*x+p*C,i[8]=d*m+g*b+p*S,i}}),r.extend(s.prototype,t.Utils.Events,{set:function(e){var n=e;return r.isArray(n)||(n=r.toArray(arguments)),r.extend(this.elements,n),this.trigger(t.Events.change)},identity:function(){return this.set(s.Identity),this},multiply:function(e,n,i,s,a,o,l,h,u){var c=arguments,f=c.length;if(f<=1)return r.each(this.elements,function(t,n){this.elements[n]=t*e},this),this.trigger(t.Events.change);if(f<=3)return{x:(a=this.elements)[0]*(e=e||0)+a[1]*(n=n||0)+a[2]*(i=i||0),y:a[3]*e+a[4]*n+a[5]*i,z:a[6]*e+a[7]*n+a[8]*i};var d=this.elements,g=d[0],p=d[1],_=d[2],v=d[3],m=d[4],y=d[5],x=d[6],b=d[7],w=d[8],C=c[0],S=c[1],k=c[2],A=c[3],T=c[4],E=c[5],M=c[6],P=c[7],O=c[8];return this.elements[0]=g*C+p*A+_*M,this.elements[1]=g*S+p*T+_*P,this.elements[2]=g*k+p*E+_*O,this.elements[3]=v*C+m*A+y*M,this.elements[4]=v*S+m*T+y*P,this.elements[5]=v*k+m*E+y*O,this.elements[6]=x*C+b*A+w*M,this.elements[7]=x*S+b*T+w*P,this.elements[8]=x*k+b*E+w*O,this.trigger(t.Events.change)},inverse:function(e){var n=this.elements;e=e||new t.Matrix;var i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],h=n[6],u=n[7],c=n[8],f=c*o-l*u,d=-c*a+l*h,g=u*a-o*h,p=i*f+r*d+s*g;return p?(e.elements[0]=f*(p=1/p),e.elements[1]=(-c*r+s*u)*p,e.elements[2]=(l*r-s*o)*p,e.elements[3]=d*p,e.elements[4]=(c*i-s*h)*p,e.elements[5]=(-l*i+s*a)*p,e.elements[6]=g*p,e.elements[7]=(-u*i+r*h)*p,e.elements[8]=(o*i-r*a)*p,e):null},scale:function(t,e){return arguments.length<=1&&(e=t),this.multiply(t,0,0,0,e,0,0,0,1)},rotate:function(t){var i=e(t),r=n(t);return this.multiply(i,-r,0,r,i,0,0,0,1)},translate:function(t,e){return this.multiply(1,0,t,0,1,e,0,0,1)},skewX:function(t){var e=i(t);return this.multiply(1,e,0,0,1,0,0,0,1)},skewY:function(t){var e=i(t);return this.multiply(1,0,0,e,1,0,0,0,1)},toString:function(t){var e=[];return this.toArray(t,e),e.join(" ")},toArray:function(t,e){var n=this.elements,i=!!e,r=parseFloat(n[0].toFixed(3)),s=parseFloat(n[1].toFixed(3)),a=parseFloat(n[2].toFixed(3)),o=parseFloat(n[3].toFixed(3)),l=parseFloat(n[4].toFixed(3)),h=parseFloat(n[5].toFixed(3));if(t){var u=parseFloat(n[6].toFixed(3)),c=parseFloat(n[7].toFixed(3)),f=parseFloat(n[8].toFixed(3));return i?(e[0]=r,e[1]=o,e[2]=u,e[3]=s,e[4]=l,e[5]=c,e[6]=a,e[7]=h,void(e[8]=f)):[r,o,u,s,l,c,a,h,f]}return i?(e[0]=r,e[1]=o,e[2]=s,e[3]=l,e[4]=a,void(e[5]=h)):[r,o,s,l,a,h]},clone:function(){return new t.Matrix(this.elements[0],this.elements[1],this.elements[2],this.elements[3],this.elements[4],this.elements[5],this.elements[6],this.elements[7],this.elements[8])}})}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils.mod,n=t.Utils.toFixed,i=t.Utils,r={version:1.1,ns:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",alignments:{left:"start",center:"middle",right:"end"},createElement:function(t,e){var n=t,s=document.createElementNS(r.ns,n);return"svg"===n&&(e=i.defaults(e||{},{version:r.version})),i.isEmpty(e)||r.setAttributes(s,e),s},setAttributes:function(t,e){for(var n=Object.keys(e),i=0;i<n.length;i++)/href/.test(n[i])?t.setAttributeNS(r.xlink,n[i],e[n[i]]):t.setAttribute(n[i],e[n[i]]);return this},removeAttributes:function(t,e){for(var n in e)t.removeAttribute(n);return this},toString:function(i,r){for(var s,a=i.length,o=a-1,l="",h=0;h<a;h++){var u,c,f,d,g,p,_,v,m,y=i[h],x=r?e(h-1,a):Math.max(h-1,0),b=r?e(h+1,a):Math.min(h+1,o),w=i[x],C=i[b],S=n(y._x),k=n(y._y);switch(y._command){case t.Commands.close:u=t.Commands.close;break;case t.Commands.curve:p=w.controls&&w.controls.right||t.Vector.zero,_=y.controls&&y.controls.left||t.Vector.zero,w._relative?(c=n(p.x+w.x),f=n(p.y+w.y)):(c=n(p.x),f=n(p.y)),y._relative?(d=n(_.x+y.x),g=n(_.y+y.y)):(d=n(_.x),g=n(_.y)),u=(0===h?t.Commands.move:t.Commands.curve)+" "+c+" "+f+" "+d+" "+g+" "+S+" "+k;break;case t.Commands.move:s=y,u=t.Commands.move+" "+S+" "+k;break;default:u=y._command+" "+S+" "+k}h>=o&&r&&(y._command===t.Commands.curve&&(v=y.controls&&y.controls.right||y,m=(C=s).controls&&C.controls.left||C,y._relative?(c=n(v.x+y.x),f=n(v.y+y.y)):(c=n(v.x),f=n(v.y)),C._relative?(d=n(m.x+C.x),g=n(m.y+C.y)):(d=n(m.x),g=n(m.y)),u+=" C "+c+" "+f+" "+d+" "+g+" "+(S=n(C.x))+" "+(k=n(C.y))),u+=" Z"),l+=u+" "}return l},getClip:function(t){var e=t._renderer.clip;if(!e){for(var n=t;n.parent;)n=n.parent;e=t._renderer.clip=r.createElement("clipPath"),n.defs.appendChild(e)}return e},group:{appendChild:function(t){var e=t._renderer.elem;if(e){var n=e.nodeName;!n||/(radial|linear)gradient/i.test(n)||t._clip||this.elem.appendChild(e)}},removeChild:function(t){var e=t._renderer.elem;e&&e.parentNode==this.elem&&e.nodeName&&(t._clip||this.elem.removeChild(e))},orderChild:function(t){this.elem.appendChild(t._renderer.elem)},renderChild:function(t){r[t._renderer.type].render.call(t,this)},render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;this._renderer.elem||(this._renderer.elem=r.createElement("g",{id:this.id}),t.appendChild(this._renderer.elem));var e={domElement:t,elem:this._renderer.elem};(this._matrix.manual||this._flagMatrix)&&this._renderer.elem.setAttribute("transform","matrix("+this._matrix.toString()+")");for(var n=0;n<this.children.length;n++){var i=this.children[n];r[i._renderer.type].render.call(i,t)}return this._flagOpacity&&this._renderer.elem.setAttribute("opacity",this._opacity),this._flagAdditions&&this.additions.forEach(r.group.appendChild,e),this._flagSubtractions&&this.subtractions.forEach(r.group.removeChild,e),this._flagOrder&&this.children.forEach(r.group.orderChild,e),this._flagMask&&(this._mask?this._renderer.elem.setAttribute("clip-path","url(#"+this._mask.id+")"):this._renderer.elem.removeAttribute("clip-path")),this.flagReset()}},path:{render:function(t){if(this._update(),0===this._opacity&&!this._flagOpacity)return this;var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagVertices){var n=r.toString(this._vertices,this._closed);e.d=n}if(this._fill&&this._fill._renderer&&(this._fill._update(),r[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),r[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e["stroke-opacity"]=this._opacity,e["fill-opacity"]=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._flagCap&&(e["stroke-linecap"]=this._cap),this._flagJoin&&(e["stroke-linejoin"]=this._join),this._flagMiter&&(e["stroke-miterlimit"]=this._miter),this._renderer.elem?r.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=r.createElement("path",e),t.appendChild(this._renderer.elem)),this._flagClip){var i=r.getClip(this),s=this._renderer.elem;this._clip?(s.removeAttribute("id"),i.setAttribute("id",this.id),i.appendChild(s)):(i.removeAttribute("id"),s.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(s))}return this.flagReset()}},text:{render:function(t){this._update();var e={};if((this._matrix.manual||this._flagMatrix)&&(e.transform="matrix("+this._matrix.toString()+")"),this._flagFamily&&(e["font-family"]=this._family),this._flagSize&&(e["font-size"]=this._size),this._flagLeading&&(e["line-height"]=this._leading),this._flagAlignment&&(e["text-anchor"]=r.alignments[this._alignment]||this._alignment),this._flagBaseline&&(e["alignment-baseline"]=e["dominant-baseline"]=this._baseline),this._flagStyle&&(e["font-style"]=this._style),this._flagWeight&&(e["font-weight"]=this._weight),this._flagDecoration&&(e["text-decoration"]=this._decoration),this._fill&&this._fill._renderer&&(this._fill._update(),r[this._fill._renderer.type].render.call(this._fill,t,!0)),this._flagFill&&(e.fill=this._fill&&this._fill.id?"url(#"+this._fill.id+")":this._fill),this._stroke&&this._stroke._renderer&&(this._stroke._update(),r[this._stroke._renderer.type].render.call(this._stroke,t,!0)),this._flagStroke&&(e.stroke=this._stroke&&this._stroke.id?"url(#"+this._stroke.id+")":this._stroke),this._flagLinewidth&&(e["stroke-width"]=this._linewidth),this._flagOpacity&&(e.opacity=this._opacity),this._flagVisible&&(e.visibility=this._visible?"visible":"hidden"),this._renderer.elem?r.setAttributes(this._renderer.elem,e):(e.id=this.id,this._renderer.elem=r.createElement("text",e),t.defs.appendChild(this._renderer.elem)),this._flagClip){var n=r.getClip(this),i=this._renderer.elem;this._clip?(i.removeAttribute("id"),n.setAttribute("id",this.id),n.appendChild(i)):(n.removeAttribute("id"),i.setAttribute("id",this.id),this.parent._renderer.elem.appendChild(i))}return this._flagValue&&(this._renderer.elem.textContent=this._value),this.flagReset()}},"linear-gradient":{render:function(t,e){e||this._update();var n={};if(this._flagEndPoints&&(n.x1=this.left._x,n.y1=this.left._y,n.x2=this.right._x,n.y2=this.right._y),this._flagSpread&&(n.spreadMethod=this._spread),this._renderer.elem?r.setAttributes(this._renderer.elem,n):(n.id=this.id,n.gradientUnits="userSpaceOnUse",this._renderer.elem=r.createElement("linearGradient",n),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;i&&(this._renderer.elem.childNodes.length=0);for(var s=0;s<this.stops.length;s++){var a=this.stops[s],o={};a._flagOffset&&(o.offset=100*a._offset+"%"),a._flagColor&&(o["stop-color"]=a._color),a._flagOpacity&&(o["stop-opacity"]=a._opacity),a._renderer.elem?r.setAttributes(a._renderer.elem,o):a._renderer.elem=r.createElement("stop",o),i&&this._renderer.elem.appendChild(a._renderer.elem),a.flagReset()}}return this.flagReset()}},"radial-gradient":{render:function(t,e){e||this._update();var n={};if(this._flagCenter&&(n.cx=this.center._x,n.cy=this.center._y),this._flagFocal&&(n.fx=this.focal._x,n.fy=this.focal._y),this._flagRadius&&(n.r=this._radius),this._flagSpread&&(n.spreadMethod=this._spread),this._renderer.elem?r.setAttributes(this._renderer.elem,n):(n.id=this.id,n.gradientUnits="userSpaceOnUse",this._renderer.elem=r.createElement("radialGradient",n),t.defs.appendChild(this._renderer.elem)),this._flagStops){var i=this._renderer.elem.childNodes.length!==this.stops.length;i&&(this._renderer.elem.childNodes.length=0);for(var s=0;s<this.stops.length;s++){var a=this.stops[s],o={};a._flagOffset&&(o.offset=100*a._offset+"%"),a._flagColor&&(o["stop-color"]=a._color),a._flagOpacity&&(o["stop-opacity"]=a._opacity),a._renderer.elem?r.setAttributes(a._renderer.elem,o):a._renderer.elem=r.createElement("stop",o),i&&this._renderer.elem.appendChild(a._renderer.elem),a.flagReset()}}return this.flagReset()}},texture:{render:function(e,n){n||this._update();var s={},a={x:0,y:0},o=this.image;if(this._flagLoaded&&this.loaded)switch(o.nodeName.toLowerCase()){case"canvas":a.href=a["xlink:href"]=o.toDataURL("image/png");break;case"img":case"image":a.href=a["xlink:href"]=this.src}if((this._flagOffset||this._flagLoaded||this._flagScale)&&(s.x=this._offset.x,s.y=this._offset.y,o&&(s.x-=o.width/2,s.y-=o.height/2,this._scale instanceof t.Vector?(s.x*=this._scale.x,s.y*=this._scale.y):(s.x*=this._scale,s.y*=this._scale)),s.x>0&&(s.x*=-1),s.y>0&&(s.y*=-1)),(this._flagScale||this._flagLoaded||this._flagRepeat)&&(s.width=0,s.height=0,o)){switch(a.width=s.width=o.width,a.height=s.height=o.height,this._repeat){case"no-repeat":s.width+=1,s.height+=1}this._scale instanceof t.Vector?(s.width*=this._scale.x,s.height*=this._scale.y):(s.width*=this._scale,s.height*=this._scale)}return(this._flagScale||this._flagLoaded)&&(this._renderer.image?i.isEmpty(a)||r.setAttributes(this._renderer.image,a):this._renderer.image=r.createElement("image",a)),this._renderer.elem?i.isEmpty(s)||r.setAttributes(this._renderer.elem,s):(s.id=this.id,s.patternUnits="userSpaceOnUse",this._renderer.elem=r.createElement("pattern",s),e.defs.appendChild(this._renderer.elem)),this._renderer.elem&&this._renderer.image&&!this._renderer.appended&&(this._renderer.elem.appendChild(this._renderer.image),this._renderer.appended=!0),this.flagReset()}}},s=t[t.Types.svg]=function(e){this.domElement=e.domElement||r.createElement("svg"),this.scene=new t.Group,this.scene.parent=this,this.defs=r.createElement("defs"),this.domElement.appendChild(this.defs),this.domElement.defs=this.defs,this.domElement.style.overflow="hidden"};i.extend(s,{Utils:r}),i.extend(s.prototype,t.Utils.Events,{setSize:function(t,e){return this.width=t,this.height=e,r.setAttributes(this.domElement,{width:t,height:e}),this},render:function(){return r.group.render.call(this.scene,this.domElement),this}})}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils.mod,n=t.Utils.toFixed,i=t.Utils.getRatio,r=t.Utils,s=function(t){return 1==t[0]&&0==t[3]&&0==t[1]&&1==t[4]&&0==t[2]&&0==t[5]},a={isHidden:/(none|transparent)/i,alignments:{left:"start",middle:"center",right:"end"},shim:function(t){return t.tagName="canvas",t.nodeType=1,t},group:{renderChild:function(t){a[t._renderer.type].render.call(t,this.ctx,!0,this.clip)},render:function(t){this._update();var e=this._matrix.elements,n=this.parent;this._renderer.opacity=this._opacity*(n&&n._renderer?n._renderer.opacity:1);var i=s(e),r=this._mask;if(this._renderer.context||(this._renderer.context={}),this._renderer.context.ctx=t,i||(t.save(),t.transform(e[0],e[3],e[1],e[4],e[2],e[5])),r&&a[r._renderer.type].render.call(r,t,!0),this.opacity>0&&0!==this.scale)for(var o=0;o<this.children.length;o++){var l=this.children[o];a[l._renderer.type].render.call(l,t)}return i||t.restore(),this.flagReset()}},path:{render:function(i,o,l){var h,u,c,f,d,g,p,_,v,m,y,x,b,w,C,S,k,A,T,E,M,P,O,R,I,L,F,N,j,z,D;if(this._update(),u=this._stroke,c=this._linewidth,f=this._fill,d=this._opacity*this.parent._renderer.opacity,g=this._visible,p=this._cap,_=this._join,v=this._miter,m=this._closed,b=(x=(y=this._vertices).length)-1,z=s(h=this._matrix.elements),j=this._clip,!o&&(!g||j))return this;z||(i.save(),i.transform(h[0],h[3],h[1],h[4],h[2],h[5])),f&&(r.isString(f)?i.fillStyle=f:(a[f._renderer.type].render.call(f,i),i.fillStyle=f._renderer.effect)),u&&(r.isString(u)?i.strokeStyle=u:(a[u._renderer.type].render.call(u,i),i.strokeStyle=u._renderer.effect)),c&&(i.lineWidth=c),v&&(i.miterLimit=v),_&&(i.lineJoin=_),p&&(i.lineCap=p),r.isNumber(d)&&(i.globalAlpha=d),i.beginPath();for(var B=0;B<y.length;B++)switch(F=n((S=y[B])._x),N=n(S._y),S._command){case t.Commands.close:i.closePath();break;case t.Commands.curve:w=m?e(B-1,x):Math.max(B-1,0),k=y[m?e(B+1,x):Math.min(B+1,b)],O=(C=y[w]).controls&&C.controls.right||t.Vector.zero,R=S.controls&&S.controls.left||t.Vector.zero,C._relative?(M=O.x+n(C._x),P=O.y+n(C._y)):(M=n(O.x),P=n(O.y)),S._relative?(T=R.x+n(S._x),E=R.y+n(S._y)):(T=n(R.x),E=n(R.y)),i.bezierCurveTo(M,P,T,E,F,N),B>=b&&m&&(I=S.controls&&S.controls.right||t.Vector.zero,L=(k=A).controls&&k.controls.left||t.Vector.zero,S._relative?(M=I.x+n(S._x),P=I.y+n(S._y)):(M=n(I.x),P=n(I.y)),k._relative?(T=L.x+n(k._x),E=L.y+n(k._y)):(T=n(L.x),E=n(L.y)),F=n(k._x),N=n(k._y),i.bezierCurveTo(M,P,T,E,F,N));break;case t.Commands.line:i.lineTo(F,N);break;case t.Commands.move:A=S,i.moveTo(F,N)}return m&&i.closePath(),j||l||(a.isHidden.test(f)||((D=f._renderer&&f._renderer.offset)&&(i.save(),i.translate(-f._renderer.offset.x,-f._renderer.offset.y),i.scale(f._renderer.scale.x,f._renderer.scale.y)),i.fill(),D&&i.restore()),a.isHidden.test(u)||((D=u._renderer&&u._renderer.offset)&&(i.save(),i.translate(-u._renderer.offset.x,-u._renderer.offset.y),i.scale(u._renderer.scale.x,u._renderer.scale.y),i.lineWidth=c/u._renderer.scale.x),i.stroke(),D&&i.restore())),z||i.restore(),j&&!l&&i.clip(),this.flagReset()}},text:{render:function(t,e,i){this._update();var o,l,h,u,c,f=this._matrix.elements,d=this._stroke,g=this._linewidth,p=this._fill,_=this._opacity*this.parent._renderer.opacity,v=this._visible,m=s(f),y=p._renderer&&p._renderer.offset&&d._renderer&&d._renderer.offset,x=this._clip;return e||v&&!x?(m||(t.save(),t.transform(f[0],f[3],f[1],f[4],f[2],f[5])),y||(t.font=[this._style,this._weight,this._size+"px/"+this._leading+"px",this._family].join(" ")),t.textAlign=a.alignments[this._alignment]||this._alignment,t.textBaseline=this._baseline,p&&(r.isString(p)?t.fillStyle=p:(a[p._renderer.type].render.call(p,t),t.fillStyle=p._renderer.effect)),d&&(r.isString(d)?t.strokeStyle=d:(a[d._renderer.type].render.call(d,t),t.strokeStyle=d._renderer.effect)),g&&(t.lineWidth=g),r.isNumber(_)&&(t.globalAlpha=_),x||i||(a.isHidden.test(p)||(p._renderer&&p._renderer.offset?(u=n(p._renderer.scale.x),c=n(p._renderer.scale.y),t.save(),t.translate(-n(p._renderer.offset.x),-n(p._renderer.offset.y)),t.scale(u,c),o=this._leading/p._renderer.scale.y,t.font=[this._style,this._weight,n(this._size/p._renderer.scale.y)+"px/",n(o)+"px",this._family].join(" "),h=p._renderer.offset.y/p._renderer.scale.y,t.fillText(this.value,n(l=p._renderer.offset.x/p._renderer.scale.x),n(h)),t.restore()):t.fillText(this.value,0,0)),a.isHidden.test(d)||(d._renderer&&d._renderer.offset?(u=n(d._renderer.scale.x),c=n(d._renderer.scale.y),t.save(),t.translate(-n(d._renderer.offset.x),-n(d._renderer.offset.y)),t.scale(u,c),o=this._leading/d._renderer.scale.y,t.font=[this._style,this._weight,n(this._size/d._renderer.scale.y)+"px/",n(o)+"px",this._family].join(" "),l=d._renderer.offset.x/d._renderer.scale.x,h=d._renderer.offset.y/d._renderer.scale.y,t.lineWidth=n(g/d._renderer.scale.x),t.strokeText(this.value,n(l),n(h)),t.restore()):t.strokeText(this.value,0,0))),m||t.restore(),x&&!i&&t.clip(),this.flagReset()):this}},"linear-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var e=0;e<this.stops.length;e++){var n=this.stops[e];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}},"radial-gradient":{render:function(t){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var e=0;e<this.stops.length;e++){var n=this.stops[e];this._renderer.effect.addColorStop(n._offset,n._color)}}return this.flagReset()}},texture:{render:function(e){this._update();var n=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagImage||this._flagVideo||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(this.image,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof t.Vector||(this._renderer.offset=new t.Vector),this._renderer.offset.x=-this._offset.x,this._renderer.offset.y=-this._offset.y,n&&(this._renderer.offset.x+=n.width/2,this._renderer.offset.y+=n.height/2,this._scale instanceof t.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof t.Vector||(this._renderer.scale=new t.Vector),this._scale instanceof t.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},o=t[t.Types.canvas]=function(e){var n=!1!==e.smoothing;this.domElement=e.domElement||document.createElement("canvas"),this.ctx=this.domElement.getContext("2d"),this.overdraw=e.overdraw||!1,r.isUndefined(this.ctx.imageSmoothingEnabled)||(this.ctx.imageSmoothingEnabled=n),this.scene=new t.Group,this.scene.parent=this};r.extend(o,{Utils:a}),r.extend(o.prototype,t.Utils.Events,{setSize:function(t,e,n){return this.width=t,this.height=e,this.ratio=r.isUndefined(n)?i(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,this.domElement.style&&r.extend(this.domElement.style,{width:t+"px",height:e+"px"}),this},render:function(){var t=1===this.ratio;return t||(this.ctx.save(),this.ctx.scale(this.ratio,this.ratio)),this.overdraw||this.ctx.clearRect(0,0,this.width,this.height),a.group.render.call(this.scene,this.ctx),t||this.ctx.restore(),this}})}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.root,n=t.Matrix.Multiply,i=t.Utils.mod,r=[1,0,0,0,1,0,0,0,1],s=new t.Array(9),a=t.Utils.getRatio,o=t.Utils.toFixed,l=t.Utils,h={isHidden:/(none|transparent)/i,canvas:e.document?e.document.createElement("canvas"):{getContext:l.identity},alignments:{left:"start",middle:"center",right:"end"},matrix:new t.Matrix,uv:new t.Array([0,0,1,0,0,1,0,1,1,0,1,1]),group:{removeChild:function(t,e){if(t.children)for(var n=0;n<t.children.length;n++)h.group.removeChild(t.children[n],e);else e.deleteTexture(t._renderer.texture),delete t._renderer.texture},renderChild:function(t){h[t._renderer.type].render.call(t,this.gl,this.program)},render:function(e,i){this._update();var r=this.parent,a=r._matrix&&r._matrix.manual||r._flagMatrix;if((a||this._matrix.manual||this._flagMatrix)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,s),n(s,r._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*r._renderer.scale,a&&(this._flagMatrix=!0)),this._mask&&(e.enable(e.STENCIL_TEST),e.stencilFunc(e.ALWAYS,1,1),e.colorMask(!1,!1,!1,!0),e.stencilOp(e.KEEP,e.KEEP,e.INCR),h[this._mask._renderer.type].render.call(this._mask,e,i,this),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,1),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)),this._flagOpacity=r._flagOpacity||this._flagOpacity,this._renderer.opacity=this._opacity*(r&&r._renderer?r._renderer.opacity:1),this._flagSubtractions)for(var o=0;o<this.subtractions.length;o++)h.group.removeChild(this.subtractions[o],e);return this.children.forEach(h.group.renderChild,{gl:e,program:i}),this._mask&&(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),h[this._mask._renderer.type].render.call(this._mask,e,i,this),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,1),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.disable(e.STENCIL_TEST)),this.flagReset()}},path:{updateCanvas:function(e){var n,r,s,a,u,c,f,d,g,p,_,v,m,y,x=e._vertices,w=this.canvas,C=this.ctx,S=e._renderer.scale,k=e._stroke,A=e._linewidth,T=e._fill,E=e._renderer.opacity||e._opacity,M=e._cap,P=e._join,O=e._miter,R=e._closed,I=x.length,L=I-1;w.width=Math.max(Math.ceil(e._renderer.rect.width*S),1),w.height=Math.max(Math.ceil(e._renderer.rect.height*S),1);var F,N=e._renderer.rect.centroid,j=N.x,z=N.y;C.clearRect(0,0,w.width,w.height),T&&(l.isString(T)?C.fillStyle=T:(h[T._renderer.type].render.call(T,C,e),C.fillStyle=T._renderer.effect)),k&&(l.isString(k)?C.strokeStyle=k:(h[k._renderer.type].render.call(k,C,e),C.strokeStyle=k._renderer.effect)),A&&(C.lineWidth=A),O&&(C.miterLimit=O),P&&(C.lineJoin=P),M&&(C.lineCap=M),l.isNumber(E)&&(C.globalAlpha=E),C.save(),C.scale(S,S),C.translate(j,z),C.beginPath();for(var D=0;D<x.length;D++)switch(b=x[D],v=o(b._x),m=o(b._y),b._command){case t.Commands.close:C.closePath();break;case t.Commands.curve:n=R?i(D-1,I):Math.max(D-1,0),s=x[R?i(D+1,I):Math.min(D+1,L)],d=(r=x[n]).controls&&r.controls.right||t.Vector.zero,g=b.controls&&b.controls.left||t.Vector.zero,r._relative?(c=o(d.x+r._x),f=o(d.y+r._y)):(c=o(d.x),f=o(d.y)),b._relative?(a=o(g.x+b._x),u=o(g.y+b._y)):(a=o(g.x),u=o(g.y)),C.bezierCurveTo(c,f,a,u,v,m),D>=L&&R&&(s=F,p=b.controls&&b.controls.right||t.Vector.zero,_=s.controls&&s.controls.left||t.Vector.zero,b._relative?(c=o(p.x+b._x),f=o(p.y+b._y)):(c=o(p.x),f=o(p.y)),s._relative?(a=o(_.x+s._x),u=o(_.y+s._y)):(a=o(_.x),u=o(_.y)),v=o(s._x),m=o(s._y),C.bezierCurveTo(c,f,a,u,v,m));break;case t.Commands.line:C.lineTo(v,m);break;case t.Commands.move:F=b,C.moveTo(v,m)}R&&C.closePath(),h.isHidden.test(T)||((y=T._renderer&&T._renderer.offset)&&(C.save(),C.translate(-T._renderer.offset.x,-T._renderer.offset.y),C.scale(T._renderer.scale.x,T._renderer.scale.y)),C.fill(),y&&C.restore()),h.isHidden.test(k)||((y=k._renderer&&k._renderer.offset)&&(C.save(),C.translate(-k._renderer.offset.x,-k._renderer.offset.y),C.scale(k._renderer.scale.x,k._renderer.scale.y),C.lineWidth=A/k._renderer.scale.x),C.stroke(),y&&C.restore()),C.restore()},getBoundingClientRect:function(t,e,n){var i,r,s=1/0,a=-1/0,o=1/0,h=-1/0;t.forEach(function(t){var e,n,i,r,l,u,c=t.x,f=t.y,d=t.controls;o=Math.min(f,o),s=Math.min(c,s),a=Math.max(c,a),h=Math.max(f,h),t.controls&&(u=d.right,(l=d.left)&&u&&(n=t._relative?l.y+f:l.y,i=t._relative?u.x+c:u.x,r=t._relative?u.y+f:u.y,(e=t._relative?l.x+c:l.x)&&n&&i&&r&&(o=Math.min(n,r,o),s=Math.min(e,i,s),a=Math.max(e,i,a),h=Math.max(n,r,h))))}),l.isNumber(e)&&(o-=e,s-=e,a+=e,h+=e),i=a-s,r=h-o,n.top=o,n.left=s,n.right=a,n.bottom=h,n.width=i,n.height=r,n.centroid||(n.centroid={}),n.centroid.x=-s,n.centroid.y=-o},render:function(e,i,r){if(!this._visible||!this._opacity)return this;this._update();var a=this.parent,o=this._flagVertices||this._flagFill||this._fill instanceof t.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof t.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof t.Texture&&(this._fill._flagLoaded&&this._fill.loaded||this._fill._flagOffset||this._fill._flagScale)||this._stroke instanceof t.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof t.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._stroke instanceof t.Texture&&(this._stroke._flagLoaded&&this._stroke.loaded||this._stroke._flagOffset||this._fill._flagScale)||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagCap||this._flagJoin||this._flagMiter||this._flagScale||!this._renderer.texture;return(a._matrix.manual||a._flagMatrix||this._matrix.manual||this._flagMatrix)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,s),n(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*a._renderer.scale),o&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new t.Array(12)),this._renderer.opacity=this._opacity*a._renderer.opacity,h.path.getBoundingClientRect(this._vertices,this._linewidth,this._renderer.rect),h.getTriangles(this._renderer.rect,this._renderer.triangles),h.updateBuffer.call(h,e,this,i),h.updateTexture.call(h,e,this)),!this._clip||r?(e.bindBuffer(e.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),e.vertexAttribPointer(i.textureCoords,2,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(i.matrix,!1,this._renderer.matrix),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.buffer),e.vertexAttribPointer(i.position,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),this.flagReset()):void 0}},text:{updateCanvas:function(t){var e=this.canvas,n=this.ctx,i=t._renderer.scale,r=t._stroke,s=t._linewidth*i,a=t._fill,u=t._renderer.opacity||t._opacity;e.width=Math.max(Math.ceil(t._renderer.rect.width*i),1),e.height=Math.max(Math.ceil(t._renderer.rect.height*i),1);var c,f,d,g,p,_=t._renderer.rect.centroid,v=_.x,m=_.y,y=a._renderer&&a._renderer.offset&&r._renderer&&r._renderer.offset;n.clearRect(0,0,e.width,e.height),y||(n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" ")),n.textAlign="center",n.textBaseline="middle",a&&(l.isString(a)?n.fillStyle=a:(h[a._renderer.type].render.call(a,n,t),n.fillStyle=a._renderer.effect)),r&&(l.isString(r)?n.strokeStyle=r:(h[r._renderer.type].render.call(r,n,t),n.strokeStyle=r._renderer.effect)),s&&(n.lineWidth=s),l.isNumber(u)&&(n.globalAlpha=u),n.save(),n.scale(i,i),n.translate(v,m),h.isHidden.test(a)||(a._renderer&&a._renderer.offset?(g=o(a._renderer.scale.x),p=o(a._renderer.scale.y),n.save(),n.translate(-o(a._renderer.offset.x),-o(a._renderer.offset.y)),n.scale(g,p),c=t._leading/a._renderer.scale.y,n.font=[t._style,t._weight,o(t._size/a._renderer.scale.y)+"px/",o(c)+"px",t._family].join(" "),d=a._renderer.offset.y/a._renderer.scale.y,n.fillText(t.value,o(f=a._renderer.offset.x/a._renderer.scale.x),o(d)),n.restore()):n.fillText(t.value,0,0)),h.isHidden.test(r)||(r._renderer&&r._renderer.offset?(g=o(r._renderer.scale.x),p=o(r._renderer.scale.y),n.save(),n.translate(-o(r._renderer.offset.x),-o(r._renderer.offset.y)),n.scale(g,p),c=t._leading/r._renderer.scale.y,n.font=[t._style,t._weight,o(t._size/r._renderer.scale.y)+"px/",o(c)+"px",t._family].join(" "),f=r._renderer.offset.x/r._renderer.scale.x,d=r._renderer.offset.y/r._renderer.scale.y,n.lineWidth=o(s/r._renderer.scale.x),n.strokeText(t.value,o(f),o(d)),n.restore()):n.strokeText(t.value,0,0)),n.restore()},getBoundingClientRect:function(t,e){var n=h.ctx;n.font=[t._style,t._weight,t._size+"px/"+t._leading+"px",t._family].join(" "),n.textAlign="center",n.textBaseline=t._baseline;var i=n.measureText(t._value).width,r=Math.max(t._size||t._leading);this._linewidth&&!h.isHidden.test(this._stroke)&&(r+=this._linewidth);var s=i/2,a=r/2;switch(h.alignments[t._alignment]||t._alignment){case h.alignments.left:e.left=0,e.right=i;break;case h.alignments.right:e.left=-i,e.right=0;break;default:e.left=-s,e.right=s}switch(t._baseline){case"bottom":e.top=-r,e.bottom=0;break;case"top":e.top=0,e.bottom=r;break;default:e.top=-a,e.bottom=a}e.width=i,e.height=r,e.centroid||(e.centroid={}),e.centroid.x=s,e.centroid.y=a},render:function(e,i,r){if(!this._visible||!this._opacity)return this;this._update();var a=this.parent,o=this._flagVertices||this._flagFill||this._fill instanceof t.LinearGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagEndPoints)||this._fill instanceof t.RadialGradient&&(this._fill._flagSpread||this._fill._flagStops||this._fill._flagRadius||this._fill._flagCenter||this._fill._flagFocal)||this._fill instanceof t.Texture&&this._fill._flagLoaded&&this._fill.loaded||this._stroke instanceof t.LinearGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagEndPoints)||this._stroke instanceof t.RadialGradient&&(this._stroke._flagSpread||this._stroke._flagStops||this._stroke._flagRadius||this._stroke._flagCenter||this._stroke._flagFocal)||this._texture instanceof t.Texture&&this._texture._flagLoaded&&this._texture.loaded||this._flagStroke||this._flagLinewidth||this._flagOpacity||a._flagOpacity||this._flagVisible||this._flagScale||this._flagValue||this._flagFamily||this._flagSize||this._flagLeading||this._flagAlignment||this._flagBaseline||this._flagStyle||this._flagWeight||this._flagDecoration||!this._renderer.texture;return(a._matrix.manual||a._flagMatrix||this._matrix.manual||this._flagMatrix)&&(this._renderer.matrix||(this._renderer.matrix=new t.Array(9)),this._matrix.toArray(!0,s),n(s,a._renderer.matrix,this._renderer.matrix),this._renderer.scale=this._scale*a._renderer.scale),o&&(this._renderer.rect||(this._renderer.rect={}),this._renderer.triangles||(this._renderer.triangles=new t.Array(12)),this._renderer.opacity=this._opacity*a._renderer.opacity,h.text.getBoundingClientRect(this,this._renderer.rect),h.getTriangles(this._renderer.rect,this._renderer.triangles),h.updateBuffer.call(h,e,this,i),h.updateTexture.call(h,e,this)),!this._clip||r?(e.bindBuffer(e.ARRAY_BUFFER,this._renderer.textureCoordsBuffer),e.vertexAttribPointer(i.textureCoords,2,e.FLOAT,!1,0,0),e.bindTexture(e.TEXTURE_2D,this._renderer.texture),e.uniformMatrix3fv(i.matrix,!1,this._renderer.matrix),e.bindBuffer(e.ARRAY_BUFFER,this._renderer.buffer),e.vertexAttribPointer(i.position,2,e.FLOAT,!1,0,0),e.drawArrays(e.TRIANGLES,0,6),this.flagReset()):void 0}},"linear-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagEndPoints||this._flagStops){this._renderer.effect=t.createLinearGradient(this.left._x,this.left._y,this.right._x,this.right._y);for(var n=0;n<this.stops.length;n++){var i=this.stops[n];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}}},"radial-gradient":{render:function(t,e){if(t.canvas.getContext("2d")){if(this._update(),!this._renderer.effect||this._flagCenter||this._flagFocal||this._flagRadius||this._flagStops){this._renderer.effect=t.createRadialGradient(this.center._x,this.center._y,0,this.focal._x,this.focal._y,this._radius);for(var n=0;n<this.stops.length;n++){var i=this.stops[n];this._renderer.effect.addColorStop(i._offset,i._color)}}return this.flagReset()}}},texture:{render:function(e,n){if(e.canvas.getContext("2d")){this._update();var i=this.image;return(!this._renderer.effect||(this._flagLoaded||this._flagRepeat)&&this.loaded)&&(this._renderer.effect=e.createPattern(i,this._repeat)),(this._flagOffset||this._flagLoaded||this._flagScale)&&(this._renderer.offset instanceof t.Vector||(this._renderer.offset=new t.Vector),this._renderer.offset.x=this._offset.x,this._renderer.offset.y=this._offset.y,i&&(this._renderer.offset.x-=i.width/2,this._renderer.offset.y+=i.height/2,this._scale instanceof t.Vector?(this._renderer.offset.x*=this._scale.x,this._renderer.offset.y*=this._scale.y):(this._renderer.offset.x*=this._scale,this._renderer.offset.y*=this._scale))),(this._flagScale||this._flagLoaded)&&(this._renderer.scale instanceof t.Vector||(this._renderer.scale=new t.Vector),this._scale instanceof t.Vector?this._renderer.scale.copy(this._scale):this._renderer.scale.set(this._scale,this._scale)),this.flagReset()}}},getTriangles:function(t,e){var n=t.top,i=t.left,r=t.right,s=t.bottom;e[0]=i,e[1]=n,e[2]=r,e[3]=n,e[4]=i,e[5]=s,e[6]=i,e[7]=s,e[8]=r,e[9]=n,e[10]=r,e[11]=s},updateTexture:function(t,e){this[e._renderer.type].updateCanvas.call(h,e),e._renderer.texture&&t.deleteTexture(e._renderer.texture),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),e._renderer.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e._renderer.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.canvas.width<=0||this.canvas.height<=0||t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.canvas)},updateBuffer:function(t,e,n){l.isObject(e._renderer.buffer)&&t.deleteBuffer(e._renderer.buffer),e._renderer.buffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.buffer),t.enableVertexAttribArray(n.position),t.bufferData(t.ARRAY_BUFFER,e._renderer.triangles,t.STATIC_DRAW),l.isObject(e._renderer.textureCoordsBuffer)&&t.deleteBuffer(e._renderer.textureCoordsBuffer),e._renderer.textureCoordsBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,e._renderer.textureCoordsBuffer),t.enableVertexAttribArray(n.textureCoords),t.bufferData(t.ARRAY_BUFFER,this.uv,t.STATIC_DRAW)},program:{create:function(e,n){var i,r;if(i=e.createProgram(),l.each(n,function(t){e.attachShader(i,t)}),e.linkProgram(i),!e.getProgramParameter(i,e.LINK_STATUS))throw r=e.getProgramInfoLog(i),e.deleteProgram(i),new t.Utils.Error("unable to link program: "+r);return i}},shaders:{create:function(e,n,i){var r,s;if(r=e.createShader(e[i]),e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))throw s=e.getShaderInfoLog(r),e.deleteShader(r),new t.Utils.Error("unable to compile shader "+r+": "+s);return r},types:{vertex:"VERTEX_SHADER",fragment:"FRAGMENT_SHADER"},vertex:["attribute vec2 a_position;","attribute vec2 a_textureCoords;","","uniform mat3 u_matrix;","uniform vec2 u_resolution;","","varying vec2 v_textureCoords;","","void main() {","   vec2 projected = (u_matrix * vec3(a_position, 1.0)).xy;","   vec2 normal = projected / u_resolution;","   vec2 clipspace = (normal * 2.0) - 1.0;","","   gl_Position = vec4(clipspace * vec2(1.0, -1.0), 0.0, 1.0);","   v_textureCoords = a_textureCoords;","}"].join("\n"),fragment:["precision mediump float;","","uniform sampler2D u_image;","varying vec2 v_textureCoords;","","void main() {","  gl_FragColor = texture2D(u_image, v_textureCoords);","}"].join("\n")},TextureRegistry:new t.Registry};h.ctx=h.canvas.getContext("2d");var u=t[t.Types.webgl]=function(e){var n,i,s,a;if(this.domElement=e.domElement||document.createElement("canvas"),this.scene=new t.Group,this.scene.parent=this,this._renderer={matrix:new t.Array(r),scale:1,opacity:1},this._flagMatrix=!0,n=l.defaults(e||{},{antialias:!1,alpha:!0,premultipliedAlpha:!0,stencil:!0,preserveDrawingBuffer:!0,overdraw:!1}),this.overdraw=n.overdraw,i=this.ctx=this.domElement.getContext("webgl",n)||this.domElement.getContext("experimental-webgl",n),!this.ctx)throw new t.Utils.Error("unable to create a webgl context. Try using another renderer.");s=h.shaders.create(i,h.shaders.vertex,h.shaders.types.vertex),a=h.shaders.create(i,h.shaders.fragment,h.shaders.types.fragment),this.program=h.program.create(i,[s,a]),i.useProgram(this.program),this.program.position=i.getAttribLocation(this.program,"a_position"),this.program.matrix=i.getUniformLocation(this.program,"u_matrix"),this.program.textureCoords=i.getAttribLocation(this.program,"a_textureCoords"),i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD),i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA)};l.extend(u,{Utils:h}),l.extend(u.prototype,t.Utils.Events,{setSize:function(t,e,n){this.width=t,this.height=e,this.ratio=l.isUndefined(n)?a(this.ctx):n,this.domElement.width=t*this.ratio,this.domElement.height=e*this.ratio,l.extend(this.domElement.style,{width:t+"px",height:e+"px"}),t*=this.ratio,e*=this.ratio,this._renderer.matrix[0]=this._renderer.matrix[4]=this._renderer.scale=this.ratio,this._flagMatrix=!0,this.ctx.viewport(0,0,t,e);var i=this.ctx.getUniformLocation(this.program,"u_resolution");return this.ctx.uniform2f(i,t,e),this},render:function(){var t=this.ctx;return this.overdraw||t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),h.group.render.call(this.scene,t,this.program),this._flagMatrix=!1,this}})}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.Shape=function(){this._renderer={},this._renderer.flagMatrix=e.bind(n.FlagMatrix,this),this.isShape=!0,this.id=t.Identifier+t.uniqueId(),this.classList=[],this._matrix=new t.Matrix,this.translation=new t.Vector,this.rotation=0,this.scale=1};e.extend(n,{FlagMatrix:function(){this._flagMatrix=!0},MakeObservable:function(e){Object.defineProperty(e,"translation",{enumerable:!0,get:function(){return this._translation},set:function(e){this._translation&&this._translation.unbind(t.Events.change,this._renderer.flagMatrix),this._translation=e,this._translation.bind(t.Events.change,this._renderer.flagMatrix),n.FlagMatrix.call(this)}}),Object.defineProperty(e,"rotation",{enumerable:!0,get:function(){return this._rotation},set:function(t){this._rotation=t,this._flagMatrix=!0}}),Object.defineProperty(e,"scale",{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof t.Vector&&this._scale.unbind(t.Events.change,this._renderer.flagMatrix),this._scale=e,this._scale instanceof t.Vector&&this._scale.bind(t.Events.change,this._renderer.flagMatrix),this._flagMatrix=!0,this._flagScale=!0}})}}),e.extend(n.prototype,t.Utils.Events,{_flagMatrix:!0,_flagScale:!1,_rotation:0,_scale:1,_translation:null,addTo:function(t){return t.add(this),this},clone:function(){var t=new n;return t.translation.copy(this.translation),t.rotation=this.rotation,t.scale=this.scale,e.each(n.Properties,function(e){t[e]=this[e]},this),t._update()},_update:function(e){return!this._matrix.manual&&this._flagMatrix&&(this._matrix.identity().translate(this.translation.x,this.translation.y),this._scale instanceof t.Vector?this._matrix.scale(this._scale.x,this._scale.y):this._matrix.scale(this._scale),this._matrix.rotate(this.rotation)),e&&this.parent&&this.parent._update&&this.parent._update(),this},flagReset:function(){return this._flagMatrix=this._flagScale=!1,this}}),n.MakeObservable(n.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=Math.min,n=Math.max,i=Math.round,r=t.Utils.getComputedMatrix,s={},a=t.Utils;a.each(t.Commands,function(t,e){s[e]=new RegExp(t)});var o=t.Path=function(e,n,i,r){t.Shape.call(this),this._renderer.type="path",this._renderer.flagVertices=a.bind(o.FlagVertices,this),this._renderer.bindVertices=a.bind(o.BindVertices,this),this._renderer.unbindVertices=a.bind(o.UnbindVertices,this),this._renderer.flagFill=a.bind(o.FlagFill,this),this._renderer.flagStroke=a.bind(o.FlagStroke,this),this._closed=!!n,this._curved=!!i,this.beginning=0,this.ending=1,this.fill="#fff",this.stroke="#000",this.linewidth=1,this.opacity=1,this.visible=!0,this.cap="butt",this.join="miter",this.miter=4,this._vertices=[],this.vertices=e,this.automatic=!r};function l(e,n,i){var r,s,a,o,l=n.controls&&n.controls.right,h=e.controls&&e.controls.left;return r=(l||n).x,a=(l||n).y,s=(h||e).x,o=(h||e).y,l&&n._relative&&(r+=n.x,a+=n.y),h&&e._relative&&(s+=e.x,o+=e.y),t.Utils.getCurveLength(n.x,n.y,r,a,s,o,e.x,e.y,i)}function h(e,n,i){var r,s,a,o,l=n.controls&&n.controls.right,h=e.controls&&e.controls.left;return r=(l||n).x,a=(l||n).y,s=(h||e).x,o=(h||e).y,l&&n._relative&&(r+=n.x,a+=n.y),h&&e._relative&&(s+=e.x,o+=e.y),t.Utils.subdivide(n.x,n.y,r,a,s,o,e.x,e.y,i)}a.extend(o,{Properties:["fill","stroke","linewidth","opacity","visible","cap","join","miter","closed","curved","automatic","beginning","ending"],FlagVertices:function(){this._flagVertices=!0,this._flagLength=!0},BindVertices:function(e){for(var n=e.length;n--;)e[n].bind(t.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},UnbindVertices:function(e){for(var n=e.length;n--;)e[n].unbind(t.Events.change,this._renderer.flagVertices);this._renderer.flagVertices()},FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(e){t.Shape.MakeObservable(e),a.each(o.Properties.slice(2,8),t.Utils.defineProperty,e),Object.defineProperty(e,"fill",{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.unbind(t.Events.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.bind(t.Events.change,this._renderer.flagFill)}}),Object.defineProperty(e,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.unbind(t.Events.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.bind(t.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(e,"length",{get:function(){return this._flagLength&&this._updateLength(),this._length}}),Object.defineProperty(e,"closed",{enumerable:!0,get:function(){return this._closed},set:function(t){this._closed=!!t,this._flagVertices=!0}}),Object.defineProperty(e,"curved",{enumerable:!0,get:function(){return this._curved},set:function(t){this._curved=!!t,this._flagVertices=!0}}),Object.defineProperty(e,"automatic",{enumerable:!0,get:function(){return this._automatic},set:function(t){if(t!==this._automatic){this._automatic=!!t;var e=this._automatic?"ignore":"listen";a.each(this.vertices,function(t){t[e]()})}}}),Object.defineProperty(e,"beginning",{enumerable:!0,get:function(){return this._beginning},set:function(t){this._beginning=t,this._flagVertices=!0}}),Object.defineProperty(e,"ending",{enumerable:!0,get:function(){return this._ending},set:function(t){this._ending=t,this._flagVertices=!0}}),Object.defineProperty(e,"vertices",{enumerable:!0,get:function(){return this._collection},set:function(e){var n=this._renderer.bindVertices,i=this._renderer.unbindVertices;this._collection&&this._collection.unbind(t.Events.insert,n).unbind(t.Events.remove,i),this._collection=new t.Utils.Collection((e||[]).slice(0)),this._collection.bind(t.Events.insert,n).bind(t.Events.remove,i),n(this._collection)}}),Object.defineProperty(e,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),a.extend(o.prototype,t.Shape.prototype,{_flagVertices:!0,_flagLength:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagCap:!0,_flagJoin:!0,_flagMiter:!0,_flagClip:!1,_length:0,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_clip:!1,clone:function(e){e=e||this.parent;var n=a.map(this.vertices,function(t){return t.clone()}),i=new o(n,this.closed,this.curved,!this.automatic);return a.each(t.Path.Properties,function(t){i[t]=this[t]},this),i.translation.copy(this.translation),i.rotation=this.rotation,i.scale=this.scale,e&&e.add(i),i},toObject:function(){var e={vertices:a.map(this.vertices,function(t){return t.toObject()})};return a.each(t.Shape.Properties,function(t){e[t]=this[t]},this),e.translation=this.translation.toObject,e.rotation=this.rotation,e.scale=this.scale,e},noFill:function(){return this.fill="transparent",this},noStroke:function(){return this.stroke="transparent",this},corner:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},a.each(this.vertices,function(e){e.addSelf(t.centroid)}),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},a.each(this.vertices,function(e){e.subSelf(t.centroid)}),this},remove:function(){return this.parent?(this.parent.remove(this),this):this},getBoundingClientRect:function(t){var i,s,a,o,l,h=1/0,u=-1/0,c=1/0,f=-1/0;if(this._update(!0),i=t?this._matrix:r(this),s=this.linewidth/2,(a=this._vertices.length)<=0)return{top:(l=i.multiply(0,0,1)).y,left:l.x,right:l.x,bottom:l.y,width:0,height:0};for(o=0;o<a;o++)l=i.multiply((l=this._vertices[o]).x,l.y,1),c=e(l.y-s,c),h=e(l.x-s,h),u=n(l.x+s,u),f=n(l.y+s,f);return{top:c,left:h,right:u,bottom:f,width:u-h,height:f-c}},getPointAt:function(e,n){for(var i,r,s,o,l,h,u,c,f,d,g,p,_=this.length*Math.min(Math.max(e,0),1),v=this.vertices.length,m=v-1,y=null,x=null,b=0,w=this._lengths.length,C=0;b<w;b++){if(C+this._lengths[b]>=_){this._closed?(i=t.Utils.mod(b,v),r=t.Utils.mod(b-1,v),0===b&&(i=r,r=b)):(i=b,r=Math.min(Math.max(b-1,0),m)),y=this.vertices[i],x=this.vertices[r],_-=C,0!==this._lengths[b]&&(e=_/this._lengths[b]);break}C+=this._lengths[b]}return a.isNull(y)||a.isNull(x)?null:(u=x.y,o=((p=x.controls&&x.controls.right)||x).x,c=(p||x).y,l=((g=y.controls&&y.controls.left)||y).x,f=(g||y).y,d=y.y,p&&x._relative&&(o+=x.x,c+=x.y),g&&y._relative&&(l+=y.x,f+=y.y),s=t.Utils.getPointOnCubicBezier(e,x.x,o,l,y.x),h=t.Utils.getPointOnCubicBezier(e,u,c,f,d),a.isObject(n)?(n.x=s,n.y=h,n):new t.Vector(s,h))},plot:function(){if(this.curved)return t.Utils.getCurveFromPoints(this._vertices,this.closed),this;for(var e=0;e<this._vertices.length;e++)this._vertices[e]._command=0===e?t.Commands.move:t.Commands.line;return this},subdivide:function(e){this._update();var n=this.vertices.length-1,i=this.vertices[n],r=this._closed||this.vertices[n]._command===t.Commands.close,s=[];return a.each(this.vertices,function(o,l){if(l<=0&&!r)i=o;else{if(o.command===t.Commands.move)return s.push(new t.Anchor(i.x,i.y)),l>0&&(s[s.length-1].command=t.Commands.line),void(i=o);var u=h(o,i,e);s=s.concat(u),a.each(u,function(e,n){e.command=n<=0&&i.command===t.Commands.move?t.Commands.move:t.Commands.line}),l>=n&&(this._closed&&this._automatic?(u=h(o,i=o,e),s=s.concat(u),a.each(u,function(e,n){e.command=n<=0&&i.command===t.Commands.move?t.Commands.move:t.Commands.line})):r&&s.push(new t.Anchor(o.x,o.y)),s[s.length-1].command=r?t.Commands.close:t.Commands.line),i=o}},this),this._automatic=!1,this._curved=!1,this.vertices=s,this},_updateLength:function(e){this._update();var n=this.vertices.length,i=n-1,r=this.vertices[i],s=this._closed||this.vertices[i]._command===t.Commands.close,o=0;return a.isUndefined(this._lengths)&&(this._lengths=[]),a.each(this.vertices,function(a,h){if(h<=0&&!s||a.command===t.Commands.move)return r=a,void(this._lengths[h]=0);this._lengths[h]=l(a,r,e),o+=this._lengths[h],h>=i&&s&&(this._lengths[h+1]=l(a,r=this.vertices[(h+1)%n],e),o+=this._lengths[h+1]),r=a},this),this._length=o,this},_update:function(){if(this._flagVertices){var e=this.vertices.length-1,n=i(this._beginning*e),r=i(this._ending*e);this._vertices.length=0;for(var s=n;s<r+1;s++)this._vertices.push(this.vertices[s]);this._automatic&&this.plot()}return t.Shape.prototype._update.apply(this,arguments),this},flagReset:function(){return this._flagVertices=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpacity=this._flagVisible=this._flagCap=this._flagJoin=this._flagMiter=this._flagClip=!1,t.Shape.prototype.flagReset.call(this),this}}),o.MakeObservable(o.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=t.Utils,i=t.Line=function(n,i,r,s){var a=(r-n)/2,o=(s-i)/2;e.call(this,[new t.Anchor(-a,-o),new t.Anchor(a,o)]),this.translation.set(n+a,i+o)};n.extend(i.prototype,e.prototype),e.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=t.Utils,i=t.Rectangle=function(n,i,r,s){e.call(this,[new t.Anchor,new t.Anchor,new t.Anchor,new t.Anchor],!0),this.width=r,this.height=s,this._update(),this.translation.set(n,i)};n.extend(i,{Properties:["width","height"],MakeObservable:function(r){e.MakeObservable(r),n.each(i.Properties,t.Utils.defineProperty,r)}}),n.extend(i.prototype,e.prototype,{_width:0,_height:0,_flagWidth:0,_flagHeight:0,_update:function(){if(this._flagWidth||this._flagHeight){var t=this._width/2,n=this._height/2;this.vertices[0].set(-t,-n),this.vertices[1].set(t,-n),this.vertices[2].set(t,n),this.vertices[3].set(-t,n)}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,e.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=2*Math.PI,i=Math.cos,r=Math.sin,s=t.Utils,a=t.Ellipse=function(n,i,r,a){s.isNumber(a)||(a=r);var o=s.map(s.range(t.Resolution),function(e){return new t.Anchor},this);e.call(this,o,!0,!0),this.width=2*r,this.height=2*a,this._update(),this.translation.set(n,i)};s.extend(a,{Properties:["width","height"],MakeObservable:function(n){e.MakeObservable(n),s.each(a.Properties,t.Utils.defineProperty,n)}}),s.extend(a.prototype,e.prototype,{_width:0,_height:0,_flagWidth:!1,_flagHeight:!1,_update:function(){if(this._flagWidth||this._flagHeight)for(var t=0,s=this.vertices.length;t<s;t++){var a=t/s*n,o=this._width*i(a)/2,l=this._height*r(a)/2;this.vertices[t].set(o,l)}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=2*Math.PI,i=Math.cos,r=Math.sin,s=t.Utils,a=t.Circle=function(n,i,r){var a=s.map(s.range(t.Resolution),function(e){return new t.Anchor},this);e.call(this,a,!0,!0),this.radius=r,this._update(),this.translation.set(n,i)};s.extend(a,{Properties:["radius"],MakeObservable:function(n){e.MakeObservable(n),s.each(a.Properties,t.Utils.defineProperty,n)}}),s.extend(a.prototype,e.prototype,{_radius:0,_flagRadius:!1,_update:function(){if(this._flagRadius)for(var t=0,s=this.vertices.length;t<s;t++){var a=t/s*n,o=this._radius*i(a),l=this._radius*r(a);this.vertices[t].set(o,l)}return e.prototype._update.call(this),this},flagReset:function(){return this._flagRadius=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=2*Math.PI,i=Math.cos,r=Math.sin,s=t.Utils,a=t.Polygon=function(n,i,r,a){a=Math.max(a||0,3);var o=s.map(s.range(a),function(e){return new t.Anchor});e.call(this,o,!0),this.width=2*r,this.height=2*r,this.sides=a,this._update(),this.translation.set(n,i)};s.extend(a,{Properties:["width","height","sides"],MakeObservable:function(n){e.MakeObservable(n),s.each(a.Properties,t.Utils.defineProperty,n)}}),s.extend(a.prototype,e.prototype,{_width:0,_height:0,_sides:0,_flagWidth:!1,_flagHeight:!1,_flagSides:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagSides){var s=this._sides,a=this.vertices.length;a>s&&this.vertices.splice(s-1,a-s);for(var o=0;o<s;o++){var l=n*((o+.5)/s)+Math.PI/2,h=this._width*i(l),u=this._height*r(l);o>=a?this.vertices.push(new t.Anchor(h,u)):this.vertices[o].set(h,u)}}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagSides=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=(Math,2*Math.PI),i=Math.PI/2,r=(Math,Math,Math,t.Utils),s=t.ArcSegment=function(n,i,s,a,o,l,h){var u=r.map(r.range(h||3*t.Resolution),function(){return new t.Anchor});e.call(this,u,!1,!1,!0),this.innerRadius=s,this.outerRadius=a,this.startAngle=o,this.endAngle=l,this._update(),this.translation.set(n,i)};function a(t,e){for(;t<0;)t+=e;return t%e}r.extend(s,{Properties:["startAngle","endAngle","innerRadius","outerRadius"],MakeObservable:function(n){e.MakeObservable(n),r.each(s.Properties,t.Utils.defineProperty,n)}}),r.extend(s.prototype,e.prototype,{_flagStartAngle:!1,_flagEndAngle:!1,_flagInnerRadius:!1,_flagOuterRadius:!1,_startAngle:0,_endAngle:n,_innerRadius:0,_outerRadius:0,_update:function(){if(this._flagStartAngle||this._flagEndAngle||this._flagInnerRadius||this._flagOuterRadius){var r,s=this._startAngle,o=this._endAngle,l=this._innerRadius,h=this._outerRadius,u=a(s,n)===a(o,n),c=l>0,f=this.vertices,d=c?f.length/2:f.length,g=0;u?d--:c||(d-=2);for(var p=0,_=d-1;p<d;p++){var v=p/_,m=f[g],y=v*(o-s)+s,x=(o-s)/d,b=h*Math.cos(y),w=h*Math.sin(y);switch(p){case 0:r=t.Commands.move;break;default:r=t.Commands.curve}if(m.command=r,m.x=b,m.y=w,m.controls.left.clear(),m.controls.right.clear(),m.command===t.Commands.curve){var C=h*x/Math.PI;m.controls.left.x=C*Math.cos(y-i),m.controls.left.y=C*Math.sin(y-i),m.controls.right.x=C*Math.cos(y+i),m.controls.right.y=C*Math.sin(y+i),1===p&&m.controls.left.multiplyScalar(2),p===_&&m.controls.right.multiplyScalar(2)}g++}if(c)for(u?(f[g].command=t.Commands.close,g++):_=--d-1,p=0;p<d;p++)m=f[g],y=(1-(v=p/_))*(o-s)+s,x=(o-s)/d,b=l*Math.cos(y),w=l*Math.sin(y),r=t.Commands.curve,p<=0&&(r=u?t.Commands.move:t.Commands.line),m.command=r,m.x=b,m.y=w,m.controls.left.clear(),m.controls.right.clear(),m.command===t.Commands.curve&&(C=l*x/Math.PI,m.controls.left.x=C*Math.cos(y+i),m.controls.left.y=C*Math.sin(y+i),m.controls.right.x=C*Math.cos(y-i),m.controls.right.y=C*Math.sin(y-i),1===p&&m.controls.left.multiplyScalar(2),p===_&&m.controls.right.multiplyScalar(2)),g++;else u||(f[g].command=t.Commands.line,f[g].x=0,f[g].y=0,g++);f[g].command=t.Commands.close}return e.prototype._update.call(this),this},flagReset:function(){return e.prototype.flagReset.call(this),this._flagStartAngle=this._flagEndAngle=this._flagInnerRadius=this._flagOuterRadius=!1,this}}),s.MakeObservable(s.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=2*Math.PI,i=Math.cos,r=Math.sin,s=t.Utils,a=t.Star=function(n,i,r,a,o){s.isNumber(a)||(a=r/2),(!s.isNumber(o)||o<=0)&&(o=5);var l=s.map(s.range(2*o),function(e){return new t.Anchor});e.call(this,l,!0),this.innerRadius=a,this.outerRadius=r,this.sides=o,this._update(),this.translation.set(n,i)};s.extend(a,{Properties:["innerRadius","outerRadius","sides"],MakeObservable:function(n){e.MakeObservable(n),s.each(a.Properties,t.Utils.defineProperty,n)}}),s.extend(a.prototype,e.prototype,{_innerRadius:0,_outerRadius:0,_sides:0,_flagInnerRadius:!1,_flagOuterRadius:!1,_flagSides:!1,_update:function(){if(this._flagInnerRadius||this._flagOuterRadius||this._flagSides){var s=2*this._sides,a=this.vertices.length;a>s&&this.vertices.splice(s-1,a-s);for(var o=0;o<s;o++){var l=n*((o+.5)/s),h=o%2?this._innerRadius:this._outerRadius,u=h*i(l),c=h*r(l);o>=a?this.vertices.push(new t.Anchor(u,c)):this.vertices[o].set(u,c)}}return e.prototype._update.call(this),this},flagReset:function(){return this._flagInnerRadius=this._flagOuterRadius=this._flagSides=!1,e.prototype.flagReset.call(this),this}}),a.MakeObservable(a.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Path,n=t.Utils,i=t.RoundedRectangle=function(i,r,s,a,o){n.isNumber(o)||(o=Math.floor(Math.min(s,a)/12));var l=n.map(n.range(10),function(e){return new t.Anchor(0,0,0,0,0,0,0===e?t.Commands.move:t.Commands.curve)});l[l.length-1].command=t.Commands.close,e.call(this,l,!1,!1,!0),this.width=s,this.height=a,this.radius=o,this._update(),this.translation.set(i,r)};n.extend(i,{Properties:["width","height","radius"],MakeObservable:function(r){e.MakeObservable(r),n.each(i.Properties,t.Utils.defineProperty,r)}}),n.extend(i.prototype,e.prototype,{_width:0,_height:0,_radius:0,_flagWidth:!1,_flagHeight:!1,_flagRadius:!1,_update:function(){if(this._flagWidth||this._flagHeight||this._flagRadius){var t,n=this._width,i=this._height,r=Math.min(Math.max(this._radius,0),Math.min(n,i)),s=n/2,a=i/2;(t=this.vertices[0]).x=-(s-r),t.y=-a,(t=this.vertices[1]).x=s-r,t.y=-a,t.controls.left.clear(),t.controls.right.x=r,t.controls.right.y=0,(t=this.vertices[2]).x=s,t.y=-(a-r),t.controls.right.clear(),t.controls.left.clear(),(t=this.vertices[3]).x=s,t.y=a-r,t.controls.left.clear(),t.controls.right.x=0,t.controls.right.y=r,(t=this.vertices[4]).x=s-r,t.y=a,t.controls.right.clear(),t.controls.left.clear(),(t=this.vertices[5]).x=-(s-r),t.y=a,t.controls.left.clear(),t.controls.right.x=-r,t.controls.right.y=0,(t=this.vertices[6]).x=-s,t.y=a-r,t.controls.left.clear(),t.controls.right.clear(),(t=this.vertices[7]).x=-s,t.y=-(a-r),t.controls.left.clear(),t.controls.right.x=0,t.controls.right.y=-r,(t=this.vertices[8]).x=-(s-r),t.y=-a,t.controls.left.clear(),t.controls.right.clear(),(t=this.vertices[9]).copy(this.vertices[8])}return e.prototype._update.call(this),this},flagReset:function(){return this._flagWidth=this._flagHeight=this._flagRadius=!1,e.prototype.flagReset.call(this),this}}),i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.root,n=t.Utils.getComputedMatrix,i=t.Utils,r=((e.document?e.document.createElement("canvas"):{getContext:i.identity}).getContext("2d"),t.Text=function(e,n,s,a){if(t.Shape.call(this),this._renderer.type="text",this._renderer.flagFill=i.bind(r.FlagFill,this),this._renderer.flagStroke=i.bind(r.FlagStroke,this),this.value=e,i.isNumber(n)&&(this.translation.x=n),i.isNumber(s)&&(this.translation.y=s),!i.isObject(a))return this;i.each(t.Text.Properties,function(t){t in a&&(this[t]=a[t])},this)});i.extend(t.Text,{Properties:["value","family","size","leading","alignment","linewidth","style","weight","decoration","baseline","opacity","visible","fill","stroke"],FlagFill:function(){this._flagFill=!0},FlagStroke:function(){this._flagStroke=!0},MakeObservable:function(e){t.Shape.MakeObservable(e),i.each(t.Text.Properties.slice(0,12),t.Utils.defineProperty,e),Object.defineProperty(e,"fill",{enumerable:!0,get:function(){return this._fill},set:function(e){(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.unbind(t.Events.change,this._renderer.flagFill),this._fill=e,this._flagFill=!0,(this._fill instanceof t.Gradient||this._fill instanceof t.LinearGradient||this._fill instanceof t.RadialGradient||this._fill instanceof t.Texture)&&this._fill.bind(t.Events.change,this._renderer.flagFill)}}),Object.defineProperty(e,"stroke",{enumerable:!0,get:function(){return this._stroke},set:function(e){(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.unbind(t.Events.change,this._renderer.flagStroke),this._stroke=e,this._flagStroke=!0,(this._stroke instanceof t.Gradient||this._stroke instanceof t.LinearGradient||this._stroke instanceof t.RadialGradient||this._stroke instanceof t.Texture)&&this._stroke.bind(t.Events.change,this._renderer.flagStroke)}}),Object.defineProperty(e,"clip",{enumerable:!0,get:function(){return this._clip},set:function(t){this._clip=t,this._flagClip=!0}})}}),i.extend(t.Text.prototype,t.Shape.prototype,{_flagValue:!0,_flagFamily:!0,_flagSize:!0,_flagLeading:!0,_flagAlignment:!0,_flagBaseline:!0,_flagStyle:!0,_flagWeight:!0,_flagDecoration:!0,_flagFill:!0,_flagStroke:!0,_flagLinewidth:!0,_flagOpacity:!0,_flagVisible:!0,_flagClip:!1,_value:"",_family:"sans-serif",_size:13,_leading:17,_alignment:"center",_baseline:"middle",_style:"normal",_weight:500,_decoration:"none",_fill:"#000",_stroke:"transparent",_linewidth:1,_opacity:1,_visible:!0,_clip:!1,remove:function(){return this.parent?(this.parent.remove(this),this):this},clone:function(e){e=e||this.parent;var n=new t.Text(this.value);return n.translation.copy(this.translation),n.rotation=this.rotation,n.scale=this.scale,i.each(t.Text.Properties,function(t){n[t]=this[t]},this),e&&e.add(n),n},toObject:function(){var e={translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale};return i.each(t.Text.Properties,function(t){e[t]=this[t]},this),e},noStroke:function(){return this.stroke="transparent",this},noFill:function(){return this.fill="transparent",this},getBoundingClientRect:function(t){var e;return this._update(!0),{top:(e=(t?this._matrix:n(this)).multiply(0,0,1)).x,left:e.y,right:e.x,bottom:e.y,width:0,height:0}},flagReset:function(){return this._flagValue=this._flagFamily=this._flagSize=this._flagLeading=this._flagAlignment=this._flagFill=this._flagStroke=this._flagLinewidth=this._flagOpaicty=this._flagVisible=this._flagClip=this._flagDecoration=this._flagBaseline=!1,t.Shape.prototype.flagReset.call(this),this}}),t.Text.MakeObservable(t.Text.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.Stop=function(t,i,r){this._renderer={},this._renderer.type="stop",this.offset=e.isNumber(t)?t:n.Index<=0?0:1,this.opacity=e.isNumber(r)?r:1,this.color=e.isString(i)?i:n.Index<=0?"#fff":"#000",n.Index=(n.Index+1)%2};e.extend(n,{Index:0,Properties:["offset","opacity","color"],MakeObservable:function(t){e.each(n.Properties,function(t){var e="_"+t,n="_flag"+t.charAt(0).toUpperCase()+t.slice(1);Object.defineProperty(this,t,{enumerable:!0,get:function(){return this[e]},set:function(t){this[e]=t,this[n]=!0,this.parent&&(this.parent._flagStops=!0)}})},t)}}),e.extend(n.prototype,t.Utils.Events,{clone:function(){var t=new n;return e.each(n.Properties,function(e){t[e]=this[e]},this),t},toObject:function(){var t={};return e.each(n.Properties,function(e){t[e]=this[e]},this),t},flagReset:function(){return this._flagOffset=this._flagColor=this._flagOpacity=!1,this}}),n.MakeObservable(n.prototype);var i=t.Gradient=function(n){this._renderer={},this._renderer.type="gradient",this.id=t.Identifier+t.uniqueId(),this.classList=[],this._renderer.flagStops=e.bind(i.FlagStops,this),this._renderer.bindStops=e.bind(i.BindStops,this),this._renderer.unbindStops=e.bind(i.UnbindStops,this),this.spread="pad",this.stops=n};e.extend(i,{Stop:n,Properties:["spread"],MakeObservable:function(n){e.each(i.Properties,t.Utils.defineProperty,n),Object.defineProperty(n,"stops",{enumerable:!0,get:function(){return this._stops},set:function(e){var n=this._renderer.bindStops,i=this._renderer.unbindStops;this._stops&&this._stops.unbind(t.Events.insert,n).unbind(t.Events.remove,i),this._stops=new t.Utils.Collection((e||[]).slice(0)),this._stops.bind(t.Events.insert,n).bind(t.Events.remove,i),n(this._stops)}})},FlagStops:function(){this._flagStops=!0},BindStops:function(e){for(var n=e.length;n--;)e[n].bind(t.Events.change,this._renderer.flagStops),e[n].parent=this;this._renderer.flagStops()},UnbindStops:function(e){for(var n=e.length;n--;)e[n].unbind(t.Events.change,this._renderer.flagStops),delete e[n].parent;this._renderer.flagStops()}}),e.extend(i.prototype,t.Utils.Events,{_flagStops:!1,_flagSpread:!1,clone:function(n){n=n||this.parent;var r=e.map(this.stops,function(t){return t.clone()}),s=new i(r);return e.each(t.Gradient.Properties,function(t){s[t]=this[t]},this),n&&n.add(s),s},toObject:function(){var t={stops:e.map(this.stops,function(t){return t.toObject()})};return e.each(i.Properties,function(e){t[e]=this[e]},this),t},_update:function(){return(this._flagSpread||this._flagStops)&&this.trigger(t.Events.change),this},flagReset:function(){return this._flagSpread=this._flagStops=!1,this}}),i.MakeObservable(i.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.LinearGradient=function(i,r,s,a,o){t.Gradient.call(this,o),this._renderer.type="linear-gradient";var l=e.bind(n.FlagEndPoints,this);this.left=(new t.Vector).bind(t.Events.change,l),this.right=(new t.Vector).bind(t.Events.change,l),e.isNumber(i)&&(this.left.x=i),e.isNumber(r)&&(this.left.y=r),e.isNumber(s)&&(this.right.x=s),e.isNumber(a)&&(this.right.y=a)};e.extend(n,{Stop:t.Gradient.Stop,MakeObservable:function(e){t.Gradient.MakeObservable(e)},FlagEndPoints:function(){this._flagEndPoints=!0}}),e.extend(n.prototype,t.Gradient.prototype,{_flagEndPoints:!1,clone:function(i){i=i||this.parent;var r=e.map(this.stops,function(t){return t.clone()}),s=new n(this.left._x,this.left._y,this.right._x,this.right._y,r);return e.each(t.Gradient.Properties,function(t){s[t]=this[t]},this),i&&i.add(s),s},toObject:function(){var e=t.Gradient.prototype.toObject.call(this);return e.left=this.left.toObject(),e.right=this.right.toObject(),e},_update:function(){return(this._flagEndPoints||this._flagSpread||this._flagStops)&&this.trigger(t.Events.change),this},flagReset:function(){return this._flagEndPoints=!1,t.Gradient.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.RadialGradient=function(n,i,r,s,a,o){t.Gradient.call(this,s),this._renderer.type="radial-gradient",this.center=(new t.Vector).bind(t.Events.change,e.bind(function(){this._flagCenter=!0},this)),this.radius=e.isNumber(r)?r:20,this.focal=(new t.Vector).bind(t.Events.change,e.bind(function(){this._flagFocal=!0},this)),e.isNumber(n)&&(this.center.x=n),e.isNumber(i)&&(this.center.y=i),this.focal.copy(this.center),e.isNumber(a)&&(this.focal.x=a),e.isNumber(o)&&(this.focal.y=o)};e.extend(n,{Stop:t.Gradient.Stop,Properties:["radius"],MakeObservable:function(i){t.Gradient.MakeObservable(i),e.each(n.Properties,t.Utils.defineProperty,i)}}),e.extend(n.prototype,t.Gradient.prototype,{_flagRadius:!1,_flagCenter:!1,_flagFocal:!1,clone:function(i){i=i||this.parent;var r=e.map(this.stops,function(t){return t.clone()}),s=new n(this.center._x,this.center._y,this._radius,r,this.focal._x,this.focal._y);return e.each(t.Gradient.Properties.concat(n.Properties),function(t){s[t]=this[t]},this),i&&i.add(s),s},toObject:function(){var i=t.Gradient.prototype.toObject.call(this);return e.each(n.Properties,function(t){i[t]=this[t]},this),i.center=this.center.toObject(),i.focal=this.focal.toObject(),i},_update:function(){return(this._flagRadius||this._flatCenter||this._flagFocal||this._flagSpread||this._flagStops)&&this.trigger(t.Events.change),this},flagReset:function(){return this._flagRadius=this._flagCenter=this._flagFocal=!1,t.Gradient.prototype.flagReset.call(this),this}}),n.MakeObservable(n.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e,n=t.Utils,i={video:/\.(mp4|webm)$/i,image:/\.(jpe?g|png|gif|tiff)$/i};this.document&&(e=document.createElement("a"));var r=t.Texture=function(e,i){if(this._renderer={},this._renderer.type="texture",this._renderer.flagOffset=n.bind(r.FlagOffset,this),this._renderer.flagScale=n.bind(r.FlagScale,this),this.id=t.Identifier+t.uniqueId(),this.classList=[],this.offset=new t.Vector,n.isFunction(i)){var s=n.bind(function(){this.unbind(t.Events.load,s),n.isFunction(i)&&i()},this);this.bind(t.Events.load,s)}n.isString(e)?this.src=e:n.isElement(e)&&(this.image=e),this._update()};n.extend(r,{Properties:["src","loaded","repeat"],ImageRegistry:new t.Registry,getAbsoluteURL:function(t){return e?(e.href=t,e.href):t},getImage:function(t){var e,n=r.getAbsoluteURL(t);return r.ImageRegistry.contains(n)?r.ImageRegistry.get(n):((e=i.video.test(n)?document.createElement("video"):document.createElement("img")).crossOrigin="anonymous",e)},Register:{canvas:function(t,e){t._src="#"+t.id,r.ImageRegistry.add(t.src,t.image),n.isFunction(e)&&e()},img:function(e,i){var s=function(t){e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),n.isFunction(i)&&i()},a=function(n){throw e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),new t.Utils.Error("unable to load "+e.src)};n.isNumber(e.image.width)&&e.image.width>0&&n.isNumber(e.image.height)&&e.image.height>0?s():(e.image.addEventListener("load",s,!1),e.image.addEventListener("error",a,!1)),e._src=r.getAbsoluteURL(e._src),e.image&&e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),r.ImageRegistry.add(e.src,e.image),e.image.src=e.src)},video:function(e,i){var s=function(t){e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),e.image.width=e.image.videoWidth,e.image.height=e.image.videoHeight,e.image.play(),n.isFunction(i)&&i()},a=function(n){throw e.image.removeEventListener("load",s,!1),e.image.removeEventListener("error",a,!1),new t.Utils.Error("unable to load "+e.src)};e._src=r.getAbsoluteURL(e._src),e.image.addEventListener("canplaythrough",s,!1),e.image.addEventListener("error",a,!1),e.image&&e.image.getAttribute("two-src")||(e.image.setAttribute("two-src",e.src),r.ImageRegistry.add(e.src,e.image),e.image.src=e.src,e.image.loop=!0,e.image.load())}},load:function(t,e){var n=t.image,i=n&&n.nodeName.toLowerCase();t._flagImage&&(/canvas/i.test(i)?r.Register.canvas(t,e):(t._src=n.getAttribute("two-src")||n.src,r.Register[i](t,e))),t._flagSrc&&(n||(t.image=r.getImage(t.src)),i=t.image.nodeName.toLowerCase(),r.Register[i](t,e))},FlagOffset:function(){this._flagOffset=!0},FlagScale:function(){this._flagScale=!0},MakeObservable:function(e){n.each(r.Properties,t.Utils.defineProperty,e),Object.defineProperty(e,"image",{enumerable:!0,get:function(){return this._image},set:function(t){var e;switch(t&&t.nodeName.toLowerCase()){case"canvas":e="#"+t.id;break;default:e=t.src}this._image=r.ImageRegistry.contains(e)?r.ImageRegistry.get(t.src):t,this._flagImage=!0}}),Object.defineProperty(e,"offset",{enumerable:!0,get:function(){return this._offset},set:function(e){this._offset&&this._offset.unbind(t.Events.change,this._renderer.flagOffset),this._offset=e,this._offset.bind(t.Events.change,this._renderer.flagOffset),this._flagOffset=!0}}),Object.defineProperty(e,"scale",{enumerable:!0,get:function(){return this._scale},set:function(e){this._scale instanceof t.Vector&&this._scale.unbind(t.Events.change,this._renderer.flagScale),this._scale=e,this._scale instanceof t.Vector&&this._scale.bind(t.Events.change,this._renderer.flagScale),this._flagScale=!0}})}}),n.extend(r.prototype,t.Utils.Events,t.Shape.prototype,{_flagSrc:!1,_flagImage:!1,_flagVideo:!1,_flagLoaded:!1,_flagRepeat:!1,_flagOffset:!1,_flagScale:!1,_src:"",_image:null,_loaded:!1,_repeat:"no-repeat",_scale:1,_offset:null,clone:function(){return new r(this.src)},toObject:function(){return{src:this.src,image:this.image}},_update:function(){return(this._flagSrc||this._flagImage||this._flagVideo)&&(this.trigger(t.Events.change),(this._flagSrc||this._flagImage)&&(this.loaded=!1,r.load(this,n.bind(function(){this.loaded=!0,this.trigger(t.Events.change).trigger(t.Events.load)},this)))),this._image&&this._image.readyState>=4&&(this._flagVideo=!0),this},flagReset:function(){return this._flagSrc=this._flagImage=this._flagLoaded=this._flagVideo=this._flagScale=this._flagOffset=!1,this}}),r.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.Path,i=t.Rectangle,r=t.Sprite=function(i,r,s,a,o,l){n.call(this,[new t.Anchor,new t.Anchor,new t.Anchor,new t.Anchor],!0),this.noStroke(),this.noFill(),i instanceof t.Texture?this.texture=i:e.isString(i)&&(this.texture=new t.Texture(i)),this._update(),this.translation.set(r||0,s||0),e.isNumber(a)&&(this.columns=a),e.isNumber(o)&&(this.rows=o),e.isNumber(l)&&(this.frameRate=l)};e.extend(r,{Properties:["texture","columns","rows","frameRate","index"],MakeObservable:function(n){i.MakeObservable(n),e.each(r.Properties,t.Utils.defineProperty,n)}}),e.extend(r.prototype,i.prototype,{_flagTexture:!1,_flagColumns:!1,_flagRows:!1,_flagFrameRate:!1,flagIndex:!1,_amount:1,_duration:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_texture:null,_columns:1,_rows:1,_frameRate:0,_index:0,play:function(t,n,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=e.performance.now(),e.isNumber(t)&&(this._firstFrame=t),e.isNumber(n)&&(this._lastFrame=n),e.isFunction(i)?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){t=t||this.parent;var e=new r(this.texture,this.translation.x,this.translation.y,this.columns,this.rows,this.frameRate);return this.playing&&(e.play(this._firstFrame,this._lastFrame),e._loop=this._loop),t&&t.add(e),e},_update:function(){var t,n,r,s,a,o,l,h,u,c=this._texture,f=this._columns,d=this._rows;if((this._flagColumns||this._flagRows)&&(this._amount=this._columns*this._rows),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._flagTexture&&(this.fill=this._texture),this._texture.loaded){n=(h=c.image.height)/d,s=this._amount,this.width!==(t=(l=c.image.width)/f)&&(this.width=t),this.height!==n&&(this.height=n),this._playing&&this._frameRate>0&&(e.isNaN(this._lastFrame)&&(this._lastFrame=s-1),r=e.performance.now()-this._startTime,a=1e3*((u=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?r%=a:r=Math.min(r,a),o=e.lerp(this._firstFrame,u,r/a),(o=Math.floor(o))!==this._index&&(this._index=o,o>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()));var g=this._index%f*-t+(l-t)/2,p=-n*Math.floor(this._index/f)+(h-n)/2;g!==c.offset.x&&(c.offset.x=g),p!==c.offset.y&&(c.offset.y=p)}return i.prototype._update.call(this),this},flagReset:function(){return this._flagTexture=this._flagColumns=this._flagRows=this._flagFrameRate=!1,i.prototype.flagReset.call(this),this}}),r.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=t.Utils,n=t.Path,i=t.Rectangle,r=t.ImageSequence=function(i,s,a,o){n.call(this,[new t.Anchor,new t.Anchor,new t.Anchor,new t.Anchor],!0),this._renderer.flagTextures=e.bind(r.FlagTextures,this),this._renderer.bindTextures=e.bind(r.BindTextures,this),this._renderer.unbindTextures=e.bind(r.UnbindTextures,this),this.noStroke(),this.noFill(),this.textures=e.map(i,r.GenerateTexture,this),this._update(),this.translation.set(s||0,a||0),this.frameRate=e.isNumber(o)?o:r.DefaultFrameRate};e.extend(r,{Properties:["frameRate","index"],DefaultFrameRate:30,FlagTextures:function(){this._flagTextures=!0},BindTextures:function(e){for(var n=e.length;n--;)e[n].bind(t.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},UnbindTextures:function(e){for(var n=e.length;n--;)e[n].unbind(t.Events.change,this._renderer.flagTextures);this._renderer.flagTextures()},MakeObservable:function(n){i.MakeObservable(n),e.each(r.Properties,t.Utils.defineProperty,n),Object.defineProperty(n,"textures",{enumerable:!0,get:function(){return this._textures},set:function(e){var n=this._renderer.bindTextures,i=this._renderer.unbindTextures;this._textures&&this._textures.unbind(t.Events.insert,n).unbind(t.Events.remove,i),this._textures=new t.Utils.Collection((e||[]).slice(0)),this._textures.bind(t.Events.insert,n).bind(t.Events.remove,i),n(this._textures)}})},GenerateTexture:function(n){return n instanceof t.Texture?n:e.isString(n)?new t.Texture(n):void 0}}),e.extend(r.prototype,i.prototype,{_flagTextures:!1,_flagFrameRate:!1,_flagIndex:!1,_amount:1,_duration:0,_index:0,_startTime:0,_playing:!1,_firstFrame:0,_lastFrame:0,_loop:!0,_textures:null,_frameRate:0,play:function(t,n,i){return this._playing=!0,this._firstFrame=0,this._lastFrame=this.amount-1,this._startTime=e.performance.now(),e.isNumber(t)&&(this._firstFrame=t),e.isNumber(n)&&(this._lastFrame=n),e.isFunction(i)?this._onLastFrame=i:delete this._onLastFrame,this._index!==this._firstFrame&&(this._startTime-=1e3*Math.abs(this._index-this._firstFrame)/this._frameRate),this},pause:function(){return this._playing=!1,this},stop:function(){return this._playing=!1,this._index=0,this},clone:function(t){t=t||this.parent;var e=new r(this.textures,this.translation.x,this.translation.y,this.frameRate);return e._loop=this._loop,this._playing&&e.play(),t&&t.add(e),e},_update:function(){var n,r,s,a,o,l,h,u,c=this._textures;return this._flagTextures&&(this._amount=c.length),this._flagFrameRate&&(this._duration=1e3*this._amount/this._frameRate),this._playing&&this._frameRate>0?(a=this._amount,e.isNaN(this._lastFrame)&&(this._lastFrame=a-1),s=e.performance.now()-this._startTime,o=1e3*((u=this._lastFrame+1)-this._firstFrame)/this._frameRate,this._loop?s%=o:s=Math.min(s,o),h=e.lerp(this._firstFrame,u,s/o),(h=Math.floor(h))!==this._index&&(this._index=h,(l=c[this._index]).loaded&&(r=l.image.height,this.width!==(n=l.image.width)&&(this.width=n),this.height!==r&&(this.height=r),this.fill=l,h>=this._lastFrame-1&&this._onLastFrame&&this._onLastFrame()))):!this._flagIndex&&this.fill instanceof t.Texture||((l=c[this._index]).loaded&&(r=l.image.height,this.width!==(n=l.image.width)&&(this.width=n),this.height!==r&&(this.height=r)),this.fill=l),i.prototype._update.call(this),this},flagReset:function(){return this._flagTextures=this._flagFrameRate=!1,i.prototype.flagReset.call(this),this}}),r.MakeObservable(r.prototype)}(("undefined"!=typeof global?global:this).Two),function(t){var e=Math.min,n=Math.max,i=t.Utils,r=function(){t.Utils.Collection.apply(this,arguments),Object.defineProperty(this,"_events",{value:{},enumerable:!1}),this.ids={},this.on(t.Events.insert,this.attach),this.on(t.Events.remove,this.detach),r.prototype.attach.apply(this,arguments)};r.prototype=new t.Utils.Collection,r.prototype.constructor=r,i.extend(r.prototype,{attach:function(t){for(var e=0;e<t.length;e++)this.ids[t[e].id]=t[e];return this},detach:function(t){for(var e=0;e<t.length;e++)delete this.ids[t[e].id];return this}});var s=t.Group=function(){t.Shape.call(this,!0),this._renderer.type="group",this.additions=[],this.subtractions=[],this.children=arguments};function a(t,e){var n,r=t.parent;return r===e?(this.additions.push(t),void(this._flagAdditions=!0)):(r&&r.children.ids[t.id]&&(n=i.indexOf(r.children,t),r.children.splice(n,1),(n=i.indexOf(r.additions,t))>=0?r.additions.splice(n,1):(r.subtractions.push(t),r._flagSubtractions=!0)),e?(t.parent=e,this.additions.push(t),void(this._flagAdditions=!0)):((n=i.indexOf(this.additions,t))>=0?this.additions.splice(n,1):(this.subtractions.push(t),this._flagSubtractions=!0),void delete t.parent))}i.extend(s,{Children:r,InsertChildren:function(t){for(var e=0;e<t.length;e++)a.call(this,t[e],this)},RemoveChildren:function(t){for(var e=0;e<t.length;e++)a.call(this,t[e])},OrderChildren:function(t){this._flagOrder=!0},MakeObservable:function(e){var n=t.Path.Properties.slice(0),a=i.indexOf(n,"opacity");a>=0&&(n.splice(a,1),Object.defineProperty(e,"opacity",{enumerable:!0,get:function(){return this._opacity},set:function(t){this._flagOpacity=this._opacity!=t,this._opacity=t}})),t.Shape.MakeObservable(e),s.MakeGetterSetters(e,n),Object.defineProperty(e,"children",{enumerable:!0,get:function(){return this._children},set:function(e){var n=i.bind(s.InsertChildren,this),a=i.bind(s.RemoveChildren,this),o=i.bind(s.OrderChildren,this);this._children&&this._children.unbind(),this._children=new r(e),this._children.bind(t.Events.insert,n),this._children.bind(t.Events.remove,a),this._children.bind(t.Events.order,o)}}),Object.defineProperty(e,"mask",{enumerable:!0,get:function(){return this._mask},set:function(t){this._mask=t,this._flagMask=!0,t.clip||(t.clip=!0)}})},MakeGetterSetters:function(t,e){i.isArray(e)||(e=[e]),i.each(e,function(e){s.MakeGetterSetter(t,e)})},MakeGetterSetter:function(t,e){var n="_"+e;Object.defineProperty(t,e,{enumerable:!0,get:function(){return this[n]},set:function(t){this[n]=t,i.each(this.children,function(n){n[e]=t})}})}}),i.extend(s.prototype,t.Shape.prototype,{_flagAdditions:!1,_flagSubtractions:!1,_flagOrder:!1,_flagOpacity:!0,_flagMask:!1,_fill:"#fff",_stroke:"#000",_linewidth:1,_opacity:1,_visible:!0,_cap:"round",_join:"round",_miter:4,_closed:!0,_curved:!1,_automatic:!0,_beginning:0,_ending:1,_mask:null,clone:function(t){t=t||this.parent;var e=new s,n=i.map(this.children,function(t){return t.clone(e)});return e.add(n),e.opacity=this.opacity,this.mask&&(e.mask=this.mask),e.translation.copy(this.translation),e.rotation=this.rotation,e.scale=this.scale,t&&t.add(e),e},toObject:function(){var t={children:[],translation:this.translation.toObject(),rotation:this.rotation,scale:this.scale,opacity:this.opacity,mask:this.mask?this.mask.toObject():null};return i.each(this.children,function(e,n){t.children[n]=e.toObject()},this),t},corner:function(){var t=this.getBoundingClientRect(!0),e={x:t.left,y:t.top};return this.children.forEach(function(t){t.translation.subSelf(e)}),this},center:function(){var t=this.getBoundingClientRect(!0);return t.centroid={x:t.left+t.width/2,y:t.top+t.height/2},this.children.forEach(function(e){e.isShape&&e.translation.subSelf(t.centroid)}),this},getById:function(t){var e=function(t,n){if(t.id===n)return t;if(t.children)for(var i=t.children.length;i--;){var r=e(t.children[i],n);if(r)return r}};return e(this,t)||null},getByClassName:function(t){var e=[],n=function(t,i){return-1!=t.classList.indexOf(i)?e.push(t):t.children&&t.children.forEach(function(t){n(t,i)}),e};return n(this,t)},getByType:function(e){var n=[],i=function(e,r){for(var s in e.children)e.children[s]instanceof r?n.push(e.children[s]):e.children[s]instanceof t.Group&&i(e.children[s],r);return n};return i(this,e)},add:function(t){t=t instanceof Array?t.slice():i.toArray(arguments);for(var e=0;e<t.length;e++)t[e]&&t[e].id&&this.children.push(t[e]);return this},remove:function(t){var e=this.parent;if(arguments.length<=0&&e)return e.remove(this),this;t=t instanceof Array?t.slice():i.toArray(arguments);for(var n=0;n<t.length;n++)t[n]&&this.children.ids[t[n].id]&&this.children.splice(i.indexOf(this.children,t[n]),1);return this},getBoundingClientRect:function(t){var r;this._update(!0);var s=1/0,a=-1/0,o=1/0,l=-1/0;return this.children.forEach(function(h){/(linear-gradient|radial-gradient|gradient)/.test(h._renderer.type)||(r=h.getBoundingClientRect(t),i.isNumber(r.top)&&i.isNumber(r.left)&&i.isNumber(r.right)&&i.isNumber(r.bottom)&&(o=e(r.top,o),s=e(r.left,s),a=n(r.right,a),l=n(r.bottom,l)))},this),{top:o,left:s,right:a,bottom:l,width:a-s,height:l-o}},noFill:function(){return this.children.forEach(function(t){t.noFill()}),this},noStroke:function(){return this.children.forEach(function(t){t.noStroke()}),this},subdivide:function(){var t=arguments;return this.children.forEach(function(e){e.subdivide.apply(e,t)}),this},flagReset:function(){return this._flagAdditions&&(this.additions.length=0,this._flagAdditions=!1),this._flagSubtractions&&(this.subtractions.length=0,this._flagSubtractions=!1),this._flagOrder=this._flagMask=this._flagOpacity=!1,t.Shape.prototype.flagReset.call(this),this}}),s.MakeObservable(s.prototype)}(("undefined"!=typeof global?global:this).Two);